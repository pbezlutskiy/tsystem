D:/Documents/PythonScripts/trading_system/gui/main_window.pyD:/Documents/PythonScripts/trading_system/guiD:/Documents/PythonScripts/trading_systemD:/Documents/PythonScriptsD:/DocumentsD:/D:/Documents/PythonScripts/trading_system/tbank_api/all_candles3.pyD:/Documents/PythonScripts/trading_system/tbank_apiD:/Documents/PythonScripts/trading_system/tbank_api/tbank_gui.pyD:/Documents/PythonScripts/trading_system/find_imports.pyD:/Documents/PythonScripts/trading_system/gui/tabs/position_tab.pyD:/Documents/PythonScripts/trading_system/gui/tabsD:/Documents/PythonScripts/trading_system/tbank_api/api_manager.pyD:/Documents/PythonScripts/trading_system/gui/tabs/risk_tab.pyD:/Documents/PythonScripts/trading_system/gui/tabs/stats_tab.pyD:/Documents/PythonScripts/trading_system/tbank_api/__init__.pyD:/Documents/PythonScripts/trading_system/tbank_api/cache_analytics.pyD:/Documents/PythonScripts/trading_system/tbank_api/optimized_data_manager.pyD:/Documents/PythonScripts/trading_system/backup/main.pyD:/Documents/PythonScripts/trading_system/backupD:/Documents/PythonScripts/trading_system/gui/tabs/instruments_tab.pyD:/Documents/PythonScripts/trading_system/utils/error_handler.pyD:/Documents/PythonScripts/trading_system/utilsD:/Documents/PythonScripts/trading_system/utils/__init__.pyD:/Documents/PythonScripts/trading_system/utils/supertrend.pyD:/Documents/PythonScripts/trading_system/test_fix.pyD:/Documents/PythonScripts/trading_system/scan_project_structure.pyD:/Documents/PythonScripts/trading_system/tbank_api/ultimate_data_manager.pyD:/Documents/PythonScripts/trading_system/config.pyD:/Documents/PythonScripts/trading_system/core/trading_system.pyD:/Documents/PythonScripts/trading_system/coreD:/Documents/PythonScripts/trading_system/gui/tabs/capital_tab.pyD:/Documents/PythonScripts/trading_system/gui/tabs/price_tab1.pyD:/Documents/PythonScripts/trading_system/tbank_api/cache_config.pyD:/Documents/PythonScripts/trading_system/gui/tabs/trades_tab.pyD:/Documents/PythonScripts/trading_system/backup/main_window.pyD:/Documents/PythonScripts/trading_system/test_instruments.pyD:/Documents/PythonScripts/trading_system/tbank_api/advanced_analytics.pyD:/Documents/PythonScripts/trading_system/main.pyD:/Documents/PythonScripts/trading_system/gui/tabs/__init__.pyD:/Documents/PythonScripts/trading_system/tbank_api/advanced_cache.pyD:/Documents/PythonScripts/trading_system/config/security.pyD:/Documents/PythonScripts/trading_system/configD:/Documents/PythonScripts/trading_system/gui/tabs/instruments_tab_working.pyD:/Documents/PythonScripts/trading_system/test_import.pyD:/Documents/PythonScripts/trading_system/test_psutil_fix.pyD:/Documents/PythonScripts/trading_system/tbank_api/tbank_data_loader.pyD:/Documents/PythonScripts/trading_system/test_ai_features.pyD:/Documents/PythonScripts/trading_system/test_analytics.pyD:/Documents/PythonScripts/trading_system/tbank_api/tbank_api.pyD:/Documents/PythonScripts/trading_system/gui/__init__.pyD:/Documents/PythonScripts/trading_system/tbank_api/tbank_data_manager.pyD:/Documents/PythonScripts/trading_system/gui/tabs/compare_tab.pyD:/Documents/PythonScripts/trading_system/gui/tabs/returns_tab.pyD:/Documents/PythonScripts/trading_system/tbank_api/cache_optimizer.pyD:/Documents/PythonScripts/trading_system/tbank_api/moex_api.pyD:/Documents/PythonScripts/trading_system/instrument_service_fixed.pyD:/Documents/PythonScripts/trading_system/tbank_api/smart_predictor.pyD:/Documents/PythonScripts/trading_system/tbank_api/cache_predictor.pyD:/Documents/PythonScripts/trading_system/core/visualizer.pyD:/Documents/PythonScripts/trading_system/utils/data_loader.pyD:/Documents/PythonScripts/trading_system/tbank_api/tbank_cache.pyD:/Documents/PythonScripts/trading_system/add_missing_methods.pyD:/Documents/PythonScripts/trading_system/core/__init__.pyD:/Documents/PythonScripts/trading_system/gui/tabs/correlation_tab.pyD:/Documents/PythonScripts/trading_system/gui/components.pyD:/Documents/PythonScripts/trading_system/test_complete_system.pyD:/Documents/PythonScripts/trading_system/test_instruments_simple.pyD:/Documents/PythonScripts/trading_system/tbank_api/instrument_service.pyD:/Documents/PythonScripts/trading_system/tbank_api/check_structure.pyD:/Documents/PythonScripts/trading_system/tbank_api/tbank_config.pyD:/Documents/PythonScripts/trading_system/tbank_api/auto_optimizer.pyD:/Documents/PythonScripts/trading_system/update_api_manager.pyD:/Documents/PythonScripts/trading_system/utils/analytics.pyD:/Documents/PythonScripts/trading_system/find_realexchange.pyD:/Documents/PythonScripts/trading_system/gui/tabs/price_tab.pyD:/Documents/PythonScripts/trading_system/tbank_api/tbank_api_fixed.pyD:/Documents/PythonScripts/trading_system/gui/tabs/risk_analysis_tab.pyextractor_python_version.major3extractor_python_version.minor13extractor_python_version.micro2extractor_python_version.releaselevelfinalextractor_python_version.serial0flags.bytes_warningflags.debugflags.dev_modeFalseflags.dont_write_bytecodeflags.gil1flags.hash_randomizationflags.ignore_environmentflags.inspectflags.int_max_str_digits4300flags.interactiveflags.isolatedflags.n_fields19flags.n_sequence_fields18flags.n_unnamed_fieldsflags.no_siteflags.no_user_siteflags.optimizeflags.quietflags.safe_pathflags.utf8_modeflags.verboseflags.warn_default_encodingfloat.dig15float.epsilon2.220446049250313e-16float.mant_dig53float.max1.7976931348623157e+308float.max_10_exp308float.max_exp1024float.min2.2250738585072014e-308float.min_10_exp-307float.min_exp-1021float.n_fields11float.n_sequence_fieldsfloat.n_unnamed_fieldsfloat.radixfloat.roundsoptions.alloptions.colorizeoptions.extract_stdliboptions.guessoptions.helpoptions.ignore_missing_modulesoptions.introspect_coptions.max_import_depthinfoptions.max_procsalloptions.no_symlinksoptions.no_syntax_errorsoptions.noneoptions.pruneTrueoptions.quietoptions.respect_initoptions.splitoptions.topoptions.trace_onlyoptions.trap_cacheD:\Documents\PythonScripts\trading_system\trading_db\working\trap_cacheoptions.unrolloptions.verboseoptions.verbositysys.prefixC:\Users\bezlp\AppData\Local\Programs\Python\Python313sys.pathC:\Users\bezlp\AppData\Local\Programs\Python\Python313\python313.zip;C:\Users\bezlp\AppData\Local\Programs\Python\Python313\DLLs;C:\Users\bezlp\AppData\Local\Programs\Python\Python313\Lib;C:\Users\bezlp\AppData\Local\Programs\Python\Python313language.version3.12extractor.pathsys.platformwin32os.sep\os.pathsep;extractor.version7.1.5__call____repr____get____set____delete____objclass____bool____add____contains__u'str(object='') -> str
str(bytes_or_buffer[, encoding[, errors]]) -> str

Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.__str__() (if defined)
or repr(object).
encoding defaults to 'utf-8'.
errors defaults to 'strict'.'__doc____eq__u'method_descriptor.__doc__'__qualname__u'member_descriptor.__doc__'__name__u'member_descriptor.__qualname__'__reduce__u'the object's class'u'object.__class__'__class____delattr____dir__u'The base class of the class hierarchy.

When called, it accepts no arguments and returns a new featureless
instance that has no instance attributes and cannot be given any.
'__format____ge____getattribute____getstate____gt____hash____init__u'classmethod_descriptor.__doc__'u'classmethod_descriptor.__qualname__'u'classmethod_descriptor.__text_signature__'__text_signature__.super.classmethod_descriptor__init_subclass____le____lt____ne__u'builtin_function_or_method.__doc__'__module__u'builtin_function_or_method.__name__'u'builtin_function_or_method.__qualname__'u'builtin_function_or_method.__self__'__self__u'builtin_function_or_method.__text_signature__'builtin_function_or_method__new____reduce_ex____setattr____sizeof____str____subclasshook__objectmember_descriptoru'method_descriptor.__qualname__'u'method_descriptor.__text_signature__'method_descriptor__getitem____getnewargs____iter____len____mod____mul____rmod____rmul__capitalizecasefoldcentercountencodeendswithexpandtabsfindformatformat_mapindexisalnumisalphaisasciiisdecimalisdigitisidentifierislowerisnumericisprintableisspaceistitleisupperjoinljustlowerlstripu'staticmethod.__dict__'__dict__u'Convert a function to be a static method.

A static method does not receive an implicit first argument.
To declare a static method, use this idiom:

     class C:
         @staticmethod
         def f(arg1, arg2, argN):
             ...

It can be called either on the class (e.g. C.f()) or on an instance
(e.g. C().f()). Both the class and the instance are ignored, and
neither is passed implicitly as the first argument to the method.

Static methods in Python are similar to those found in Java or C++.
For a more advanced concept, see the classmethod builtin.'__func__u'staticmethod.__isabstractmethod__'__isabstractmethod____wrapped__staticmethodmaketranspartitionremoveprefixremovesuffixreplacerfindrindexrjustrpartitionrsplitrstripsplitsplitlinesstartswithstripswapcasetitletranslateupperzfillunicodeu'The type of the None singleton.'NoneTypeNoneu'method-wrapper.__doc__'u'method-wrapper.__name__'u'method-wrapper.__objclass__'u'method-wrapper.__qualname__'u'method-wrapper.__text_signature__'method-wrapperu'wrapper_descriptor.__doc__'u'wrapper_descriptor.__qualname__'u'wrapper_descriptor.__text_signature__'wrapper_descriptoru'getset_descriptor.__doc__'u'getset_descriptor.__qualname__'getset_descriptoru'type.__abstractmethods__'__abstractmethods__u'type.__annotations__'__annotations____base__u'type.__bases__'__bases____basicsize__u'type.__dict__'__dictoffset__u'type.__doc__'__flags____instancecheck____itemsize__u'type.__module__'u'type.__mro__'__mro__u'type.__name__'__or____prepare__u'type.__qualname__'__ror____subclasscheck____subclasses__u'type.__text_signature__'u'type.__type_params__'__type_params____weakrefoffset__mrotypeu'function.__annotations__'__builtins____closure__u'function.__code__'__code__u'function.__defaults__'__defaults__u'function.__dict__'__globals__u'function.__kwdefaults__'__kwdefaults__u'function.__name__'u'function.__qualname__'u'function.__type_params__'functionFunctionTypeBuiltinFunctionTypeu'classmethod.__dict__'u'Convert a function to be a class method.

A class method receives the class as implicit first argument,
just like an instance method receives the instance.
To declare a class method, use this idiom:

  class C:
      @classmethod
      def f(cls, arg1, arg2, argN):
          ...

It can be called either on the class (e.g. C.f()) or on an instance
(e.g. C().f()).  The instance is ignored except for its class.
If a class method is called for a derived class, the derived class
object is passed as the implied first argument.

Class methods are different than C++ or Java static methods.
If you want those, see the staticmethod builtin.'u'classmethod.__isabstractmethod__'classmethodClassMethodStaticMethodu'module.__annotations__'u'Create a module object.

The name must be a string; the optional doc argument can have any type.'moduleModuleType__class_getitem____del__u'name of the generator'u'generator.__name__'__next__u'qualified name of the generator'u'generator.__qualname__'closeu'generator.gi_code'gi_codeu'generator.gi_frame'gi_frameu'generator.gi_running'gi_runningu'generator.gi_suspended'gi_suspendedu'object being iterated by yield from, or None'u'generator.gi_yieldfrom'gi_yieldfromsendthrowgenerator__and__u'Returns True when the argument is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.'__invert____rand____rxor____xor____abs____ceil____divmod__u'int([x]) -> integer
int(x, base=10) -> integer

Convert a number or string to an integer, or return 0 if no arguments
are given.  If x is a number, return x.__int__().  For floating-point
numbers, this truncates towards zero.

If x is not a number or if base is given, then x must be a string,
bytes, or bytearray instance representing an integer literal in the
given base.  The literal can be preceded by '+' or '-' and be surrounded
by whitespace.  The base defaults to 10.  Valid bases are 0 and 2-36.
Base 0 means to interpret the base from the string as an integer literal.
>>> int('0b100', base=0)
4'__float____floor____floordiv____index____int____lshift____neg____pos____pow____radd____rdivmod____rfloordiv____rlshift____round____rpow____rrshift____rshift____rsub____rtruediv____sub____truediv____trunc__as_integer_ratiobit_countbit_lengthconjugateu'the denominator of a rational number in lowest terms'u'int.denominator'denominatorfrom_bytesu'the imaginary part of a complex number'u'int.imag'imagis_integeru'the numerator of a rational number in lowest terms'u'int.numerator'numeratoru'the real part of a complex number'u'int.real'realto_bytesintboolbreakpointhook__breakpointhook__displayhook__displayhook__u'This module provides access to some objects used or maintained by the
interpreter and to functions that interact strongly with the interpreter.

Dynamic objects:

argv -- command line arguments; argv[0] is the script pathname if known
path -- module search path; path[0] is the script directory, else ''
modules -- dictionary of loaded modules

displayhook -- called to show results in an interactive session
excepthook -- called to handle any uncaught exception other than SystemExit
  To customize printing in an interactive session or to install a custom
  top-level exception handler, assign other functions to replace these.

stdin -- standard input file object; used by input()
stdout -- standard output file object; used by print()
stderr -- standard error object; used for error messages
  By assigning other file objects (or objects that behave like files)
  to these, it is possible to redirect all of the interpreter's I/O.

last_exc - the last uncaught exception
  Only available in an interactive session after a
  traceback has been printed.
last_type -- type of last uncaught exception
last_value -- value of last uncaught exception
last_traceback -- traceback of last uncaught exception
  These three are the (deprecated) legacy representation of last_exc.

Static objects:

builtin_module_names -- tuple of module names built into this interpreter
copyright -- copyright notice pertaining to this interpreter
exec_prefix -- prefix used to find the machine-specific Python library
executable -- absolute path of the executable binary of the Python interpreter
float_info -- a named tuple with information about the float implementation.
float_repr_style -- string indicating the style of repr() output for floats
hash_info -- a named tuple with information about the hash algorithm.
hexversion -- version information encoded as a single integer
implementation -- Python implementation information.
int_info -- a named tuple with information about the int implementation.
maxsize -- the largest supported length of containers.
maxunicode -- the value of the largest Unicode code point
platform -- platform identifier
prefix -- prefix used to find the Python library
thread_info -- a named tuple with information about the thread implementation.
version -- the version of this interpreter as a string
version_info -- version information as a named tuple
dllhandle -- [Windows only] integer handle of the Python DLL
winver -- [Windows only] version number of the Python DLL
_enablelegacywindowsfsencoding -- [Windows only]
__stdin__ -- the original stdin; don't touch!
__stdout__ -- the original stdout; don't touch!
__stderr__ -- the original stderr; don't touch!
__displayhook__ -- the original displayhook; don't touch!
__excepthook__ -- the original excepthook; don't touch!

Functions:

displayhook() -- print an object to the screen, and save it in builtins._
excepthook() -- print an exception and its traceback to sys.stderr
exception() -- return the current thread's active exception
exc_info() -- return information about the current thread's active exception
exit() -- exit the interpreter by raising SystemExit
getdlopenflags() -- returns flags to be used for dlopen() calls
getprofile() -- get the global profiling function
getrefcount() -- return the reference count for an object (plus one :-)
getrecursionlimit() -- return the max recursion depth for the interpreter
getsizeof() -- return the size of an object in bytes
gettrace() -- get the global debug tracing function
setdlopenflags() -- set the flags to be used for dlopen() calls
setprofile() -- set the global profiling function
setrecursionlimit() -- set the max recursion depth for the interpreter
settrace() -- set the global debug tracing function
'excepthook__excepthook__u'built-in'_ORIGINu'dictionary for instance variables'u'BuiltinImporter.__dict__'u'Meta path import for built-in modules.

All methods are either class or static methods to avoid the need to
instantiate the class.

'971__firstlineno__u'_frozen_importlib'u'Built-in immutable sequence.

If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable's items.

If the argument is a tuple, the return value is the same object.'tuple__static_attributes__u'list of weak references to the object'u'BuiltinImporter.__weakref__'__weakref__create_moduleexec_modulefind_specget_codeget_sourceis_package_load_module_shimload_module_frozen_importlib.BuiltinImporter__loader__u'sys'u''__package__u'ModuleSpec.__dict__'u'The specification for a module, used for loading.

A module's spec is the source for information about the module.  For
data associated with the module, including source, use the spec's
loader.

`name` is the absolute name of the module.  `loader` is the loader
to use when loading the module.  `parent` is the name of the
package the module is in.  The parent is derived from the name.

`is_package` determines if the module is considered a package or
not.  On modules this is reflected by the `__path__` attribute.

`origin` is the specific location used by the loader from which to
load the module, if that information is available.  When filename is
set, origin will match.

`has_location` indicates that a spec's "origin" reflects a location.
When this is True, `__file__` attribute of the module is set.

`cached` is the location of the cached bytecode file, if any.  It
corresponds to the `__cached__` attribute.

`submodule_search_locations` is the sequence of path entries to
search when importing submodules.  If set, is_package should be
True--and False otherwise.

Packages are simply modules that (may) have submodules.  If a spec
has a non-None value in `submodule_search_locations`, the import
system will consider modules loaded from the spec as packages.

Only finders (see importlib.abc.MetaPathFinder and
importlib.abc.PathEntryFinder) should modify ModuleSpec instances.

'562u'_cached'u'_set_fileattr'u'_uninitialized_submodules'u'loader'u'loader_state'u'name'u'origin'u'submodule_search_locations'u'ModuleSpec.__weakref__'u'property.__isabstractmethod__'u'property.__name__'__set_name__deleterfdelfgetfsetgettersetterpropertycachedhas_locationparent_frozen_importlib.ModuleSpec__spec__u'TextIOWrapper._CHUNK_SIZE'_CHUNK_SIZEu'Character and line based layer over a BufferedIOBase object, buffer.

encoding gives the name of the encoding that the stream will be
decoded or encoded with. It defaults to locale.getencoding().

errors determines the strictness of encoding and decoding (see
help(codecs.Codec) or the documentation for codecs.register) and
defaults to "strict".

newline controls how line endings are handled. It can be None, '',
'\n', '\r', and '\r\n'.  It works as follows:

* On input, if newline is None, universal newlines mode is
  enabled. Lines in the input can end in '\n', '\r', or '\r\n', and
  these are translated into '\n' before being returned to the
  caller. If it is '', universal newline mode is enabled, but line
  endings are returned to the caller untranslated. If it has any of
  the other legal values, input lines are only terminated by the given
  string, and the line ending is returned to the caller untranslated.

* On output, if newline is None, any '\n' characters written are
  translated to the system default line separator, os.linesep. If
  newline is '' or '\n', no translation takes place. If newline is any
  of the other legal values, any '\n' characters written are translated
  to the given string.

If line_buffering is True, a call to flush is implied when a call to
write contains a newline character.'u'_io'_finalizingbufferu'TextIOWrapper.closed'closeddetachencodingu'TextIOWrapper.errors'errorsfilenoflushisattyline_bufferingu'TextIOWrapper.name'nameu'TextIOWrapper.newlines'newlinesreadreadablereadlinereconfigureseekseekabletelltruncatewritablewritewrite_throughu'Base class for text I/O.

This class provides a character and line based interface to stream
I/O. There is no readinto method because Python's character strings
are immutable.
'u'Encoding of the text stream.

Subclasses should override.'u'_TextIOBase.encoding'u'The error setting of the decoder or encoder.

Subclasses should override.'u'_TextIOBase.errors'u'Line endings translated so far.

Only line endings translated during reading are considered.

Subclasses should override.'u'_TextIOBase.newlines'u'_IOBase.__dict__'u'The abstract base class for all I/O classes.

This class provides dummy implementations for many methods that
derived classes can override selectively; the default implementations
represent a file that cannot be read, written or seeked.

Even though IOBase does not declare read, readinto, or write because
their signatures will vary, implementations and clients should
consider those methods part of the interface. Also, implementations
may raise UnsupportedOperation when operations they do not support are
called.

The basic type used for binary data read from or written to a file is
bytes. Other bytes-like objects are accepted as method arguments too.
In some cases (such as readinto), a writable object is required. Text
I/O classes work with str data.

Note that calling any method (except additional calls to close(),
which are ignored) on a closed stream should raise a ValueError.

IOBase (and its subclasses) support the iterator protocol, meaning
that an IOBase object can be iterated over yielding the lines in a
stream.

IOBase also supports the :keyword:`with` statement. In this example,
fp is closed after the suite of the with statement is complete:

with open('spam.txt', 'r') as fp:
    fp.write('Spam and eggs!')
'__enter____exit___checkClosed_checkReadable_checkSeekable_checkWritableu'_IOBase.closed'readlineswritelines_io._IOBase_io._TextIOBase_io.TextIOWrapper__stderr____stdin____stdout__unraisablehook__unraisablehook__u'C:\Users\bezlp\AppData\Local\Programs\Python\Python313\python.exe'_base_executable_baserepl_clear_internal_caches_clear_type_cache_current_exceptions_current_frames_debugmallocstats_enablelegacywindowsfsencoding_framework_get_cpu_count_config_getframe_getframemodulenameu'CPython'u'tags/v3.13.2'u'4f8bb39'_git_is_gil_enabled_is_interned_setprofileallthreads_settraceallthreadsu'C:\Users\bezlp\AppData\Local\Programs\Python\Python313\Lib'_stdlib_diru'..\..'_vpath__delitem__u'dict() -> new empty dictionary
dict(mapping) -> new dictionary initialized from a mapping object's
    (key, value) pairs
dict(iterable) -> new dictionary initialized as if via:
    d = {}
    for k, v in iterable:
        d[k] = v
dict(**kwargs) -> new dictionary initialized with the name=value pairs
    in the keyword argument list.  For example:  dict(one=1, two=2)'__ior____reversed____setitem__clearcopyfromkeysgetitemskeyspoppopitemsetdefaultupdatevaluesdict_xoptionsactivate_stack_trampolineaddaudithook1013api_versionu'Built-in mutable sequence.

If no argument is given, the constructor creates a new empty list.
The argument must be an iterable if specified.'__iadd____imul__appendextendinsertremovereversesortlistu'C:\codeql\codeql\python\tools\python_tracer.py'u'--verbosity'u'3'u'-z'u'all'u'-c'u'D:\Documents\PythonScripts\trading_system\trading_db\working\trap_cache'u'-R'u'D:\Documents\PythonScripts\trading_system'u'-Y'u'D:\Documents\PythonScripts\trading_system\env'argvauditu'C:\Users\bezlp\AppData\Local\Programs\Python\Python313'base_exec_prefixbase_prefixu'_abc'u'_ast'u'_bisect'u'_blake2'u'_codecs'u'_codecs_cn'u'_codecs_hk'u'_codecs_iso2022'u'_codecs_jp'u'_codecs_kr'u'_codecs_tw'u'_collections'u'_contextvars'u'_csv'u'_datetime'u'_functools'u'_heapq'u'_imp'u'_interpchannels'u'_interpqueues'u'_interpreters'u'_json'u'_locale'u'_lsprof'u'_md5'u'_multibytecodec'u'_opcode'u'_operator'u'_pickle'u'_random'u'_sha1'u'_sha2'u'_sha3'u'_signal'u'_sre'u'_stat'u'_statistics'u'_string'u'_struct'u'_symtable'u'_sysconfig'u'_thread'u'_tokenize'u'_tracemalloc'u'_typing'u'_warnings'u'_weakref'u'_winapi'u'array'u'atexit'u'binascii'u'builtins'u'cmath'u'errno'u'faulthandler'u'gc'u'itertools'u'marshal'u'math'u'mmap'u'msvcrt'u'nt'u'time'u'winreg'u'xxsubtype'u'zlib'builtin_module_namesu'little'byteordercall_tracingu'Copyright (c) 2001-2024 Python Software Foundation.
All Rights Reserved.

Copyright (c) 2000 BeOpen.com.
All Rights Reserved.

Copyright (c) 1995-2001 Corporation for National Research Initiatives.
All Rights Reserved.

Copyright (c) 1991-1995 Stichting Mathematisch Centrum, Amsterdam.
All Rights Reserved.'copyrightdeactivate_stack_trampoline140720241836032dllhandledont_write_bytecodeexc_infoexceptionexec_prefixexecutableexitu'sys.flags

Flags provided through command line arguments or environment vars.'u'debug'u'inspect'u'interactive'u'optimize'u'dont_write_bytecode'u'no_user_site'u'no_site'u'ignore_environment'u'verbose'u'bytes_warning'u'quiet'u'hash_randomization'u'isolated'u'dev_mode'u'utf8_mode'u'warn_default_encoding'u'safe_path'u'int_max_str_digits'__match_args____replace__bytes_warningdebugdev_modegilhash_randomizationignore_environmentinspectint_max_str_digitsinteractiveisolatedn_fieldsn_sequence_fieldsn_unnamed_fieldsno_siteno_user_siteoptimizequietsafe_pathutf8_modeverbosewarn_default_encodingsys.flagsflagsu'sys.float_info

A named tuple holding information about the float type. It contains low level
information about the precision and internal representation. Please study
your system's :file:`float.h` for more information.'u'max'u'max_exp'u'max_10_exp'u'min'u'min_exp'u'min_10_exp'u'dig'u'mant_dig'u'epsilon'u'radix'u'rounds'digepsilonmant_digmaxmax_10_expmax_expminmin_10_expmin_expradixroundssys.float_infou'Convert a string or number to a floating-point number, if possible.'__getformat__fromhexhexu'float.imag'u'float.real'floatfloat_infou'short'float_repr_styleget_asyncgen_hooksget_coroutine_origin_tracking_depthget_int_max_str_digitsgetallocatedblocksgetdefaultencodinggetfilesystemencodeerrorsgetfilesystemencodinggetprofilegetrecursionlimitgetrefcountgetsizeofgetswitchintervalgettracegetunicodeinternedsizegetwindowsversionu'hash_info

A named tuple providing parameters used for computing
hashes. The attributes are read only.'u'width'u'modulus'u'inf'u'nan'u'imag'u'algorithm'u'hash_bits'u'seed_bits'u'cutoff'algorithmcutoffhash_bitsmodulus9nanseed_bitswidthsys.hash_info6423058430092136939513141591000003u'siphash13'128hash_info51184368hexversionu'A simple attribute-based namespace.'types.SimpleNamespaceimplementationu'sys.int_info

A named tuple that holds information about Python's
internal representation of integers.  The attributes are read only.'u'bits_per_digit'u'sizeof_digit'u'default_max_str_digits'u'str_digits_check_threshold'bits_per_digitdefault_max_str_digits4sizeof_digitstr_digits_check_thresholdsys.int_info30640int_infointernis_finalizingis_stack_trampoline_active9223372036854775807maxsize1114111maxunicodeu'frozen'u'\'_SEPu'FrozenImporter.__dict__'u'Meta path import for frozen modules.

All methods are either class or static methods to avoid the need to
instantiate the class.

'1023u'FrozenImporter.__weakref__'_fix_up_module_resolve_filename_frozen_importlib.FrozenImporteru'PathFinder.__dict__'u'Meta path finder for sys.path and package __path__ attributes.'1465u'_frozen_importlib_external'u'PathFinder.__weakref__'_get_spec_path_hooks_path_importer_cachefind_distributionsinvalidate_caches_frozen_importlib_external.PathFindermeta_pathmodulesCOVERAGE_IDDEBUGGER_IDDISABLEMISSING5OPTIMIZER_IDPROFILER_IDu'sys.monitoring'_all_eventseventsfree_tool_idget_eventsget_local_eventsget_toolregister_callbackrestart_eventsset_eventsset_local_eventsuse_tool_idsys.monitoringmonitoringu'-S'u'from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=15528, pipe_handle=464)'u'--multiprocessing-fork'orig_argvu'C:\codeql\codeql\python\tools\python3src.zip'u'C:\codeql\codeql\python\tools'u'C:\Users\bezlp\AppData\Local\Programs\Python\Python313\python313.zip'u'C:\Users\bezlp\AppData\Local\Programs\Python\Python313\DLLs'pathu'zipimporter(archivepath) -> zipimporter object

Create a new zipimporter instance. 'archivepath' must be a path to
a zipfile, or to a specific path inside a zipfile. For example, it can be
'/tmp/myimport.zip', or '/tmp/myimport.zip/mydirectory', if mydirectory is a
valid directory inside the archive.

'ZipImportError is raised if 'archivepath' doesn't point to a valid Zip
archive.

The 'archive' attribute of zipimporter objects contains the name of the
zipfile targeted.
'50u'zipimport'u'archive'u'prefix'_get_filesget_dataget_filenameget_resource_readeru'_LoaderBasics.__dict__'u'Base class of common code needed by both SourceLoader and
SourcelessFileLoader.'1004u'_LoaderBasics.__weakref__'_frozen_importlib_external._LoaderBasicszipimport.zipimporterpath_hook_for_FileFinderpath_hookspath_importer_cacheu'win32'platformu'DLLs'platlibdirprefixpycache_prefixset_asyncgen_hooksset_coroutine_origin_tracking_depthset_int_max_str_digitssetprofilesetrecursionlimitsetswitchintervalsettracestderrstdinu'Build an immutable unordered collection of unique elements.'differenceintersectionisdisjointissubsetissupersetsymmetric_differenceunionfrozensetstdlib_module_namesstdoutu'sys.thread_info

A named tuple holding information about the thread implementation.'u'lock'u'version'lockversionsys.thread_infothread_infou'3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]'u'sys.version_info

Version information as a named tuple.'u'major'u'minor'u'micro'u'releaselevel'u'serial'majormicrominorreleaselevelserialsys.version_infou'final'version_infowarnoptionsu'3.13'winversysu'Common base class for all non-exit exceptions.'u'exception cause'u'BaseException.__cause__'__cause__u'exception context'u'BaseException.__context__'__context__u'BaseException.__dict__'u'Common base class for all exceptions'__setstate____suppress_context__u'BaseException.__traceback__'__traceback__add_noteu'BaseException.args'argswith_tracebackBaseExceptionExceptionu'Inappropriate argument type.'TypeErroru'Attribute not found.'objAttributeErroru'Mapping key not found.'u'Base class for lookup errors.'LookupErrorKeyErroru'Build an unordered collection of unique elements.'__iand____isub____ixor__adddifference_updatediscardintersection_updatesymmetric_difference_updatesetlocalsglobalsMethodDescriptorTypeu'super() -> same as super(__class__, <first argument>)
super(type) -> unbound super object
super(type, obj) -> bound super object; requires isinstance(obj, type)
super(type, type2) -> bound super object; requires issubclass(type2, type)
Typical use to call a cooperative superclass method:
class C(B):
    def meth(self, arg):
        super().meth(arg)
This works for class methods too:
class C(B):
    @classmethod
    def cmeth(cls, arg):
        super().cmeth(arg)
'__self_class____thisclass__superu'method.__doc__'methodMethodType_1_2__buffer____bytes__u'bytes(iterable_of_ints) -> bytes
bytes(string, encoding[, errors]) -> bytes
bytes(bytes_or_buffer) -> immutable copy of bytes_or_buffer
bytes(int) -> bytes object of size given by the parameter initialized with null bytes
bytes() -> empty bytes object

Construct an immutable array of bytes from:
  - an iterable yielding integers in range(256)
  - a text string encoded using the specified encoding
  - any object implementing the buffer API.
  - an integer'decodebytesb'2'b2b'3'b3u'2'u2u3u'Base class for arithmetic errors.'ArithmeticErroru'Assertion failed.'AssertionErroru'A combination of multiple unrelated exceptions.'deriveexceptionsmessagesubgroupBaseExceptionGroupu'I/O operation would block.'u'Base class for I/O related errors.'u'OSError.characters_written'characters_writtenerrnofilenamefilename2strerrorwinerrorOSErrorBlockingIOErroru'Broken pipe.'u'Connection error.'ConnectionErrorBrokenPipeErroru'Buffer error.'BufferErroru'Base class for warnings about bytes and buffer related problems, mostly
related to conversion from str or comparing to str.'u'Base class for warning categories.'WarningBytesWarningu'Child process error.'ChildProcessErroru'Connection aborted.'ConnectionAbortedErroru'Connection refused.'ConnectionRefusedErroru'Connection reset.'ConnectionResetErroru'Base class for warnings about deprecated features.'DeprecationWarningu'Read beyond end of file.'EOFErroru'The type of the Ellipsis singleton.'ellipsisEllipsisu'Base class for warnings about encodings.'EncodingWarningEnvironmentErroru'ExceptionGroup.__weakref__'ExceptionGroupu'File already exists.'FileExistsErroru'File not found.'FileNotFoundErroru'Floating-point operation failed.'FloatingPointErroru'Base class for warnings about constructs that will change semantically
in the future.'FutureWarningu'Request that a generator exit.'GeneratorExitIOErroru'Import can't find module, or can't find name in module.'msgname_fromImportErroru'Base class for warnings about probable mistakes in module imports'ImportWarningu'Improper indentation.'u'Invalid syntax.'end_linenoend_offsetlinenooffsetprint_file_and_linetextSyntaxErrorIndentationErroru'Sequence index out of range.'IndexErroru'Interrupted by signal.'InterruptedErroru'Operation doesn't work on directories.'IsADirectoryErroru'Program interrupted by user.'KeyboardInterruptu'Out of memory.'MemoryErroru'Module not found.'ModuleNotFoundErroru'Name not found globally.'NameErroru'Operation only works on directories.'NotADirectoryErroru'The type of the NotImplemented singleton.'NotImplementedTypeNotImplementedu'Method or function hasn't been implemented yet.'u'Unspecified run-time error.'RuntimeErrorNotImplementedErroru'Result too large to be represented.'OverflowErroru'Base class for warnings about features which will be deprecated
in the future.'PendingDeprecationWarningu'Not enough permissions.'PermissionErroru'Process not found.'ProcessLookupErroru'Operation blocked during Python finalization.'PythonFinalizationErroru'Recursion limit exceeded.'RecursionErroru'Weak ref proxy used after referent went away.'ReferenceErroru'Base class for warnings about resource usage.'ResourceWarningu'Base class for warnings about dubious runtime behavior.'RuntimeWarningu'Signal the end from iterator.__anext__().'StopAsyncIterationu'Signal the end from iterator.__next__().'valueStopIterationu'Base class for warnings about dubious syntax.'SyntaxWarningu'Internal error in the Python interpreter.

Please report this to the Python maintainer, along with the traceback,
the Python version, and the hardware/OS platform and version.'SystemErroru'Request to exit from the interpreter.'codeSystemExitu'Improper mixture of spaces and tabs.'TabErroru'Timeout expired.'TimeoutErroru'Local name referenced but not bound to a value.'UnboundLocalErroru'Unicode decoding error.'endreasonstartu'Unicode related error.'u'Inappropriate argument value (of correct type).'ValueErrorUnicodeErrorUnicodeDecodeErroru'Unicode encoding error.'UnicodeEncodeErroru'Unicode translation error.'UnicodeTranslateErroru'Base class for warnings about Unicode related problems, mostly
related to conversion problems.'UnicodeWarningu'Base class for warnings generated by user code.'UserWarningWindowsErroru'Second argument to a division or modulo operation was zero.'ZeroDivisionErroru'incomplete input.'_IncompleteInputError__build_class____debug__u'Built-in functions, types, exceptions, and other objects.

This module provides direct access to all 'built-in'
identifiers of Python; for example, builtins.len is
the full name for the built-in function len().

This module is not normally accessed explicitly by most
applications, but can be useful in modules that provide
objects with the same name as a built-in value, but in
which the built-in of that name is also needed.'__import__absaiteranextanyasciibinbreakpoint__alloc__u'bytearray(iterable_of_ints) -> bytearray
bytearray(string, encoding[, errors]) -> bytearray
bytearray(bytes_or_buffer) -> mutable copy of bytes_or_buffer
bytearray(int) -> bytes array of size given by the parameter initialized with null bytes
bytearray() -> empty bytes array

Construct a mutable bytearray object from:
  - an iterable yielding integers in range(256)
  - a text string encoded using the specified encoding
  - a bytes or a buffer object
  - any object implementing the buffer API.
  - an integer'__release_buffer__bytearraycallablechrcompile__complex__u'Create a complex number from a string or numbers.

If a string is given, parse it as a complex number.
If a single number is given, convert it to a complex number.
If the 'real' or 'imag' arguments are given, create a complex number
with the specified real and imaginary components.'complexdelattrdirdivmodu'Return an enumerate object.

  iterable
    an object supporting iteration

The enumerate object yields pairs containing a count (from start, which
defaults to zero) and a value yielded by the iterable argument.

enumerate is useful for obtaining an indexed list:
    (0, seq[0]), (1, seq[1]), (2, seq[2]), ...'enumerateevalexecu'Return an iterator yielding those items of iterable for which function(item)
is true. If function is None, return the items that are true.'filtergetattrhasattrhashidinputisinstanceissubclassiterlenu'Make an iterator that computes the function using arguments from
each of the iterables.  Stops when the shortest iterable is exhausted.'mapu'Create a new memoryview object which references the given object.'_from_flagsu'A bool indicating whether the memory is C contiguous.'u'memoryview.c_contiguous'c_contiguouscastu'A bool indicating whether the memory is contiguous.'u'memoryview.contiguous'contiguousu'A bool indicating whether the memory is Fortran contiguous.'u'memoryview.f_contiguous'f_contiguousu'A string containing the format (in struct module style)
 for each element in the view.'u'memoryview.format'u'The size in bytes of each element of the memoryview.'u'memoryview.itemsize'itemsizeu'The amount of space in bytes that the array would use in
 a contiguous representation.'u'memoryview.nbytes'nbytesu'An integer indicating how many dimensions of a multi-dimensional
 array the memory represents.'u'memoryview.ndim'ndimu'The underlying object of the memoryview.'u'memoryview.obj'u'A bool indicating whether the memory is read only.'u'memoryview.readonly'readonlyreleaseu'A tuple of ndim integers giving the shape of the memory
 as an N-dimensional array.'u'memoryview.shape'shapeu'A tuple of ndim integers giving the size in bytes to access
 each element for each dimension of the array.'u'memoryview.strides'stridesu'A tuple of integers used internally for PIL-style arrays.'u'memoryview.suboffsets'suboffsetstobytestolisttoreadonlymemoryviewnextoctopenordpowprintu'range(stop) -> range object
range(start, stop[, step]) -> range object

Return an object that produces a sequence of integers from start (inclusive)
to stop (exclusive) by step.  range(i, j) produces i, i+1, i+2, ..., j-1.
start defaults to 0, and stop is omitted!  range(4) produces 0, 1, 2, 3.
These are exactly the valid indices for a list of 4 elements.
When step is given, it specifies the increment (or decrement).'stepstoprangerepru'Return a reverse iterator over the values of the given sequence.'__length_hint__reversedroundsetattru'slice(stop)
slice(start, stop[, step])

Create a slice object.  This is used for extended slicing (e.g. a[0:10:2]).'indicesslicesortedstrsumvarsu'The zip object yields n-length tuples, where n is the number of iterables
passed as positional arguments to zip().  The i-th element in every tuple
comes from the i-th iterable argument to zip().  This continues until the
shortest argument is exhausted.

If strict is true and one of the arguments is exhausted before the others,
raise a ValueError.

   >>> list(zip('abcdefg', range(3), range(4)))
   [('a', 0, 0), ('b', 1, 1), ('c', 2, 2)]'zipbuiltinsbuiltin_module_semmle_unknown_type_semmle_undefined_valueD:/Documents/PythonScripts/trading_system/.github/workflows/codeql.ymlD:/Documents/PythonScripts/trading_system/.github/workflowsD:/Documents/PythonScripts/trading_system/.githubtag:yaml.org,2002:strCodeQL Analysis"CodeQL Analysis"ontag:yaml.org,2002:boolpushpull_requesttag:yaml.org,2002:seq[push, pull_request]jobsanalyzeruns-onubuntu-latestpermissionssecurity-eventstag:yaml.org,2002:mapsecurit ... : writestepsCheckoutusesactions/checkout@v4name: CheckoutInitialize CodeQLgithub/codeql-action/init@v3github/ ... init@v3withlanguagespythonlanguages: pythonname: I ...  CodeQLAutobuildgithub/codeql-action/autobuild@v3github/ ... uild@v3name: AutobuildAnalyzegithub/codeql-action/analyze@v3github/ ... lyze@v3name: Analyze- name: Checkoutruns-on ... -latestanalyze:name: " ... alysis"D:/Documents/PythonScripts/trading_system/trading_db/codeql-database.ymlD:/Documents/PythonScripts/trading_system/trading_dbsourceLocationPrefixD:\Documents\PythonScripts\trading_systemD:\Docu ... _systembaselineLinesOfCode10688tag:yaml.org,2002:intunicodeNewlinesfalsecolumnKindutf32primaryLanguageinProgressinstalledExtractorsactionsC:/codeql/codeql/actionsC:/code ... actions- C:/co ... actionscppC:/codeql/codeql/cpp- C:/co ... eql/cppcsharpC:/codeql/codeql/csharpC:/code ... /csharp- C:/co ... /csharpcsvC:/codeql/codeql/csv- C:/co ... eql/csvgoC:/codeql/codeql/go- C:/co ... deql/gohtmlC:/codeql/codeql/htmlC:/code ... ql/html- C:/co ... ql/htmljavaC:/codeql/codeql/javaC:/code ... ql/java- C:/co ... ql/javajavascriptC:/codeql/codeql/javascriptC:/code ... ascript- C:/co ... ascriptpropertiesC:/codeql/codeql/propertiesC:/code ... perties- C:/co ... pertiesC:/codeql/codeql/pythonC:/code ... /python- C:/co ... /pythonrubyC:/codeql/codeql/rubyC:/code ... ql/ruby- C:/co ... ql/rubyrustC:/codeql/codeql/rustC:/code ... ql/rust- C:/co ... ql/rustswiftC:/codeql/codeql/swiftC:/code ... l/swift- C:/co ... l/swiftxmlC:/codeql/codeql/xml- C:/co ... eql/xmlyamlC:/codeql/codeql/yamlC:/code ... ql/yaml- C:/co ... ql/yamlactions:primary ...  pythoncreationMetadatasha050f420f1d9bce8fffa49a14ce4e9083b39ff62e050f420 ... 39ff62ecliVersion2.23.3creationTime2025-10-20T18:29:27.878192300Ztag:yaml.org,2002:timestamp2025-10 ... 192300Zsha: 05 ... 39ff62eoverlayBaseDatabaseoverlayDatabasefinalisedsourceL ... _system$
Инициализационный файл пакета вкладок
Экспорт всех классов вкладок для удобного импорта
"""price_tabPriceTabcapital_tabCapitalTabposition_tabPositionTabreturns_tabReturnsTabcorrelation_tabCorrelationTabtrades_tabTradesTabstats_tabStatsTabcompare_tabCompareTabrisk_tabRiskTabrisk_analysis_tabRiskAnalysisTab'__all__# ===== СЕКЦИЯ 15: ПАКЕТ ВКЛАДОК ГРАФИЧЕСКОГО ИНТЕРФЕЙСА =====# � НОВАЯ ВКЛАДКА# � ДОБАВЛЯЕМ НОВУЮ ВКЛАДКУu'
Инициализационный файл пакета вкладок
Экспорт всех классов вкладок для удобного импорта
'b'PriceTab'u'PriceTab'b'CapitalTab'u'CapitalTab'b'PositionTab'u'PositionTab'b'ReturnsTab'u'ReturnsTab'b'CorrelationTab'u'CorrelationTab'b'TradesTab'u'TradesTab'b'StatsTab'u'StatsTab'b'CompareTab'u'CompareTab'b'RiskTab'u'RiskTab'b'RiskAnalysisTab'u'RiskAnalysisTab'u'trading_system.gui.tabs.__init__'u'trading_system.gui.tabs'u'trading_system.gui'u'trading_system'u'gui.tabs.__init__'u'gui.tabs'u'gui'u'tabs.__init__'u'tabs'u'__init__'data_loaderload_price_data_from_fileanalyticsanalyze_performancecalculate_trade_metricssupertrendcalculate_supertrendget_supertrend_signals# ===== СЕКЦИЯ 18: ПАКЕТ ВСПОМОГАТЕЛЬНЫХ УТИЛИТ =====b'load_price_data_from_file'u'load_price_data_from_file'b'analyze_performance'u'analyze_performance'b'calculate_trade_metrics'u'calculate_trade_metrics'b'calculate_supertrend'u'calculate_supertrend'b'get_supertrend_signals'u'get_supertrend_signals'u'PythonScripts.trading_system.utils.__init__'u'PythonScripts.trading_system.utils'u'PythonScripts.trading_system'u'PythonScripts'u'trading_system.utils.__init__'u'trading_system.utils'u'utils.__init__'u'utils'
Инициализационный файл пакета core
Экспорт основных классов системы
trading_systemSeikotaTradingSystemvisualizerResultsVisualizer# ===== СЕКЦИЯ 17: ПАКЕТ ОСНОВНЫХ МОДУЛЕЙ СИСТЕМЫ =====u'
Инициализационный файл пакета core
Экспорт основных классов системы
'b'SeikotaTradingSystem'u'SeikotaTradingSystem'b'ResultsVisualizer'u'ResultsVisualizer'u'PythonScripts.trading_system.core.__init__'u'PythonScripts.trading_system.core'u'trading_system.core.__init__'u'trading_system.core'u'core.__init__'u'core'
Инициализационный файл пакета gui
Экспорт основных классов GUI
main_windowTradingSystemGUIcomponentsStyledButtonLabeledEntryFileBrowserResultsComboBoxPlotFrameStatsTextFrame# ===== СЕКЦИЯ 19: ПАКЕТ ГРАФИЧЕСКОГО ИНТЕРФЕЙСА =====u'
Инициализационный файл пакета gui
Экспорт основных классов GUI
'b'TradingSystemGUI'u'TradingSystemGUI'b'StyledButton'u'StyledButton'b'LabeledEntry'u'LabeledEntry'b'FileBrowser'u'FileBrowser'b'ResultsComboBox'u'ResultsComboBox'b'PlotFrame'u'PlotFrame'b'StatsTextFrame'u'StatsTextFrame'u'PythonScripts.trading_system.gui.__init__'u'PythonScripts.trading_system.gui'u'trading_system.gui.__init__'u'gui.__init__'
Пакет для работы с API бирж
Модуль подключается опционально и не требует изменений в основном коде
tbank_apiTBankAPImoex_apiMoexAPIapi_managerApiManagertbank_guiTBankApiTab# tbank_api/__init__.pyu'
Пакет для работы с API бирж
Модуль подключается опционально и не требует изменений в основном коде
'b'TBankAPI'u'TBankAPI'b'MoexAPI'u'MoexAPI'b'ApiManager'u'ApiManager'b'TBankApiTab'u'TBankApiTab'u'PythonScripts.trading_system.tbank_api.__init__'u'PythonScripts.trading_system.tbank_api'u'trading_system.tbank_api.__init__'u'trading_system.tbank_api'u'tbank_api.__init__'u'tbank_api'osadd_missing_methodsДобавление отсутствующих методов в TBankAPICompletetbank_api/tbank_api_fixed_complete.py"filepathexists❌ Файл f" не найденrutf-8fcontent
    def _get_figi_by_ticker(self, ticker: str) -> str:
        """Получение FIGI по тикеру (упрощенная версия)"""
        instruments = self._get_instruments_safe()
        if instruments.empty:
            return f"FIGI_{ticker}"  # Заглушка
        
        match = instruments[instruments['symbol'] == ticker]
        if not match.empty:
            return match.iloc[0]['figi']
        
        return f"FIGI_{ticker}"  # Заглушка

    def get_historical_data(self, symbol: str, start_date: str, end_date: str = None, timeframe: str = '1d') -> pd.DataFrame:
        """
        Получение исторических данных (упрощенная версия - возвращает пустой DataFrame)
        """
        logger.warning(f"⚠️  Tinkoff API временно отключен. Не могу загрузить данные для {symbol}")
        return pd.DataFrame()

    def get_current_quotes(self, symbols: List[str]) -> pd.DataFrame:
        """
        Получение текущих котировок (упрощенная версия)
        """
        logger.warning(f"⚠️  Tinkoff API временно отключен. Не могу загрузить котировки для {symbols}")
        return pd.DataFrame()

    def clear_cache(self):
        """Очистка кэшей"""
        self._figi_cache.clear()
        self._instruments_cache = None
        self._last_instruments_update = None
        logger.info("✅ Кэши Tinkoff API очищены")

    def get_account_info(self) -> Dict:
        """
        Получение информации о счетах
        """
        logger.warning("⚠️  Tinkoff API временно отключен")
        return {}
'''missing_methodsdef is_available(insert_point\n\nmethod_endnew_contentw✅ Отсутствующие методы добавлены в TBankAPIComplete!❌ Не найдено место для вставки методовe❌ Ошибка добавления методов: __main__# Методы которые нужно добавить# Находим место для вставки (после метода is_available)# Вставляем после is_available# Ищем конец этого метода# Вставляем новые методыu'Добавление отсутствующих методов в TBankAPIComplete'b'tbank_api/tbank_api_fixed_complete.py'u'tbank_api/tbank_api_fixed_complete.py'u'❌ Файл 'u' не найден'b'r'u'r'b'utf-8'u'utf-8'u'
    def _get_figi_by_ticker(self, ticker: str) -> str:
        """Получение FIGI по тикеру (упрощенная версия)"""
        instruments = self._get_instruments_safe()
        if instruments.empty:
            return f"FIGI_{ticker}"  # Заглушка
        
        match = instruments[instruments['symbol'] == ticker]
        if not match.empty:
            return match.iloc[0]['figi']
        
        return f"FIGI_{ticker}"  # Заглушка

    def get_historical_data(self, symbol: str, start_date: str, end_date: str = None, timeframe: str = '1d') -> pd.DataFrame:
        """
        Получение исторических данных (упрощенная версия - возвращает пустой DataFrame)
        """
        logger.warning(f"⚠️  Tinkoff API временно отключен. Не могу загрузить данные для {symbol}")
        return pd.DataFrame()

    def get_current_quotes(self, symbols: List[str]) -> pd.DataFrame:
        """
        Получение текущих котировок (упрощенная версия)
        """
        logger.warning(f"⚠️  Tinkoff API временно отключен. Не могу загрузить котировки для {symbols}")
        return pd.DataFrame()

    def clear_cache(self):
        """Очистка кэшей"""
        self._figi_cache.clear()
        self._instruments_cache = None
        self._last_instruments_update = None
        logger.info("✅ Кэши Tinkoff API очищены")

    def get_account_info(self) -> Dict:
        """
        Получение информации о счетах
        """
        logger.warning("⚠️  Tinkoff API временно отключен")
        return {}
'b'def is_available('u'def is_available('b'\n\n'u'\n\n'b'w'u'w'u'✅ Отсутствующие методы добавлены в TBankAPIComplete!'u'❌ Не найдено место для вставки методов'u'❌ Ошибка добавления методов: 'b''b'__main__'u'__main__'u'Documents.PythonScripts.trading_system.add_missing_methods'u'Documents.PythonScripts.trading_system'u'Documents.PythonScripts'u'Documents'u'PythonScripts.trading_system.add_missing_methods'u'trading_system.add_missing_methods'u'add_missing_methods'
Расширенная аналитика использования кэша и оптимизаций
timedatetimetimedeltacollectionsdequethreadingtypingDictAnyListloggingpsutilPSUTIL_AVAILABLEpsutil не установлен. Мониторинг памяти будет отключен.getLoggerloggerAdvancedCacheAnalyticsПродвинутая аналитика в реальном времениselfcache_manager100maxlenhit_ratioresponse_timememory_usagecache_sizemetrics_historyperformance_alertsnowstart_time_start_metrics_collectionЗапуск сбора метрик в фоновом режимеcollect_metrics_collect_metrics_snapshotsleep60errorОшибка сбора метрик: 300ThreadtargetdaemonthreadСбор снимка метрикget_detailed_analyticsstatstimestampcache_hit_ratio0%%avg_response_time_msProcessprocessmemory_inforssНе удалось получить использование памяти: memory_usage_mbtotal_cache_size_mb_check_performance_alertsПроверка алертов производительности20_add_alertwarningНизкий процент попаданий в кэшHit ratio: cache_performance500Высокое использование памятиИспользуется:  MBmemorylevelalert_typeДобавление алертаacknowledgedalert� :  - get_active_alertsПолучить активные алертыlistcomp.0acknowledge_alertalert_indexПодтвердить алертinfo✅ Алерт # подтвержденget_metrics_historymetric_typelast_nПолучить историю метрикhistoryget_performance_trendsАнализ трендов производительностиno_datastatusМетрики еще не собраныstablehit_ratio_trendresponse_time_trendactive_alertsuptime_hourspointhit_ratiosresponse_timeshit_trend0.1updownresponse_trend10avg_hit_ratiototal_seconds3600data_pointsmemory_monitoringclear_old_alerts24hours_oldОчистка старых алертовhourscutoff_time# tbank_api/advanced_analytics.py# ✅ ДОБАВЬТЕ ИМПОРТ PSUTIL С ОБРАБОТКОЙ ОШИБОК# Запускаем сбор метрик в фоне# Каждую минуту# Сохраняем исторические данные# ✅ БЕЗОПАСНОЕ ПОЛУЧЕНИЕ ИСПОЛЬЗОВАНИЯ ПАМЯТИ# MB# Используем значение из аналитики как запасной вариант# Проверяем алерты# Низкий процент попаданий# Проверяем использование памяти только если psutil доступен# Высокое использование памяти# Простой анализ трендов# +10%# -10%# -10ms# Улучшение# +10ms# Ухудшение# ✅ Информация о доступности мониторинга памятиu'
Расширенная аналитика использования кэша и оптимизаций
'u'psutil не установлен. Мониторинг памяти будет отключен.'u'Продвинутая аналитика в реальном времени'b'hit_ratio'u'hit_ratio'b'response_time'u'response_time'b'memory_usage'u'memory_usage'b'cache_size'u'cache_size'u'Запуск сбора метрик в фоновом режиме'u'Ошибка сбора метрик: 'u'Сбор снимка метрик'b'timestamp'u'timestamp'b'cache_hit_ratio'u'cache_hit_ratio'b'0%'u'0%'b'%'u'%'b'value'u'value'b'avg_response_time_ms'u'avg_response_time_ms'u'Не удалось получить использование памяти: 'b'memory_usage_mb'u'memory_usage_mb'b'total_cache_size_mb'u'total_cache_size_mb'u'Проверка алертов производительности'b'warning'u'warning'u'Низкий процент попаданий в кэш'b'Hit ratio: 'u'Hit ratio: 'b'cache_performance'u'cache_performance'b'error'u'error'u'Высокое использование памяти'u'Используется: 'b' MB'u' MB'b'memory'u'memory'u'Добавление алерта'b'level'u'level'b'title'u'title'b'message'u'message'b'type'u'type'b'acknowledged'u'acknowledged'u'� 'b': 'u': 'b' - 'u' - 'u'Получить активные алерты'u'Подтвердить алерт'u'✅ Алерт #'u' подтвержден'u'Получить историю метрик'u'Анализ трендов производительности'b'no_data'u'no_data'b'status'u'status'u'Метрики еще не собраны'b'stable'u'stable'b'hit_ratio_trend'u'hit_ratio_trend'b'response_time_trend'u'response_time_trend'b'active_alerts'u'active_alerts'b'uptime_hours'u'uptime_hours'b'up'u'up'b'down'u'down'b'avg_hit_ratio'u'avg_hit_ratio'b'data_points'u'data_points'b'memory_monitoring'u'memory_monitoring'u'Очистка старых алертов'u'PythonScripts.trading_system.tbank_api.advanced_analytics'u'trading_system.tbank_api.advanced_analytics'u'tbank_api.advanced_analytics'u'advanced_analytics'
Продвинутая система кэширования - НАСЛЕДУЕТ от базового кэша
pandaspdpathlibPathOptionalTuplecache_configCacheConfigtbank_cacheTBankCacheAdvancedTBankCacheПродвинутый кэш с оптимизациями, наследует все методы базового кэшаconfig_access_stats_hits_missesget_historical_data_smart1dDataFramesymbolstart_dateend_datetimeframe
        Умная загрузка данных: возвращает данные и флаг "из кэша"
        _get_figi_cachedfigistrptime%Y-%m-%dstart_dtend_dtload_candlescached_dataemptyОшибка в умной загрузке: Упрощенный метод получения FIGIFIGI_smart_updatenew_data
        Умное обновление: объединяет данные
        save_candlesОшибка в умном обновлении: update_candles_incrementallynew_candles_dfАлиас для совместимостиget_cache_statsРасширенная статистикаbase_statssmart_hitssmart_missessmart_hit_ratio# tbank_api/advanced_cache.py# Наследуем от рабочего кэша# ✅ НАСЛЕДОВАНИЕ вместо делегирования# Вызываем конструктор родителя# Получаем FIGI через API (упрощенная версия)# Используем родительский метод# В реальной реализации здесь будет сложная логика# Пока возвращаем заглушку# Используем родительский метод для сохраненияu'
Продвинутая система кэширования - НАСЛЕДУЕТ от базового кэша
'u'Продвинутый кэш с оптимизациями, наследует все методы базового кэша'b'1d'u'1d'u'
        Умная загрузка данных: возвращает данные и флаг "из кэша"
        'b'%Y-%m-%d'u'%Y-%m-%d'u'Ошибка в умной загрузке: 'u'Упрощенный метод получения FIGI'b'FIGI_'u'FIGI_'u'
        Умное обновление: объединяет данные
        'u'Ошибка в умном обновлении: 'u'Алиас для совместимости'u'Расширенная статистика'b'smart_hits'u'smart_hits'b'smart_misses'u'smart_misses'b'smart_hit_ratio'u'smart_hit_ratio'u'PythonScripts.trading_system.tbank_api.advanced_cache'u'trading_system.tbank_api.advanced_cache'u'tbank_api.advanced_cache'u'advanced_cache'matplotlib.pyplotpltmatplotlib.datesmdatesUTCtinkoff.investClientCandleIntervalmplfinancempfConfigTINKOFF_TOKENTOKENplot_candlestick_basiccandles_dfБазовый свечной график с использованием matplotlibsubplots8figsizefigaxirowiterrowsopen_priceclose_pricehighhigh_pricelowlow_pricegreenredcolordarkgreendarkredline_colorplotblack0.5linewidthbody_bottombody_topbody_heightRectangledate2num0.00020.0004facecoloredgecolorrectadd_patchminutesxaxisset_major_formatterDateFormatterset_major_locatorDayLocatorintervalset_minor_locatorHourLocator6xticks45rotationset_titleСвечной график SBER (1 час)16fontsizeboldfontweightset_ylabelЦена, руб.12set_xlabelДатаgrid0.3alphalegendСвечи SBERtight_layoutshowplot_with_mplfinanceСвечной график с использованием mplfinanceset_indexdfvolumeOpenHighLowCloseVolumecolumnsDatetimeIndexДанные для mplfinance:  свечейheadmake_marketcolorsedgewickmcmake_mpf_stylemarketcolors--gridstyley_on_rightstylecandleSBER - Свечной график (1 час)Цена (руб)ylabeldatetime_formatxrotationshow_nontradingГрафик mplfinance построен успешно!Ошибка при построении графика mplfinance: plot_candlestick_simpleПростой и надежный свечной графикttimesilocopen_phigh_plow_pclose_pxaxis_dateСвечной график SBER - 1 часmainclientdaysfrom_timeto_timemarket_dataget_candlesBBG004730N88from_toCANDLE_INTERVAL_HOURcandlesПолучено свечей: -80candles_dataunitsnano1000000000.01e9Время: strftime%Y-%m-%d %H:%M:%S | O: " | ""O: " | C:  | H: "H: " | L:  | Объем: "Объем: "
Доступно свечей для построения: Строим графики...Выберите тип графика (1 - базовый, 2 - mplfinance, 3 - простой): choiceНеверный выбор, строим базовый графикНет данных для построения графикаОшибка: # Проходим по всем свечам# Определяем цвет свечи# Рисуем тень (high to low)# Рисуем тело свечи# Добавляем прямоугольник для тела свечи# Для дожи (open == close) рисуем линию# Настройки графика# Подготавливаем данные для mplfinance# Убедимся, что индекс в правильном формате# Настройка стиля# Построение графика# Преобразуем время в числовой формат для matplotlib# Рисуем свечи# Цвет свечи# Тень# Тело свечи# Настройки оси X# Используем современный подход с UTC# SBER# Собираем данные в DataFrame# Преобразуем Quotation в float# Спросим пользователя какой график построитьu'Базовый свечной график с использованием matplotlib'b'time'b'open'u'open'b'close'u'close'b'high'u'high'b'low'u'low'b'green'u'green'b'red'u'red'b'darkgreen'u'darkgreen'b'darkred'u'darkred'b'black'u'black'u'Свечной график SBER (1 час)'b'bold'u'bold'u'Цена, руб.'u'Дата'u'Свечи SBER'u'Свечной график с использованием mplfinance'b'volume'u'volume'b'Open'u'Open'b'High'u'High'b'Low'u'Low'b'Close'u'Close'b'Volume'u'Volume'u'Данные для mplfinance: 'u' свечей'b'--'u'--'b'candle'u'candle'u'SBER - Свечной график (1 час)'u'Цена (руб)'u'График mplfinance построен успешно!'u'Ошибка при построении графика mplfinance: 'u'Простой и надежный свечной график'u'Свечной график SBER - 1 час'b'BBG004730N88'u'BBG004730N88'u'Получено свечей: 'b'-'u'-'u'Время: 'b'%Y-%m-%d %H:%M:%S'u'%Y-%m-%d %H:%M:%S'b' | O: 'u' | O: 'b' | C: 'u' | C: 'b' | H: 'u' | H: 'b' | L: 'u' | L: 'u' | Объем: 'u'
Доступно свечей для построения: 'u'Строим графики...'u'Выберите тип графика (1 - базовый, 2 - mplfinance, 3 - простой): 'b'1'u'1'u'Неверный выбор, строим базовый график'u'Нет данных для построения графика'u'Ошибка: 'u'PythonScripts.trading_system.tbank_api.all_candles3'u'trading_system.tbank_api.all_candles3'u'tbank_api.all_candles3'u'all_candles3'
Модуль аналитических функций для расчета метрик производительности
Статистический анализ результатов торговли
numpynpresultsinitial_capitalКомплексный анализ результатов торговли с расчетом ключевых метрикcapitaltotal_return_pctcummaxcumulative_maxdrawdownmax_drawdown_pctmeanavg_drawdownpct_changedropnareturnsstdsqrt252sharpevolatilityrisk_level1.0avg_riskrisk_adjustmentsanalyze_risk_managementrisk_metricstotal_returnmax_drawdownsharpe_ratiofinal_capitalkelly_favg_kelly_fposition_sizeavg_position_sizeperformance
    Анализ эффективности системы стоп-лоссов и тейк-профитов
    risk_system_enabledtotal_trades_with_riskstop_loss_tradestake_profit_tradestrailing_stop_tradestime_stop_tradesavg_stop_loss_pnlavg_take_profit_pnlstop_loss_efficiencyrisk_reward_ratiowin_rate_with_stopsexit_reasonexit_tradesstop_losstake_profittrailing_stoptime_stoprisk_exit_reasonsreason_tradesf'_tradespnl_percentavg_pnlpnl_absolutecapital_beforepnl_pctavg__pnlavg_stop_lossavg_profitavg_losswinning_risk_tradespnl_datapnl_by_reasonanalyze_trades_with_risk_managementtrade_history
    Детальный анализ сделок с учетом системы управления рисками
    
    Parameters:
    -----------
    trade_history : pd.DataFrame
        История сделок с колонками exit_reason, stop_loss, take_profit
        
    Returns:
    --------
    dict
        Детальная статистика по сделкам с рисками
    total_tradestrades_with_risk_dataexit_reason_statsavg_risk_metricsrisk_efficiencyanalysisvalue_countsexit_reasonsto_dictwin_ratedurationavg_durationreason_statsentry_pricevalid_tradesrisk_rewards_tradeposition_typeriskrewardavg_risk_reward_ratiomedianmedian_risk_reward_ratiomin_risk_reward_ratiomax_risk_reward_ratioРасчет детальных метрик по сделкамwinning_tradeslosing_tradestotal_pnlavg_pnl_per_tradeavg_winlargest_winlargest_lossavg_trade_durationmetricsgross_profitgross_lossprofit_factorrisk_analysisgenerate_risk_reporttrade_metrics
    Генерация текстового отчета по системе управления рисками
    
    Parameters:
    -----------
    performance : dict
        Метрики производительности
    trade_metrics : dict
        Метрики сделок
        
    Returns:
    --------
    str
        Текстовый отчет
    report=ОТЧЕТ ПО СИСТЕМЕ УПРАВЛЕНИЯ РИСКАМИ✅ СИСТЕМА РИСК-МЕНЕДЖМЕНТА АКТИВНА   Всего сделок с рисками: ❌ СИСТЕМА РИСК-МЕНЕДЖМЕНТА НЕ АКТИВНА
� СТАТИСТИКА ВЫХОДОВ:    сделок, средний PnL: � ЭФФЕКТИВНОСТЬ РИСК-МЕНЕДЖМЕНТА:   Win Rate с рисками:    Risk-Reward Ratio:    Эффективность стоп-лоссов: � PnL ПО ПРИЧИНАМ ВЫХОДА:% (n=)analyze_risk_efficiencyprice_data
    Глубокий анализ эффективности стоп-лоссов и тейк-профитов
    stop_loss_analysistake_profit_analysisexit_timing_analysisrisk_efficiency_scoreisinrisk_tradesavg_pnl_percentavg_pnl_absolutemax_losspremature_stopsoptimal_stopsmax_profitmissed_profitsoptimal_takesavg_hold_time_daysmedian_hold_time_daysquickest_exitlongest_holdcalculate_risk_efficiency_scoreРасчет общей оценки эффективности риск-менеджмента (0-100)scorestop_analysisavg_stop_pnltake_analysisavg_take_pnlgenerate_risk_efficiency_reportГенерация текстового отчета по эффективности риск-менеджмента� ОТЧЕТ ЭФФЕКТИВНОСТИ РИСК-МЕНЕДЖМЕНТА❌ Нет данных о сделках с риск-менеджментом� Общее количество сделок с рисками: � Оценка эффективности: /100� АНАЛИЗ СТОП-ЛОССОВ:   • Количество:    • Средний PnL:    • Макс. убыток: ✅ АНАЛИЗ ТЕЙК-ПРОФИТОВ:   • Макс. прибыль: timing_analysis⏱️  АНАЛИЗ ВРЕМЕНИ УДЕРЖАНИЯ:   • Среднее время:  дней   • Медианное время:    • Самое короткое:    • Самое долгое: � РЕКОМЕНДАЦИИ:   � Отличная эффективность! Продолжайте в том же духе.   � Хорошие результаты. Возможно, стоит настроить параметры рисков.40   ⚠️ Средняя эффективность. Рекомендуется пересмотреть стратегию рисков.   � Низкая эффективность. Необходима оптимизация параметров рисков.analyze_performance_optimizedОптимизированный анализ производительностиanalyze_risk_management_optimizedОптимизированный анализ риск-менеджмента# ===== СЕКЦИЯ 5: АНАЛИТИКА И РАСЧЕТЫ ПРОИЗВОДИТЕЛЬНОСТИ =====# Основные метрики доходности# Расчет просадки# Расчет волатильности и Шарпа# Дополнительные метрики управления рисками# � АНАЛИЗ ЭФФЕКТИВНОСТИ РИСК-МЕНЕДЖМЕНТА# Сбор всех метрик в словарь# � МЕТРИКИ РИСК-МЕНЕДЖМЕНТА# � НОВАЯ ФУНКЦИЯ: Анализ эффективности системы управления рисками# Проверяем наличие данных о рисках# Фильтруем сделки с указанной причиной выхода# Анализ по типам выходов# Средний PnL для этого типа выхода (используем абсолютный PnL если процентного нет)# Рассчитываем процентный PnL на лету# Эффективность стоп-лоссов# Процент стоп-лоссов от общего числа сделок# Средний убыток по стоп-лоссам# Risk-Reward Ratio# Win Rate с использованием стоп-лоссов# Анализ распределения PnL по причинам выхода# � НОВАЯ ФУНКЦИЯ: Детальный анализ сделок с рисками# Статистика по причинам выхода# Анализ эффективности по типам выходов# Анализ расстояний стоп-лоссов и тейк-профитов# Расчет риск-риворд соотношений# LONG# SHORT# Profit Factor# � ДОБАВЛЯЕМ АНАЛИЗ РИСК-МЕНЕДЖМЕНТА К ОСНОВНЫМ МЕТРИКАМ# � НОВАЯ ФУНКЦИЯ: Генерация отчета по рискам# Основная информация# Статистика по типам выходов# Эффективность# Анализ PnL по причинам# � НОВАЯ ФУНКЦИЯ: Детальный анализ эффективности риск-ордеров# Фильтруем сделки с риск-менеджментом# Анализ стоп-лоссов# Будеи рассчитывать ниже# Анализ тейк-профитов# Будем рассчитывать ниже# Анализ времени удержания# � Расчет эффективности риск-менеджмента# � НОВАЯ ФУНКЦИЯ: Расчет общего скора эффективности# Базовая оценка# Бонус за использование риск-менеджмента# Хорошие стопы (потери < 5%)# Приемлемые стопы# Анализ тейк-профитов  # Хорошие тейки (прибыль > 5%)# Приемлемые тейки# � НОВАЯ ФУНКЦИЯ: Генерация отчета по эффективности рисков# Общая статистика# Анализ времени# Рекомендации# Оптимизированные функции аналитики:# Векторизованные расчеты# Оптимизированный расчет просадки# Быстрый расчет доходностей# Оптимизированный расчет Шарпа# Быстрый сбор метрик# Добавляем метрики рисков если доступны# Быстрый фильтр сделок с рисками# Быстрый подсчет по типам выходовu'
Модуль аналитических функций для расчета метрик производительности
Статистический анализ результатов торговли
'u'Комплексный анализ результатов торговли с расчетом ключевых метрик'b'capital'u'capital'b'risk_level'u'risk_level'b'total_return'u'total_return'b'max_drawdown'u'max_drawdown'b'sharpe_ratio'u'sharpe_ratio'b'final_capital'u'final_capital'b'volatility'u'volatility'b'avg_drawdown'u'avg_drawdown'b'kelly_f'u'kelly_f'b'avg_kelly_f'u'avg_kelly_f'b'position_size'u'position_size'b'avg_position_size'u'avg_position_size'b'avg_risk'u'avg_risk'b'risk_adjustments'u'risk_adjustments'b'initial_capital'u'initial_capital'u'
    Анализ эффективности системы стоп-лоссов и тейк-профитов
    'b'risk_system_enabled'u'risk_system_enabled'b'total_trades_with_risk'u'total_trades_with_risk'b'stop_loss_trades'u'stop_loss_trades'b'take_profit_trades'u'take_profit_trades'b'trailing_stop_trades'u'trailing_stop_trades'b'time_stop_trades'u'time_stop_trades'b'avg_stop_loss_pnl'u'avg_stop_loss_pnl'b'avg_take_profit_pnl'u'avg_take_profit_pnl'b'stop_loss_efficiency'u'stop_loss_efficiency'b'risk_reward_ratio'u'risk_reward_ratio'b'win_rate_with_stops'u'win_rate_with_stops'b'exit_reason'u'exit_reason'b'stop_loss'u'stop_loss'b'take_profit'u'take_profit'b'trailing_stop'u'trailing_stop'b'time_stop'u'time_stop'b'_trades'u'_trades'b'pnl_percent'u'pnl_percent'b'pnl_absolute'u'pnl_absolute'b'capital_before'u'capital_before'b'avg_'u'avg_'b'_pnl'u'_pnl'b'mean'u'mean'b'std'u'std'b'count'u'count'b'pnl_by_reason'u'pnl_by_reason'u'
    Детальный анализ сделок с учетом системы управления рисками
    
    Parameters:
    -----------
    trade_history : pd.DataFrame
        История сделок с колонками exit_reason, stop_loss, take_profit
        
    Returns:
    --------
    dict
        Детальная статистика по сделкам с рисками
    'b'total_trades'u'total_trades'b'trades_with_risk_data'u'trades_with_risk_data'b'exit_reason_stats'u'exit_reason_stats'b'avg_risk_metrics'u'avg_risk_metrics'b'risk_efficiency'u'risk_efficiency'b'avg_pnl'u'avg_pnl'b'win_rate'u'win_rate'b'duration'u'duration'b'avg_duration'u'avg_duration'b'entry_price'u'entry_price'b'position_type'u'position_type'b'avg_risk_reward_ratio'u'avg_risk_reward_ratio'b'median_risk_reward_ratio'u'median_risk_reward_ratio'b'min_risk_reward_ratio'u'min_risk_reward_ratio'b'max_risk_reward_ratio'u'max_risk_reward_ratio'u'Расчет детальных метрик по сделкам'b'winning_trades'u'winning_trades'b'losing_trades'u'losing_trades'b'total_pnl'u'total_pnl'b'avg_pnl_per_trade'u'avg_pnl_per_trade'b'avg_win'u'avg_win'b'avg_loss'u'avg_loss'b'largest_win'u'largest_win'b'largest_loss'u'largest_loss'b'avg_trade_duration'u'avg_trade_duration'b'inf'b'profit_factor'u'profit_factor'b'risk_analysis'u'risk_analysis'u'
    Генерация текстового отчета по системе управления рисками
    
    Parameters:
    -----------
    performance : dict
        Метрики производительности
    trade_metrics : dict
        Метрики сделок
        
    Returns:
    --------
    str
        Текстовый отчет
    'b'='u'='u'ОТЧЕТ ПО СИСТЕМЕ УПРАВЛЕНИЯ РИСКАМИ'u'✅ СИСТЕМА РИСК-МЕНЕДЖМЕНТА АКТИВНА'u'   Всего сделок с рисками: 'u'❌ СИСТЕМА РИСК-МЕНЕДЖМЕНТА НЕ АКТИВНА'b'
'u'
'u'� СТАТИСТИКА ВЫХОДОВ:'b'   'u'   'u' сделок, средний PnL: 'u'� ЭФФЕКТИВНОСТЬ РИСК-МЕНЕДЖМЕНТА:'u'   Win Rate с рисками: 'b'   Risk-Reward Ratio: 'u'   Risk-Reward Ratio: 'u'   Эффективность стоп-лоссов: 'u'� PnL ПО ПРИЧИНАМ ВЫХОДА:'b'% (n='u'% (n='b')'u')'u'
    Глубокий анализ эффективности стоп-лоссов и тейк-профитов
    'b'stop_loss_analysis'u'stop_loss_analysis'b'take_profit_analysis'u'take_profit_analysis'b'exit_timing_analysis'u'exit_timing_analysis'b'risk_efficiency_score'u'risk_efficiency_score'b'avg_pnl_percent'u'avg_pnl_percent'b'avg_pnl_absolute'u'avg_pnl_absolute'b'max_loss'u'max_loss'b'premature_stops'u'premature_stops'b'optimal_stops'u'optimal_stops'b'max_profit'u'max_profit'b'missed_profits'u'missed_profits'b'optimal_takes'u'optimal_takes'b'avg_hold_time_days'u'avg_hold_time_days'b'median_hold_time_days'u'median_hold_time_days'b'quickest_exit'u'quickest_exit'b'longest_hold'u'longest_hold'u'Расчет общей оценки эффективности риск-менеджмента (0-100)'u'Генерация текстового отчета по эффективности риск-менеджмента'u'� ОТЧЕТ ЭФФЕКТИВНОСТИ РИСК-МЕНЕДЖМЕНТА'u'❌ Нет данных о сделках с риск-менеджментом'u'� Общее количество сделок с рисками: 'u'� Оценка эффективности: 'b'/100'u'/100'u'� АНАЛИЗ СТОП-ЛОССОВ:'u'   • Количество: 'u'   • Средний PnL: 'u'   • Макс. убыток: 'u'✅ АНАЛИЗ ТЕЙК-ПРОФИТОВ:'u'   • Макс. прибыль: 'u'⏱️  АНАЛИЗ ВРЕМЕНИ УДЕРЖАНИЯ:'u'   • Среднее время: 'u' дней'u'   • Медианное время: 'u'   • Самое короткое: 'u'   • Самое долгое: 'u'� РЕКОМЕНДАЦИИ:'u'   � Отличная эффективность! Продолжайте в том же духе.'u'   � Хорошие результаты. Возможно, стоит настроить параметры рисков.'u'   ⚠️ Средняя эффективность. Рекомендуется пересмотреть стратегию рисков.'u'   � Низкая эффективность. Необходима оптимизация параметров рисков.'u'Оптимизированный анализ производительности'u'Оптимизированный анализ риск-менеджмента'u'PythonScripts.trading_system.utils.analytics'u'trading_system.utils.analytics'u'utils.analytics'u'analytics'
Менеджер для работы с API
ИСПРАВЛЕННАЯ ВЕРСИЯ
tbank_configTBankConfigИСПРАВЛЕННЫЙ менеджер для управления APImoexcurrent_api_data_cache_cache_max_size_initialize_tbank_apiИнициализация Tinkoff API с проверкой доступностиget_api_keyapi_keyt.test_connection✅ Tinkoff API инициализирован и доступен❌ Tinkoff API не доступен - проверьте ключ❌ Ошибка инициализации Tinkoff API: ℹ️ API ключ Tinkoff не установлен - используем MOEXset_apiapi_name
        Установка активного API с проверкой доступности
        
        Parameters:
        -----------
        api_name : str
            Название API ('moex' или 'tbank')
            
        Returns:
        --------
        bool
            True если API успешно установлен
        tbankis_availableTinkoff API не инициализирован. Установите API токен.Tinkoff API недоступен - проверьте подключениеMOEX API недоступен - проверьте подключение к интернетуНеизвестный API: ✅ Активный API установлен: load_price_data365Ddays_back
        Загрузка ценовых данных через активный API с кэшированием
        cache_key✅ Данные загружены из кэша для Загрузка данных через  API для 1hH14hH41wW1m5m15mtf_mapapi_timeframeget_historical_datadataНе удалось загрузить данные через _standardize_datastandardized_dataОшибка стандартизации данных для _add_to_cache✅ Загружено  записей через ❌ Ошибка загрузки данных для 
        Стандартизация данных под формат системы
        resultrequired_columnscolОтсутствует обязательная колонка '' в данныхdatecolumn_mappingold_namenew_nameto_datetimeinplacedate_rangeperiodsfreqaxisis_monotonic_increasingsort_indexduplicatedfirstkeepcritical_columnsisnaОбнаружены NaN в колонке  - заполняемfillnaffillbfill❌ Ошибка стандартизации данных: key
        Добавление данных в кэш с ограничением размера
        oldest_keyОчищен кэш для ключа: get_available_symbolssharesmarket
        Получение списка доступных инструментов
        bondsetfscurrenciesfuturesmarket_maptbank_marketget_instruments_list❌ Ошибка получения списка инструментов: get_current_quotessymbols
        Получение текущих котировок
        ❌ Ошибка получения котировок: 
        Проверка подключения к API
        api_to_test❌ Ошибка проверки подключения к is_tbank_available
        Проверка доступности Tinkoff API
        get_api_status
        Получение статуса всех API
        currentclear_cache
        Очистка кэша данных
        ✅ Кэш API менеджера очищенreload_tbank_api
        Перезагрузка Tinkoff API (например, после смены ключа)
        Tinkoff API недоступен после перезагрузки - переключаем на MOEX# tbank_api/api_manager.py# По умолчанию MOEX# Кэш для стандартизированных данных# Инициализируем Tinkoff API если есть ключ# Убедимся, что ключ имеет правильный формат# Тестируем подключение# Дополнительная проверка подключения# MOEX все равно устанавливаем как основной, так как может работать офлайн# Создаем ключ кэша# Проверяем кэш# Расчет дат# Конвертация таймфреймов для Tinkoff# Используем таймфреймы как есть для MOEX# Стандартизация данных# Сохраняем в кэш# Проверка обязательных колонок# Стандартизация имен колонок (если нужно)# Убедимся, что у нас есть индекс datetime# Создаем индекс на основе номера строки# Заполнение отсутствующих колонок# Добавление информации об инструменте# Сортировка по дате# Удаление дубликатов по индексу# Проверка на наличие NaN в критических колонках# Очистка старых записей если кэш переполнен# Для Tinkoff конвертируем тип рынка# Если текущий API был Tinkoff, проверяем доступностьu'
Менеджер для работы с API
ИСПРАВЛЕННАЯ ВЕРСИЯ
'u'ИСПРАВЛЕННЫЙ менеджер для управления API'b'moex'u'moex'u'Инициализация Tinkoff API с проверкой доступности'b't.'u't.'u'✅ Tinkoff API инициализирован и доступен'u'❌ Tinkoff API не доступен - проверьте ключ'u'❌ Ошибка инициализации Tinkoff API: 'u'ℹ️ API ключ Tinkoff не установлен - используем MOEX'u'
        Установка активного API с проверкой доступности
        
        Parameters:
        -----------
        api_name : str
            Название API ('moex' или 'tbank')
            
        Returns:
        --------
        bool
            True если API успешно установлен
        'b'tbank'u'tbank'u'Tinkoff API не инициализирован. Установите API токен.'u'Tinkoff API недоступен - проверьте подключение'u'MOEX API недоступен - проверьте подключение к интернету'u'Неизвестный API: 'u'✅ Активный API установлен: 'b'D'u'D'u'
        Загрузка ценовых данных через активный API с кэшированием
        'b'_'u'_'u'✅ Данные загружены из кэша для 'u'Загрузка данных через 'u' API для 'b'1h'u'1h'b'H1'u'H1'b'4h'u'4h'b'H4'u'H4'b'1w'u'1w'b'W'u'W'b'1m'u'1m'b'5m'u'5m'b'15m'u'15m'u'Не удалось загрузить данные через 'u'Ошибка стандартизации данных для 'u'✅ Загружено 'u' записей через 'u'❌ Ошибка загрузки данных для 'u'
        Стандартизация данных под формат системы
        'u'Отсутствует обязательная колонка ''u'' в данных'b'date'u'date'b'datetime'u'datetime'b'symbol'u'symbol'b'first'u'first'u'Обнаружены NaN в колонке 'u' - заполняем'b'ffill'u'ffill'b'bfill'u'bfill'u'❌ Ошибка стандартизации данных: 'u'
        Добавление данных в кэш с ограничением размера
        'u'Очищен кэш для ключа: 'b'shares'u'shares'u'
        Получение списка доступных инструментов
        'b'bonds'u'bonds'b'etfs'u'etfs'b'currencies'u'currencies'b'futures'u'futures'b'all'u'❌ Ошибка получения списка инструментов: 'u'
        Получение текущих котировок
        'u'❌ Ошибка получения котировок: 'u'
        Проверка подключения к API
        'u'❌ Ошибка проверки подключения к 'u'
        Проверка доступности Tinkoff API
        'u'
        Получение статуса всех API
        'b'current'u'current'u'
        Очистка кэша данных
        'u'✅ Кэш API менеджера очищен'u'
        Перезагрузка Tinkoff API (например, после смены ключа)
        'u'Tinkoff API недоступен после перезагрузки - переключаем на MOEX'u'PythonScripts.trading_system.tbank_api.api_manager'u'trading_system.tbank_api.api_manager'u'tbank_api.api_manager'u'api_manager'
Автоматическая оптимизация параметров кэширования
jsonAutoOptimizerАвтоматическая оптимизация параметров системыconfig_pathtbank_api/optimization_config.jsonoptimization_history_load_configlast_optimizationЗагрузка конфигурации оптимизацииoptimization_enabledauto_cleanup_enabled1000cleanup_threshold_mbttl_optimizationperformance_monitoringdailyoptimization_schedulemin_hit_ratio_for_cleanup2000max_cache_size_mbdefault_configloadloaded_configОшибка загрузки конфигурации: save_configСохранение конфигурацииdumpindentensure_ascii✅ Конфигурация оптимизации сохраненаОшибка сохранения конфигурации: optimize_cache_parametersАвтоматическая оптимизация параметров кэшаoptimization_actions_optimize_based_on_hit_ratiottl_action_perform_auto_cleanupcleanup_action_log_optimizationОшибка оптимизации параметров: Оптимизация на основе hit ratioactionincrease_ttlНизкий hit ratio: Увеличить TTL для инструментов и свечейrecommendationisoformatdecrease_ttlВысокий hit ratio: Можно уменьшить TTL для экономии памятиАвтоматическая очистка кэшаstats_beforeclear_all_cacheauto_cleanupРазмер кэша превысил size_before_mbОшибка автоочистки: Логирование выполненных оптимизацийcache_size_mbanalytics_snapshotoptimization_record⚙️ Автооптимизация: get_optimization_historyИстория оптимизацийupdate_confignew_configОбновление конфигурации✅ Конфигурация оптимизации обновлена# tbank_api/auto_optimizer.py# Загружаем конфигурацию# Проверяем когда была последняя оптимизация# Анализ эффективности# Оптимизация на основе hit ratio# Автоочистка при большом размере кэша# Логируем оптимизации# Получаем статистику перед очисткой# Выполняем очистку# Логируем действие# Сохраняем только последние 50 записей# Логируем в консольu'
Автоматическая оптимизация параметров кэширования
'u'Автоматическая оптимизация параметров системы'b'tbank_api/optimization_config.json'u'tbank_api/optimization_config.json'u'Загрузка конфигурации оптимизации'b'optimization_enabled'u'optimization_enabled'b'auto_cleanup_enabled'u'auto_cleanup_enabled'b'cleanup_threshold_mb'u'cleanup_threshold_mb'b'ttl_optimization'u'ttl_optimization'b'performance_monitoring'u'performance_monitoring'b'daily'u'daily'b'optimization_schedule'u'optimization_schedule'b'min_hit_ratio_for_cleanup'u'min_hit_ratio_for_cleanup'b'max_cache_size_mb'u'max_cache_size_mb'u'Ошибка загрузки конфигурации: 'u'Сохранение конфигурации'u'✅ Конфигурация оптимизации сохранена'u'Ошибка сохранения конфигурации: 'u'Автоматическая оптимизация параметров кэша'u'Ошибка оптимизации параметров: 'u'Оптимизация на основе hit ratio'b'increase_ttl'u'increase_ttl'u'Низкий hit ratio: 'b'reason'u'reason'u'Увеличить TTL для инструментов и свечей'b'recommendation'u'recommendation'b'decrease_ttl'u'decrease_ttl'u'Высокий hit ratio: 'u'Можно уменьшить TTL для экономии памяти'u'Автоматическая очистка кэша'b'auto_cleanup'u'auto_cleanup'u'Размер кэша превысил 'b'size_before_mb'u'size_before_mb'u'Ошибка автоочистки: 'u'Логирование выполненных оптимизаций'b'actions'u'actions'b'cache_size_mb'u'cache_size_mb'b'analytics_snapshot'u'analytics_snapshot'u'⚙️ Автооптимизация: 'u'История оптимизаций'u'Обновление конфигурации'u'✅ Конфигурация оптимизации обновлена'u'PythonScripts.trading_system.tbank_api.auto_optimizer'u'trading_system.tbank_api.auto_optimizer'u'tbank_api.auto_optimizer'u'auto_optimizer'
Аналитика использования кэша (защищенная версия)
✅ psutil доступен для мониторинга системы⚠️ psutil не доступен: CacheAnalyticsАналитика и мониторинг кэшаhitsmissestotal_requestssize_historyperformance_statsrecord_hitЗаписывает попадание в кэшrecord_missЗаписывает промах кэшаrecord_response_timeЗаписывает время ответаget_hit_ratioВозвращает процент попаданий в кэшtotal0.0get_memory_usageБезопасное получение использования памятиget_performance_reportГенерирует отчет о производительностиrtavg_response_timeuptime_secondsrequests_per_hourpsutil_available# tbank_api/cache_analytics.py# � ЗАЩИЩЕННЫЙ ИМПОРТ PSUTIL# Храним только последние 1000 записей# Использование памяти (защищенный вызов)u'
Аналитика использования кэша (защищенная версия)
'u'✅ psutil доступен для мониторинга системы'u'⚠️ psutil не доступен: 'u'Аналитика и мониторинг кэша'b'hits'u'hits'b'misses'u'misses'b'total_requests'u'total_requests'b'size_history'u'size_history'b'response_times'u'response_times'u'Записывает попадание в кэш'u'Записывает промах кэша'u'Записывает время ответа'u'Возвращает процент попаданий в кэш'u'Безопасное получение использования памяти'u'Генерирует отчет о производительности'b'requests_per_hour'u'requests_per_hour'b'psutil_available'u'psutil_available'u'PythonScripts.trading_system.tbank_api.cache_analytics'u'trading_system.tbank_api.cache_analytics'u'tbank_api.cache_analytics'u'cache_analytics'
Конфигурация системы кэширования данных Tinkoff API
dataclassesdataclassНастройки кэширования данныхtbank_api/data_cachebase_cache_dirinstrumentsinstruments_cache_dircandles_cache_dirmetadatametadata_dirinstruments_ttlcandles_ttlquotes_ttl.parquetfile_extensionsnappycompressionmax_candle_files_per_instrumentcache_enabled__post_init__Создание директорий при инициализацииmkdirparentsexist_okget_instrument_cache_pathinstrument_typeПуть к файлу кэша инструментов_instrumentsget_candle_cache_pathdate_strПуть к файлу кэша свечей/safe_figiget_metadata_pathПуть к файлу метаданных.json# tbank_api/cache_config.py# Основные пути# Время жизни кэша# 24 часа для инструментов# 15 минут для свечей# 2 минуты для котировок# Настройки файлов# Используем parquet для эффективности# Лимитыu'
Конфигурация системы кэширования данных Tinkoff API
'u'Настройки кэширования данных'b'tbank_api/data_cache'u'tbank_api/data_cache'b'instruments'u'instruments'b'candles'u'candles'b'metadata'u'metadata'b'.parquet'u'.parquet'b'snappy'u'snappy'u'Создание директорий при инициализации'u'Путь к файлу кэша инструментов'b'_instruments'u'_instruments'u'Путь к файлу кэша свечей'b'/'u'/'u'Путь к файлу метаданных'b'.json'u'.json'u'PythonScripts.trading_system.tbank_api.cache_config'u'trading_system.tbank_api.cache_config'u'tbank_api.cache_config'u'cache_config'
Безопасная оптимизация хранения данных
SafeCacheOptimizerБезопасный оптимизатор - только проверенные методыoptimize_dataframe_safe
        Безопасная оптимизация DataFrame - только то, что не может сломать данные
        select_dtypesfloat64includenotnaastypefloat32test_valuesallclose1e-061e-6rtol✅ Оптимизирован столбец  -> float32Не удалось оптимизировать ✅ Данные оптимизированы:  записей❌ Ошибка оптимизации данных: get_size_reduction_statsoriginal_dfoptimized_dfСтатистика сокращения размераsize_reduction_percentoriginal_size_mboptimized_size_mbdeeporiginal_sizeoptimized_sizereduction# tbank_api/cache_optimizer.py# 1. Удаление дубликатов по индексу (абсолютно безопасно)# 2. Сортировка по индексу (безопасно)# 3. Оптимизация числовых типов (осторожно)# Проверяем, что преобразование безопасно# Пробуем преобразовать во float32# Проверяем, что не потеряли точность# Возвращаем оригинал при ошибкеu'
Безопасная оптимизация хранения данных
'u'Безопасный оптимизатор - только проверенные методы'u'
        Безопасная оптимизация DataFrame - только то, что не может сломать данные
        'u'✅ Оптимизирован столбец 'b' -> float32'u' -> float32'u'Не удалось оптимизировать 'u'✅ Данные оптимизированы: 'u' записей'u'❌ Ошибка оптимизации данных: 'u'Статистика сокращения размера'b'size_reduction_percent'u'size_reduction_percent'b'original_size_mb'u'original_size_mb'b'optimized_size_mb'u'optimized_size_mb'u'PythonScripts.trading_system.tbank_api.cache_optimizer'u'trading_system.tbank_api.cache_optimizer'u'tbank_api.cache_optimizer'u'cache_optimizer'
Система предзагрузки и прогнозирования запросов
heapqCachePredictorПредсказывает и предзагружает данныеaccess_patternpopular_symbolspreload_threadrunningrecord_accessЗаписывает обращение к даннымget_popular_symbolstop_nВозвращает самые популярные инструментыnlargestlambdaxstart_preload_daemonЗапускает демон предзагрузкиis_alive_preload_worker✅ Демон предзагрузки запущенstop_preload_daemonОстанавливает демон предзагрузкиtimeout✅ Демон предзагрузки остановленРабочий процесс предзагрузкиtime_modulecurrent_time� Предзагрузка  () - популярность: preload_data7Ошибка предзагрузки Ошибка в демоне предзагрузки: # tbank_api/cache_predictor.py# Предзагружаем популярные инструменты в нерабочее время# Ночью# Топ-3# Ждем 1 час до следующей проверки# Ждем 5 минут при ошибкеu'
Система предзагрузки и прогнозирования запросов
'u'Предсказывает и предзагружает данные'u'Записывает обращение к данным'u'Возвращает самые популярные инструменты'u'Запускает демон предзагрузки'u'✅ Демон предзагрузки запущен'u'Останавливает демон предзагрузки'u'✅ Демон предзагрузки остановлен'u'Рабочий процесс предзагрузки'u'� Предзагрузка 'b' ('u' ('u') - популярность: 'b'preload_data'u'preload_data'u'Ошибка предзагрузки 'u'Ошибка в демоне предзагрузки: 'u'PythonScripts.trading_system.tbank_api.cache_predictor'u'trading_system.tbank_api.cache_predictor'u'tbank_api.cache_predictor'u'cache_predictor'
Вкладка для отображения динамики капитала и просадки
Анализ эффективности управления капиталом
tkintertkttkgui.componentsВкладка капитала и просадкиsetup_uiНастройка пользовательского интерфейсаFrameframecolumnconfigureweightrowconfigureplot_framecolumnENSstickyget_frameВозвращает фрейм вкладкиupdate_plotresult_nameОбновить график капитала и просадкиresults_historyshow_placeholderРезультат не найденperfax1ax2Капиталlabelaxhline100000ylinestyleНачальный капитал0.7max_capitalidxmaxmax_capital_idxscattergoldsМакс. капитал: $zorderДинамика капиталаКапитал ($)fill_betweenПросадкаmax_ddmax_dd_idxМакс. просадка: Динамика просадкиПросадка (%)set_ylimbottomshow_plot# ===== СЕКЦИЯ 8: ВКЛАДКА КАПИТАЛА И ПРОСАДКИ =====# Создание графика с двумя осями Y# График 1: Динамика капитала# Отметка максимального капитала# График 2: Просадка# Отметка максимальной просадкиu'
Вкладка для отображения динамики капитала и просадки
Анализ эффективности управления капиталом
'u'Вкладка капитала и просадки'u'Настройка пользовательского интерфейса'u'Возвращает фрейм вкладки'u'Обновить график капитала и просадки'u'Результат не найден'b'results'u'results'b'performance'u'performance'u'Капитал'u'Начальный капитал'b'gold'u'gold'u'Макс. капитал: $'u'Динамика капитала'u'Капитал ($)'b'drawdown'u'drawdown'u'Просадка'u'Макс. просадка: 'u'Динамика просадки'u'Просадка (%)'u'trading_system.gui.tabs.capital_tab'u'gui.tabs.capital_tab'u'tabs.capital_tab'u'capital_tab'
Проверка структуры проекта
check_tbank_api_structureПроверяем структуру папки tbank_api� ПРОВЕРКА СТРУКТУРЫ TBANK_APItbank_path❌ Папка  не существует✅ Папка  существует__init__.pytbank_api.pytbank_config.pytbank_config.jsonapi_manager.pyrequired_filesfilefile_path✅  - существует❌  - отсутствует
� Содержимое папки :itemlistdiritem_pathisfile   � # check_structure.py# Проверяем необходимые файлы# Показываем содержимое папкиu'
Проверка структуры проекта
'u'Проверяем структуру папки tbank_api'u'� ПРОВЕРКА СТРУКТУРЫ TBANK_API'b'tbank_api'u'❌ Папка 'u' не существует'u'✅ Папка 'u' существует'b'__init__.py'u'__init__.py'b'tbank_api.py'u'tbank_api.py'b'tbank_config.py'u'tbank_config.py'b'tbank_config.json'u'tbank_config.json'b'api_manager.py'u'api_manager.py'u'✅ 'u' - существует'u'❌ 'u' - отсутствует'u'
� Содержимое папки 'b':'u':'u'   � 'u'PythonScripts.trading_system.tbank_api.check_structure'u'trading_system.tbank_api.check_structure'u'tbank_api.check_structure'u'check_structure'C:/Users/bezlp/AppData/Local/Programs/Python/Python313/Lib/collectionsC:/Users/bezlp/AppData/Local/Programs/Python/Python313/LibC:/Users/bezlp/AppData/Local/Programs/Python/Python313C:/Users/bezlp/AppData/Local/Programs/PythonC:/Users/bezlp/AppData/Local/ProgramsC:/Users/bezlp/AppData/LocalC:/Users/bezlp/AppDataC:/Users/bezlpC:/UsersC:/
Вкладка для сравнительного анализа нескольких тестов
Визуализация производительности разных стратегий
Вкладка сравнения результатовsetup_control_panelpadyВыберите результаты для сравненияНастройка панели управления сравнениемcontrol_frameLabelВыберите результаты для сравнения (макс. 4):padxcheckboxes_frameButton� Обновить сравнениеupdate_comparisoncommandupdate_btncheckbox_varscheckboxesupdate_available_resultsОбновить список доступных результатовwidgetwinfo_childrendestroyget_available_resultsavailable_resultsНет доступных результатовgrayforegroundBooleanVarvarCheckbuttonvariablecbget_selected_resultsПолучить список выбранных результатовselectedОбновить график сравненияselected_resultsВыберите хотя бы один результат для сравненияДля сравнения выберите минимум 2 результатаplot_comparison_chart# ===== СЕКЦИЯ 14: ВКЛАДКА СРАВНЕНИЯ РЕЗУЛЬТАТОВ =====# Панель выбора результатов для сравнения# Фрейм для чекбоксов# Кнопка обновления# Очистка предыдущих чекбоксов# Создание чекбоксов для каждого результата# Ограничение до 6 результатов# Ограничение до 4 результатов# Построение графика сравненияu'
Вкладка для сравнительного анализа нескольких тестов
Визуализация производительности разных стратегий
'u'Вкладка сравнения результатов'u'Выберите результаты для сравнения'u'Настройка панели управления сравнением'u'Выберите результаты для сравнения (макс. 4):'u'� Обновить сравнение'u'Обновить список доступных результатов'u'Нет доступных результатов'b'gray'u'gray'u'Получить список выбранных результатов'u'Обновить график сравнения'u'Выберите хотя бы один результат для сравнения'u'Для сравнения выберите минимум 2 результата'u'trading_system.gui.tabs.compare_tab'u'gui.tabs.compare_tab'u'tabs.compare_tab'u'compare_tab'
Общие компоненты GUI для повторного использования
Стилизованные элементы управления
scrolledtextCallableСтилизованная кнопка с предустановленными настройкамиAccent.TButtonkwargsПоле ввода с меткойVariablelabel_texttextvariablepackLEFTsideEntryXfillexpandКомпонент выбора файла с кнопкой обзораStringVarfiletypesCSV files*.csvAll files*.*entryОбзор_browse_filebrowse_btnRIGHTОткрыть диалог выбора файлаfiledialogaskopenfilenameВыберите файл с даннымиКомбинированный список для выбора результатовon_selectВыберите результат:anchorComboboxstatecomboboxbind<<ComboboxSelected>>update_valuesОбновить список значенийФрейм для отображения графиков matplotlibЗапустите тест для отображения графиковArialfontplaceholdercurrent_canvasОтобразить график matplotlibclear_plotmatplotlib.backends.backend_tkaggFigureCanvasTkAggcanvasdrawget_tk_widgetОчистить текущий графикgrid_removeПоказать placeholder текстТекстовый фрейм для отображения статистикиScrolledTextWORDwrapConsolasheighttext_widgetset_placeholderset_textУстановить текстNORMALdeleteENDDISABLEDСтатистика будет отображена здесь после запуска тестаУстановить placeholder текст# ===== СЕКЦИЯ 6: ОБЩИЕ КОМПОНЕНТЫ ГРАФИЧЕСКОГО ИНТЕРФЕЙСА =====# Placeholder при инициализации# Очистить предыдущий график# Создать новый canvas# Скрыть placeholderu'
Общие компоненты GUI для повторного использования
Стилизованные элементы управления
'u'Стилизованная кнопка с предустановленными настройками'b'Accent.TButton'u'Accent.TButton'u'Поле ввода с меткой'u'Компонент выбора файла с кнопкой обзора'b'CSV files'u'CSV files'b'*.csv'u'*.csv'b'All files'u'All files'b'*.*'u'*.*'u'Обзор'u'Открыть диалог выбора файла'u'Выберите файл с данными'u'Комбинированный список для выбора результатов'u'Выберите результат:'b'readonly'u'readonly'b'<<ComboboxSelected>>'u'<<ComboboxSelected>>'u'Обновить список значений'b'values'u'values'u'Фрейм для отображения графиков matplotlib'u'Запустите тест для отображения графиков'b'Arial'u'Arial'u'Отобразить график matplotlib'u'Очистить текущий график'u'Показать placeholder текст'u'Текстовый фрейм для отображения статистики'b'Consolas'u'Consolas'u'Установить текст'u'Статистика будет отображена здесь после запуска теста'u'Установить placeholder текст'u'PythonScripts.trading_system.gui.components'u'trading_system.gui.components'u'gui.components'u'components'Простая конфигурацияt.8HbNCn4L0U9uBmMa5oloBrXCKxnqsTYNVK3f9iJOwDBiQ2lva9kvQ3C-MLgEESHl65ma1q0k0P6aMfS_O_co4gu'Простая конфигурация'b't.8HbNCn4L0U9uBmMa5oloBrXCKxnqsTYNVK3f9iJOwDBiQ2lva9kvQ3C-MLgEESHl65ma1q0k0P6aMfS_O_co4g'u't.8HbNCn4L0U9uBmMa5oloBrXCKxnqsTYNVK3f9iJOwDBiQ2lva9kvQ3C-MLgEESHl65ma1q0k0P6aMfS_O_co4g'u'Documents.PythonScripts.trading_system.config'u'PythonScripts.trading_system.config'u'trading_system.config'u'config'
Вкладка для анализа корреляций между различными параметрами системы
Матрица корреляций и heatmap
seabornsnsmessageboxscipy.clusterhierarchyВкладка корреляционного анализаselected_variablesanalysis_historyРасширенная настройка пользовательского интерфейсаАнализировать корреляции с:target_vartarget_comboОбновить график_on_update_clickКак использовать?_show_helphelp_btnbluestats_labelLabelFrameРасширенные настройкиpaddingsettings_frameВыбрать переменные_select_variablesПорог:DoubleVarcorr_thresholdScale0.9HORIZONTALorientlengthОкно:IntVarwindow_sizeSpinbox200Дополнительные анализыadvanced_frameВременные корреляции_show_time_correlationsКластеризация_show_clusteringScatter Plot_show_scatter_dialogСравнить тесты_show_comparisonЭкспорт_export_analysisГраф корреляций_show_correlation_networkПоказать анализ временных корреляцийcurrent_result_nameshowwarningПредупреждениеСначала загрузите данныеnumbernumeric_colsНедостаточно переменных для анализа_create_time_correlation_analysis_show_in_windowСоздать анализ временных корреляцийaxesrolling_corrs_get_top_correlated_variablestop_variablesrollingwindowcorrcorr_series_shorten_labelСкользящие корреляции с 
(окно=КорреляцияСильная корр._calculate_correlation_stabilitycorrelation_stabilityvariablesstability_valuesbarhlightcoralbarsbar0.01vaset_yticksset_yticklabelsНестабильность корреляций
(стандартное отклонение)Стандартное отклонениеsegmentssegment_sizecorrelation_matricesstart_idxend_idxsegment_datacorr_matrixcorr_changeimshowcoolwarmcmapautoaspectvminvmaximset_xticksset_xticklabelsrighthaИзменение корреляций
(конец - начало)colorbar0.8shrink_find_volatile_correlation_pairsvolatile_pairsppairsvolatilitiesorangeСамые изменчивые корреляционные парыИзменчивость (std)nПолучить топ-N наиболее коррелированных переменныхsort_valuesascendingcorrelationsРассчитать стабильность корреляций во времениstabilitiesrolling_corrНайти самые изменчивые корреляционные парыjcol1col2isnanПоказать кластеризацию переменныхНедостаточно переменных для кластеризации_create_clustering_analysisКластеризация переменныхСоздать анализ кластеризацииcorrelation_matrixdistance_matrixfill_diagonallinkagewardlinkage_matrixdendrogramlabelsleftorientationdendroДендрограмма корреляций
(иерархическая кластеризация)Расстояниеleavesreordered_indicesreordered_colslocreordered_corrheatmapannot.2ffmtlinewidthssizeannot_kwsКластеризованная матрица корреляцийОшибка кластеризации:
transAxestransformДендрограмма (ошибка)Невозможно построить
кластеризованную матрицуКластеризованная матрица (ошибка)Показать сравнение корреляций между разными тестамиНедостаточно тестов для сравненияToplevelcompare_windowСравнение тестовgeometry300x200Выберите тесты для сравнения:test_varsrun_comparisonselected_testsВыберите хотя бы 2 теста_create_comparison_analysisСравнитьresult_namesСоздать сравнительный анализn_testscbar_kwstitle_axКорреляции: droptarget_corrstop_corrsbars_axcolorsidxТоп-5 корреляций с 0.05Сравнение  тестовПоказать граф корреляцийНедостаточно переменных для графаthreshold_windowНастройки графа250x120Порог корреляции:network_threshold150create_network_create_correlation_networkГраф корреляций (порог: Создать графthresholdСоздать граф корреляцийnetworkxnxДля построения графа установите networkx:
pip install networkxГраф корреляций (networkx не установлен)GraphGadd_nodecorr_valadd_edgeedgesspring_layoutkiterationsposedge_weightsedge_colorsdraw_networkx_nodeslightbluenode_color800node_sizedraw_networkx_edgesedge_color0.6draw_networkx_labelsdictcompnodenodesfont_size0.95Узлов: 
Ребер: round,pad=0.3boxstylewhitebboxНет корреляций выше порога offПоказать справку по использованию корреляционного анализа
            � КОРРЕЛЯЦИОННЫЙ АНАЛИЗ: КАК ИСПОЛЬЗОВАТЬ

            � ЧТО ТАКОЕ КОРРЕЛЯЦИЯ?
            Корреляция показывает взаимосвязь между параметрами системы:
            • От -1.0 до 0.0: Отрицательная связь (при росте одного параметра другой уменьшается)
            • 0.0: Отсутствие связи
            • От 0.0 до +1.0: Положительная связь (параметры изменяются в одном направлении)

            � КЛЮЧЕВЫЕ ИНСАЙТЫ ДЛЯ ТРЕЙДИНГА:

            1. СИЛЬНЫЕ КОРРЕЛЯЦИИ (>0.7 или <-0.7):
            • Выявляют дублирующие параметры - можно упростить систему
            • Помогают найти скрытые зависимости в стратегии

            2. КОРРЕЛЯЦИИ С КАПИТАЛОМ:
            • Положительные: параметры, способствующие росту капитала
            • Отрицательные: параметры, связанные с просадками

            3. УПРАВЛЕНИЕ РИСКАМИ:
            • Диверсифицируйте факторы с низкой корреляцией
            • Избегайте стратегий, зависящих от сильно коррелированных параметров

            4. ОПТИМИЗАЦИЯ СИСТЕМЫ:
            • Уберите избыточные параметры с высокой корреляцией
            • Сфокусируйтесь на независимых факторах влияния

            ⚠️ ВАЖНО: Корреляция ≠ причинно-следственная связь!
            Сильная корреляция не всегда означает, что один параметр вызывает изменение другого.

            � ПРАКТИЧЕСКОЕ ПРИМЕНЕНИЕ:
            • Анализируйте корреляции после каждого теста стратегии
            • Сравнивайте корреляции на разных рынках/периодах
            • Используйте для создания сбалансированных портфелей
                    help_texthelp_windowСправка по корреляционному анализу600x500resizabletext_frameBOTHText#f8f9fabgScrollbarVERTICALyviewscrollbarconfigureyscrollcommandYЗакрытьclose_btntransientgrab_setfocus_setОбработчик клика по кнопке обновленияОбновить график корреляцийНет данных для анализаНедостаточно данных для корреляционного анализаcurrent_targets_get_common_variablesnew_targetsМатрица корреляций
(тепловая карта взаимосвязей)target_correlationstop_counttop_correlationsТоп- корреляций с 
(ключевые факторы влияния)Коэффициент корреляцииaxvlineСильная корреляция_update_correlation_statsПеременная "" не найдена
в числовых данныхКорреляции с целевой переменнойЦелевая переменная не найденаОшибка построения графиков: Обновить статистику корреляцийstrong_posstrong_negstrong_target_posstrong_target_negСильные корр.: +/- | С "С ": +stats_textОшибка статистики: Диалог выбора переменных для анализаselect_windowВыбор переменных для анализа400x500var_framevar_checkboxesbtn_frameВыбрать все_select_all_varsСбросить_deselect_all_varsПрименить_apply_variable_selectionПрименить выбранные переменныеВыбрать все переменныеСбросить выбор всех переменныхДиалог для выбора переменных scatter plotНедостаточно числовых переменных для scatter plotdialogScatter Plot - Выбор переменных300x150X-axis:x_varY-axis:y_varcreate_scatter_create_scatter_plotСоздать графикcolumnspanСоздать scatter plot для двух переменныхshowerrorОшибкаВыбранные переменные не найдены в данных vs 
Корреляция: polyfitzpoly1dr--Тренд (R=Scatter: Экспорт корреляционного анализаcorrelation_analysis_%Y%m%d_%H%M%S.xlsxasksaveasfilenamedefaultextensionExcel files*.xlsxinitialfile_export_to_excelshowinfoУспехДанные экспортированы в:
Экспорт в ExcelExcelWriteropenpyxlenginewriterto_excelМатрица корреляцийsheet_namestrong_corrsПеременная 1Переменная 2ПоложительнаяОтрицательнаяТипСильные корреляцииВсего переменныхПороговое значениеМетрикаЗначениеstats_dataСтатистикаПоказать график в отдельном окне800x600masterВозвращает список общих переменных для анализаma_fastma_slowma_trendsignalequitybalanceprofitlossСокращение длинных названий колонок для подписейКелли fПозицияРискЦенаMA быстраяMA медленнаяMA трендСигналДоходностьЭквитиБалансПрибыльУбытокШарпВолатильностьshort_names...# ===== СЕКЦИЯ 11: ВКЛАДКА КОРРЕЛЯЦИОННОГО АНАЛИЗА =====# Для хранения истории анализов# Основная панель управления# Выбор целевой переменной# Кнопка помощи# Статистика корреляций# Панель расширенных настроек# 1. Выбор переменных# 2. Порог корреляции# 3. Размер скользящего окна для временных корреляций# Панель дополнительных функций# Кнопки дополнительных анализов# График 1: Скользящие корреляции с целевой переменной# График 2: Стабильность корреляций во времени# Добавление значений на столбцы# График 3: Heatmap изменяющихся корреляций# Вычисляем корреляции в разных временных отрезках# Разница между первой и последней корреляционной матрицей# График 4: Самые изменчивые корреляционные пары# Исключаем саму переменную# График 1: Дендрограмма# Преобразуем корреляции в расстояния# График 2: Кластеризованная heatmap# Диалог выбора тестов для сравнения# Выбираем первые 3 по умолчанию# Чтобы унифицировать обработку# Heatmap# Топ корреляций с целевой переменной# Добавление значений# Диалог выбора порога# Добавление узлов# Добавление ребер для сильных корреляций# Рисование графа# Легенда# ... остальные методы из первого этапа остаются без изменений ...# _show_help, get_frame, _on_update_click, update_plot, _update_correlation_stats,# _select_variables, _apply_variable_selection, _select_all_vars, _deselect_all_vars,# _show_scatter_dialog, _create_scatter_plot, _export_analysis, _export_to_excel,# _show_in_window, _get_common_variables, _shorten_label# Создаем окно помощи# Создаем текстовое поле с прокруткой# Вставляем текст# Кнопка закрытия# Фокус на окно помощи# Проверка на пустые данные# Выбор числовых колонок для анализа# ФИЛЬТРАЦИЯ ПО ВЫБРАННЫМ ПЕРЕМЕННЫМ# Обновление списка переменных для комбобокса# Если текущая цель не в новых значениях, установить первую доступную# Создание комплексного графика корреляций# График 1: Heatmap корреляций с использованием seaborn# Построение heatmap с seaborn# Настройка осей# График 2: Важнейшие корреляции с выбранной целевой переменной# Выбор топ-8 наиболее коррелированных параметров# Обновление статистики# Статистика сильных корреляций# Корреляции с целевой переменной# Список переменных с чекбоксами# По умолчанию все выбраны# Кнопки# Расчет корреляции# Линия тренда# Показать в отдельном окне# Основная матрица# Сильные корреляции# Статистикаu'
Вкладка для анализа корреляций между различными параметрами системы
Матрица корреляций и heatmap
'u'Вкладка корреляционного анализа'u'Расширенная настройка пользовательского интерфейса'u'Анализировать корреляции с:'u'Обновить график'u'Как использовать?'b'blue'u'blue'u'Расширенные настройки'u'Выбрать переменные'u'Порог:'u'Окно:'u'Дополнительные анализы'u'Временные корреляции'u'Кластеризация'b'Scatter Plot'u'Scatter Plot'u'Сравнить тесты'u'Экспорт'u'Граф корреляций'u'Показать анализ временных корреляций'b'current_result_name'u'current_result_name'u'Предупреждение'u'Сначала загрузите данные'u'Недостаточно переменных для анализа'u'Создать анализ временных корреляций'u'Скользящие корреляции с 'u'
(окно='u'Корреляция'u'Сильная корр.'b'lightcoral'u'lightcoral'b'center'u'center'u'Нестабильность корреляций
(стандартное отклонение)'u'Стандартное отклонение'b'x'u'x'b'coolwarm'u'coolwarm'b'auto'u'auto'b'right'u'right'u'Изменение корреляций
(конец - начало)'b'orange'u'orange'u'Самые изменчивые корреляционные пары'u'Изменчивость (std)'u'Получить топ-N наиболее коррелированных переменных'u'Рассчитать стабильность корреляций во времени'u'Найти самые изменчивые корреляционные пары'u'Показать кластеризацию переменных'u'Недостаточно переменных для кластеризации'u'Кластеризация переменных'u'Создать анализ кластеризации'b'ward'u'ward'b'left'u'left'u'Дендрограмма корреляций
(иерархическая кластеризация)'u'Расстояние'b'leaves'u'leaves'b'.2f'u'.2f'b'size'u'size'b'weight'u'weight'u'Кластеризованная матрица корреляций'u'Ошибка кластеризации:
'u'Дендрограмма (ошибка)'u'Невозможно построить
кластеризованную матрицу'u'Кластеризованная матрица (ошибка)'u'Показать сравнение корреляций между разными тестами'u'Недостаточно тестов для сравнения'u'Сравнение тестов'b'300x200'u'300x200'u'Выберите тесты для сравнения:'u'Выберите хотя бы 2 теста'u'Сравнить'u'Создать сравнительный анализ'b'shrink'u'shrink'u'Корреляции: 'u'Топ-5 корреляций с 'u'Сравнение 'u' тестов'u'Показать граф корреляций'u'Недостаточно переменных для графа'u'Настройки графа'b'250x120'u'250x120'u'Порог корреляции:'u'Граф корреляций (порог: 'u'Создать граф'u'Создать граф корреляций'u'Для построения графа установите networkx:
pip install networkx'u'Граф корреляций (networkx не установлен)'b'color'u'color'b'lightblue'u'lightblue'u'Узлов: 'u'
Ребер: 'b'round,pad=0.3'u'round,pad=0.3'b'white'u'white'u'Нет корреляций выше порога 'b'off'u'off'u'Показать справку по использованию корреляционного анализа'u'
            � КОРРЕЛЯЦИОННЫЙ АНАЛИЗ: КАК ИСПОЛЬЗОВАТЬ

            � ЧТО ТАКОЕ КОРРЕЛЯЦИЯ?
            Корреляция показывает взаимосвязь между параметрами системы:
            • От -1.0 до 0.0: Отрицательная связь (при росте одного параметра другой уменьшается)
            • 0.0: Отсутствие связи
            • От 0.0 до +1.0: Положительная связь (параметры изменяются в одном направлении)

            � КЛЮЧЕВЫЕ ИНСАЙТЫ ДЛЯ ТРЕЙДИНГА:

            1. СИЛЬНЫЕ КОРРЕЛЯЦИИ (>0.7 или <-0.7):
            • Выявляют дублирующие параметры - можно упростить систему
            • Помогают найти скрытые зависимости в стратегии

            2. КОРРЕЛЯЦИИ С КАПИТАЛОМ:
            • Положительные: параметры, способствующие росту капитала
            • Отрицательные: параметры, связанные с просадками

            3. УПРАВЛЕНИЕ РИСКАМИ:
            • Диверсифицируйте факторы с низкой корреляцией
            • Избегайте стратегий, зависящих от сильно коррелированных параметров

            4. ОПТИМИЗАЦИЯ СИСТЕМЫ:
            • Уберите избыточные параметры с высокой корреляцией
            • Сфокусируйтесь на независимых факторах влияния

            ⚠️ ВАЖНО: Корреляция ≠ причинно-следственная связь!
            Сильная корреляция не всегда означает, что один параметр вызывает изменение другого.

            � ПРАКТИЧЕСКОЕ ПРИМЕНЕНИЕ:
            • Анализируйте корреляции после каждого теста стратегии
            • Сравнивайте корреляции на разных рынках/периодах
            • Используйте для создания сбалансированных портфелей
                    'u'Справка по корреляционному анализу'b'600x500'u'600x500'b'#f8f9fa'u'#f8f9fa'u'Закрыть'u'Обработчик клика по кнопке обновления'u'Обновить график корреляций'u'Нет данных для анализа'u'Недостаточно данных для корреляционного анализа'u'Матрица корреляций
(тепловая карта взаимосвязей)'u'Топ-'u' корреляций с 'u'
(ключевые факторы влияния)'u'Коэффициент корреляции'u'Сильная корреляция'u'Переменная "'u'" не найдена
в числовых данных'u'Корреляции с целевой переменной'u'Целевая переменная не найдена'u'Ошибка построения графиков: 'u'Обновить статистику корреляций'u'Сильные корр.: +'b'/-'u'/-'u' | С 'b': +'u': +'u'Ошибка статистики: 'u'Диалог выбора переменных для анализа'u'Выбор переменных для анализа'b'400x500'u'400x500'u'Выбрать все'u'Сбросить'u'Применить'u'Применить выбранные переменные'u'Выбрать все переменные'u'Сбросить выбор всех переменных'u'Диалог для выбора переменных scatter plot'u'Недостаточно числовых переменных для scatter plot'u'Scatter Plot - Выбор переменных'b'300x150'u'300x150'b'X-axis:'u'X-axis:'b'Y-axis:'u'Y-axis:'u'Создать график'u'Создать scatter plot для двух переменных'u'Ошибка'u'Выбранные переменные не найдены в данных'b' vs 'u' vs 'u'
Корреляция: 'b'r--'u'r--'u'Тренд (R='b'Scatter: 'u'Scatter: 'u'Экспорт корреляционного анализа'b'correlation_analysis_'u'correlation_analysis_'b'%Y%m%d_%H%M%S'u'%Y%m%d_%H%M%S'b'.xlsx'u'.xlsx'b'Excel files'u'Excel files'b'*.xlsx'u'*.xlsx'u'Успех'u'Данные экспортированы в:
'u'Экспорт в Excel'b'openpyxl'u'openpyxl'u'Матрица корреляций'u'Переменная 1'u'Переменная 2'u'Положительная'u'Отрицательная'u'Тип'u'Сильные корреляции'u'Всего переменных'u'Пороговое значение'u'Метрика'u'Значение'u'Статистика'u'Показать график в отдельном окне'b'800x600'u'800x600'u'Возвращает список общих переменных для анализа'b'ma_fast'u'ma_fast'b'ma_slow'u'ma_slow'b'ma_trend'u'ma_trend'b'signal'u'signal'b'returns'u'returns'b'equity'u'equity'b'balance'u'balance'b'profit'u'profit'b'loss'u'loss'b'sharpe'u'sharpe'u'Сокращение длинных названий колонок для подписей'u'Келли f'u'Позиция'u'Риск'u'Цена'u'MA быстрая'u'MA медленная'u'MA тренд'u'Сигнал'u'Доходность'u'Эквити'u'Баланс'u'Прибыль'u'Убыток'u'Шарп'u'Волатильность'b'...'u'...'u'trading_system.gui.tabs.correlation_tab'u'gui.tabs.correlation_tab'u'tabs.correlation_tab'u'correlation_tab'
Модуль для загрузки и предварительной обработки ценовых данных
Поддерживает различные форматы CSV файлов
setup_data_loader_loggingНастройка логирования для модуля загрузки данныхhandlersStreamHandlerhandlerFormatter%(asctime)s - %(name)s - %(levelname)s - %(message)sformattersetFormatteraddHandlersetLevelINFOvalidate_price_data
    Комплексная валидация ценовых данных
    Возвращает словарь с результатами проверок
    
    Parameters:
    -----------
    data : pd.DataFrame
        Данные для валидации
        
    Returns:
    --------
    dict
        Результаты валидации с ключами:
        - is_valid: bool
        - errors: List[str]
        - warnings: List[str] 
        - stats: Dict[str, Any]
    is_validwarningsvalidation_resultsDataFrame пустmissing_columnsОтсутствуют обязательные колонки: close_pricesnegative_pricesОбнаружено  отрицательных ценclipЗаменено  отрицательных цен на минимальные значенияnan_count NaN значенийЗаполнено z_scoresoutliers выбросов (>5σ)quantileq_low0.99q_highДанные не отсортированы по времениДанные отсортированы по времениМало данных для анализа: Рекомендуется больше данных:  записей (минимум 100-200)duplicate_indices дубликатов индексаtotal_recordsN/Aprice_rangecalculate_data_quality_scoredata_quality_scoremissing_valuesduplicates_removedОшибка валидации: Ошибка валидации данных: 
    Расчет оценки качества данных (0-100)
    
    Parameters:
    -----------
    data : pd.DataFrame
        Данные для оценки
        
    Returns:
    --------
    float
        Оценка качества данных от 0 до 100
    100.0nan_rationegative_ratio0.4data_penaltyduplicate_ratioОшибка расчета оценки качества данных: 50.0detect_csv_format
    Автоматическое определение формата CSV файла
    
    Parameters:
    -----------
    filename : str
        Путь к файлу
        
    Returns:
    --------
    dict
        Информация о формате файла
    delimiterhas_headerdate_formatformat_infofirst_lines,	|delimitersdelimiter_countslinedelimgenexprkeyword<>metaquotescp1251latin-1Ошибка определения формата файла 
    Загрузка ценовых данных из CSV файла с автоматическим определением формата
    и улучшенной обработкой ошибок
    
    Parameters:
    -----------
    filename : str
        Путь к CSV файлу с данными
        
    Returns:
    --------
    pd.DataFrame
        Загруженные и обработанные данные с индексом datetime
    Файл не найден: � Загрузка данных из файла: � Определен формат: разделитель='', кодировка='"', ""кодировка='"', заголовок=skipinitialspaceskipon_bad_linesread_paramsread_csvheader� Загружено  записей из process_loaded_dataresult_datavalidation❌ Данные не прошли валидацию: ⚠️ ✅ Успешно загружено � Качество данных: � Диапазон дат: � Диапазон цен: EmptyDataError❌ Файл пуст или не содержит данных: ❌ Ошибка при загрузке данных из 
    Обработка загруженных данных: преобразование колонок, дат и индекса
    
    Parameters:
    -----------
    data : pd.DataFrame
        Сырые загруженные данные
    format_info : dict
        Информация о формате файла
        
    Returns:
    --------
    pd.DataFrame
        Обработанные данные
    <CLOSE>CLOSE<HIGH>HIGH<LOW>LOW<OPEN>OPEN<DATE>DATEDate<TIME>TIMETime<VOLUME>VOLUMEfile_colstandard_colto_numericcoerceСопоставлена колонка:  -> process_datetime_columns❌ Не найдена колонка с ценами закрытияfill_missing_columnsreset_index2020-01-01⚠️ Создан индекс даты по умолчаниюdrop_duplicates❌ Ошибка обработки данных: original_data
    Обработка колонок даты и времени
    
    Parameters:
    -----------
    result_data : pd.DataFrame
        Обрабатываемые данные
    original_data : pd.DataFrame  
        Исходные данные
    format_info : dict
        Информация о формате
        
    Returns:
    --------
    pd.DataFrame
        Данные с обработанными колонками даты/времени
    date_coltime_colcol_lowerdate_series%d-%m-%Y%m-%d-%Y%Y.%m.%d%d.%m.%Y%y%m%d%Y%m%d%d/%m/%Y%m/%d/%Ydate_formats✅ Определен формат даты: � Использовано автоматическое определение формата датыtime_seriesdtypeint64%H%M%Sdttime_formatted ⏰ Объединены дата и время⚠️ Ошибка обработки времени: ⚠️ Созданы даты по умолчанию
    Заполнение отсутствующих колонок вычисляемыми значениями
    
    Parameters:
    -----------
    result_data : pd.DataFrame
        Данные для заполнения
        
    Returns:
    --------
    pd.DataFrame
        Данные с заполненными колонками
    1.002� Создана колонка high на основе close0.998� Создана колонка low на основе closeshift� Создана колонка open на основе close� Создана колонка volume со значениями по умолчаниюget_data_summary
    Получение сводки по данным
    
    Parameters:
    -----------
    data : pd.DataFrame
        Данные для анализа
        
    Returns:
    --------
    dict
        Сводная информация о данных
    dtypesdata_typessummarylastprice_statsSI_250929_251001.csvtest_file� Сводка данных:❌ Тестовый файл # ===== СЕКЦИЯ 4: ЗАГРУЗКА И ПОДГОТОВКА ДАННЫХ =====# Настройка логирования# Проверка 1: Наличие данных# Проверка 2: Обязательные колонки# Проверка 3: Корректность цен# Отрицательные цены# Автоматическое исправление# NaN значения# Заполнение NaN# Выбросы (более 5 стандартных отклонений)# Мягкая корректировка выбросов# Проверка 4: Хронология данных# Проверка 5: Достаточность данных# Проверка 6: Дубликаты индекса# Штраф за NaN (максимум -30 баллов)# Штраф за отрицательные цены (максимум -20 баллов)# Штраф за недостаток данных (максимум -20 баллов)# Штраф за неотсортированность (максимум -10 баллов)# Штраф за дубликаты (максимум -10 баллов)# Бонус за хороший объем данных (+10 баллов)# Базовая оценка при ошибках# Чтение первых строк для анализа# Анализ разделителя# Выбор наиболее частого разделителя# Проверка заголовка# Определение формата даты# Формат MetaTrader# Попробуем другую кодировку# Проверка существования файла# Определение формата файла# Параметры чтения CSV# Попытка автоматического определения колонок# Обработка данных# Валидация данных# Логирование предупреждений# Логирование статистики# Автоматическое определение колонок# Сопоставление колонок# Преобразование в числовой формат с обработкой ошибок# Обработка даты и времени# Обязательная колонка close# Сортировка и установка индекса# Создание индекса по умолчанию# Очистка от полных дубликатов# Поиск колонки с датой# Обработка даты# Попытка различных форматов даты# Если не удалось определить формат, используем автоматическое определение# Обработка времени (если есть)# Форматирование времени# Для формата HHMMSS# Объединение даты и времени# Если дата не определена, создаем ее# Если есть close, но нет high/low/open# +0.2%# -0.2%# Создание volume если отсутствует# Значение по умолчанию# Пример использования# Тестирование модуляu'
Модуль для загрузки и предварительной обработки ценовых данных
Поддерживает различные форматы CSV файлов
'u'Настройка логирования для модуля загрузки данных'b'%(asctime)s - %(name)s - %(levelname)s - %(message)s'u'%(asctime)s - %(name)s - %(levelname)s - %(message)s'u'
    Комплексная валидация ценовых данных
    Возвращает словарь с результатами проверок
    
    Parameters:
    -----------
    data : pd.DataFrame
        Данные для валидации
        
    Returns:
    --------
    dict
        Результаты валидации с ключами:
        - is_valid: bool
        - errors: List[str]
        - warnings: List[str] 
        - stats: Dict[str, Any]
    'b'is_valid'u'is_valid'b'errors'u'errors'b'warnings'u'warnings'b'stats'u'stats'u'DataFrame пуст'u'Отсутствуют обязательные колонки: 'u'Обнаружено 'u' отрицательных цен'u'Заменено 'u' отрицательных цен на минимальные значения'u' NaN значений'u'Заполнено 'u' выбросов (>5σ)'u'Данные не отсортированы по времени'u'Данные отсортированы по времени'u'Мало данных для анализа: 'u'Рекомендуется больше данных: 'u' записей (минимум 100-200)'u' дубликатов индекса'b'total_records'u'total_records'b'N/A'u'N/A'b'date_range'u'date_range'b'price_range'u'price_range'b'data_quality_score'u'data_quality_score'b'missing_values'u'missing_values'b'duplicates_removed'u'duplicates_removed'u'Ошибка валидации: 'u'Ошибка валидации данных: 'u'
    Расчет оценки качества данных (0-100)
    
    Parameters:
    -----------
    data : pd.DataFrame
        Данные для оценки
        
    Returns:
    --------
    float
        Оценка качества данных от 0 до 100
    'u'Ошибка расчета оценки качества данных: 'u'
    Автоматическое определение формата CSV файла
    
    Parameters:
    -----------
    filename : str
        Путь к файлу
        
    Returns:
    --------
    dict
        Информация о формате файла
    'b';'u';'b'delimiter'u'delimiter'b'encoding'u'encoding'b'has_header'u'has_header'b'date_format'u'date_format'b','u','b'	'u'	'b'|'u'|'b'<'u'<'b'>'u'>'b'metaquotes'u'metaquotes'b'cp1251'u'cp1251'b'latin-1'u'latin-1'u'Ошибка определения формата файла 'u'
    Загрузка ценовых данных из CSV файла с автоматическим определением формата
    и улучшенной обработкой ошибок
    
    Parameters:
    -----------
    filename : str
        Путь к CSV файлу с данными
        
    Returns:
    --------
    pd.DataFrame
        Загруженные и обработанные данные с индексом datetime
    'u'Файл не найден: 'u'� Загрузка данных из файла: 'u'� Определен формат: разделитель=''u'', кодировка=''u'', заголовок='b'skipinitialspace'u'skipinitialspace'b'skip'u'skip'b'on_bad_lines'u'on_bad_lines'u'� Загружено 'u' записей из 'u'❌ Данные не прошли валидацию: 'u'⚠️ 'u'✅ Успешно загружено 'u'� Качество данных: 'u'� Диапазон дат: 'u'� Диапазон цен: 'u'❌ Файл пуст или не содержит данных: 'u'❌ Ошибка при загрузке данных из 'u'
    Обработка загруженных данных: преобразование колонок, дат и индекса
    
    Parameters:
    -----------
    data : pd.DataFrame
        Сырые загруженные данные
    format_info : dict
        Информация о формате файла
        
    Returns:
    --------
    pd.DataFrame
        Обработанные данные
    'b'<CLOSE>'u'<CLOSE>'b'CLOSE'u'CLOSE'b'<HIGH>'u'<HIGH>'b'HIGH'u'HIGH'b'<LOW>'u'<LOW>'b'LOW'u'LOW'b'<OPEN>'u'<OPEN>'b'OPEN'u'OPEN'b'<DATE>'u'<DATE>'b'DATE'u'DATE'b'Date'u'Date'b'<TIME>'u'<TIME>'b'TIME'u'TIME'b'Time'u'Time'b'<VOLUME>'u'<VOLUME>'b'VOLUME'u'VOLUME'b'coerce'u'coerce'u'Сопоставлена колонка: 'b' -> 'u' -> 'u'❌ Не найдена колонка с ценами закрытия'b'2020-01-01'u'2020-01-01'u'⚠️ Создан индекс даты по умолчанию'u'❌ Ошибка обработки данных: 'u'
    Обработка колонок даты и времени
    
    Parameters:
    -----------
    result_data : pd.DataFrame
        Обрабатываемые данные
    original_data : pd.DataFrame  
        Исходные данные
    format_info : dict
        Информация о формате
        
    Returns:
    --------
    pd.DataFrame
        Данные с обработанными колонками даты/времени
    'b'%d-%m-%Y'u'%d-%m-%Y'b'%m-%d-%Y'u'%m-%d-%Y'b'%Y.%m.%d'u'%Y.%m.%d'b'%d.%m.%Y'u'%d.%m.%Y'b'%y%m%d'u'%y%m%d'b'%Y%m%d'u'%Y%m%d'b'%d/%m/%Y'u'%d/%m/%Y'b'%m/%d/%Y'u'%m/%d/%Y'u'✅ Определен формат даты: 'u'� Использовано автоматическое определение формата даты'b'int64'u'int64'b'float64'u'float64'b'%H%M%S'u'%H%M%S'b' 'u' 'u'⏰ Объединены дата и время'u'⚠️ Ошибка обработки времени: 'u'⚠️ Созданы даты по умолчанию'u'
    Заполнение отсутствующих колонок вычисляемыми значениями
    
    Parameters:
    -----------
    result_data : pd.DataFrame
        Данные для заполнения
        
    Returns:
    --------
    pd.DataFrame
        Данные с заполненными колонками
    'u'� Создана колонка high на основе close'u'� Создана колонка low на основе close'u'� Создана колонка open на основе close'u'� Создана колонка volume со значениями по умолчанию'u'
    Получение сводки по данным
    
    Parameters:
    -----------
    data : pd.DataFrame
        Данные для анализа
        
    Returns:
    --------
    dict
        Сводная информация о данных
    'b'start'u'start'b'end'u'end'b'days'u'days'b'columns'u'columns'b'data_types'u'data_types'b'min'b'max'b'last'u'last'b'price_stats'u'price_stats'b'SI_250929_251001.csv'u'SI_250929_251001.csv'u'� Сводка данных:'u'❌ Тестовый файл 'u'PythonScripts.trading_system.utils.data_loader'u'trading_system.utils.data_loader'u'utils.data_loader'u'data_loader'
Централизованная обработка ошибок для торговой системы
Декораторы для безопасного выполнения методов
tracebackfunctoolssetup_error_handler_loggingНастройка логирования для обработчика ошибок%(asctime)s - %(name)s - %(levelname)s - [%(funcName)s] - %(message)sTradingErrorБазовое исключение торговой системыDataValidationErrorОшибка валидации данныхStrategyCalculationErrorОшибка расчета стратегииRiskManagementErrorОшибка управления рискамиKellyCalculationErrorОшибка расчета параметра КеллиPositionSizeErrorОшибка расчета размера позицииCacheErrorОшибка работы с кэшемSimulationErrorОшибка симуляции торговлиerror_handlerERRORLoggerdefault_returnlog_levelcapture_traceback
    Универсальный декоратор для обработки ошибок в методах системы
    
    Parameters:
    -----------
    logger : logging.Logger, optional
        Логгер для записи ошибок (по умолчанию используется модульный логгер)
    default_return : Any, optional
        Значение, возвращаемое при ошибке (по умолчанию определяется автоматически)
    log_level : int, optional
        Уровень логирования ошибок (по умолчанию ERROR)
    capture_traceback : bool, optional
        Захватывать ли traceback (по умолчанию True)
    decoratorfuncwrapswrappercurrent_logger в error_msglogTraceback для :
format_exc_errorserror_typeerror_messagesafe_fallbackОшибка данных в Неожиданная ошибка в Полный traceback для CRITICALmethod_name
    Безопасные значения по умолчанию при ошибках
    
    Parameters:
    -----------
    method_name : str
        Имя метода, в котором произошла ошибка
    args : tuple
        Аргументы метода
    kwargs : dict
        Именованные аргументы метода
        
    Returns:
    --------
    Any
        Безопасное значение по умолчанию
    calculate_kelly_fractioncalculate_kelly_criterioncalculate_position_sizecalculate_optimal_positionfast_position_sizeSeriescalculate_atrcalculate_smacalculate_emacalculate_rsimulti_timeframe_signalsupertrend_strategyvectorized_signal_calculation_create_fallback_dataframesimulate_trading_optimized_simulation_looprun_backtestdynamic_risk_managementcalculate_risk_leveladjust_risk_parametersget_from_cachesave_to_cacheget_trade_historyМультифреймовая (MA)multi_timeframeSuper Trendget_available_strategiesfallback_values�️ Использовано безопасное значение для метода: 
    Создание безопасного DataFrame при ошибках симуляции
    
    Parameters:
    -----------
    args : tuple
        Аргументы метода
        
    Returns:
    --------
    pd.DataFrame
        Безопасный DataFrame с базовыми колонками
    argsafe_data100000.0with_error_handlingdecorator_kwargs
    Упрощенный декоратор для методов класса
    
    Parameters:
    -----------
    func : Callable, optional
        Декорируемая функция
    **decorator_kwargs
        Дополнительные аргументы для error_handler
        
    Returns:
    --------
    Callable
        Декорированная функция
    retry_on_errormax_retriesdelay
    Декоратор для повторения операции при ошибках
    
    Parameters:
    -----------
    max_retries : int, optional
        Максимальное количество попыток (по умолчанию 3)
    delay : float, optional
        Задержка между попытками в секундах (по умолчанию 1.0)
    exceptions : tuple, optional
        Типы исключений для перехвата (по умолчанию все)
    last_exceptionattempt⚠️ Попытка  не удалась в ❌ Все  попыток не удались в ErrorCollector
    Класс для сбора и анализа ошибок системы
    error_statsadd_error
        Добавление ошибки в коллектор
        
        Parameters:
        -----------
        method_name : str
            Имя метода, в котором произошла ошибка
        error : Exception
            Объект исключения
        args : tuple, optional
            Аргументы метода
        kwargs : dict, optional
            Именованные аргументы метода
        error_infoget_error_summary
        Получение сводки по ошибкам
        
        Returns:
        --------
        dict
            Сводная информация об ошибках
        total_errorserror_typesrecent_errorsmost_common_errorclear_errorsОчистка коллекции ошибокsave_errors_to_filetrading_errors.log
        Сохранение ошибок в файл
        
        Parameters:
        -----------
        filename : str, optional
            Имя файла для сохранения
        === ЛОГ ОШИБОК ТОРГОВОЙ СИСТЕМЫ ===

ОШИБКА #Метод: Тип: Сообщение: Аргументы: KWArgs: Traceback:

СТАТИСТИКА:
Всего ошибок: ✅ Ошибки сохранены в файл: ❌ Ошибка сохранения ошибок в файл: validate_method_arguments
    Декоратор для валидации аргументов методов
    
    Parameters:
    -----------
    func : Callable
        Декорируемая функция
        
    Returns:
    --------
    Callable
        Декорированная функция с валидацией аргументов
    isfiniteНекорректное числовое значение в аргументе ❌ Ошибка валидации аргументов в global_error_collectorget_global_error_collector
    Получение глобального коллектора ошибок
    
    Returns:
    --------
    ErrorCollector
        Глобальный коллектор ошибок
    test_methodТестовый метод для демонстрации работы декоратораДеление на ноль!test_retry_methodТестовый метод для демонстрации повторных попытокrandomСлучайная ошибка!Успех!� Тестирование обработки ошибок...result1Результат с ошибкой: result2Результат без ошибки: result3Результат retry: Retry не удался: � Статистика ошибок: # ===== СЕКЦИЯ: ОБРАБОТКА ОШИБОК ТОРГОВОЙ СИСТЕМЫ =====# Используем переданный логгер или модульный# Обработка специфичных ошибок торговой системы# Запись ошибки в объект системы (если есть)# Обработка стандартных Python ошибок# Обработка всех остальных неожиданных ошибок# Запись критической ошибки# Методы расчета Келли# Методы расчета позиций# Методы индикаторов# Стратегии# Симуляции# Управление рисками# Кэширование# Общие# Логирование использования fallback# Пытаемся получить исходные данные из аргументов# Создаем безопасную копию с ограниченным количеством записей# Создаем минимальный DataFrame# Добавляем обязательные колонки# Минимальный fallback# Эта строка никогда не должна выполняться# Базовая валидация числовых аргументов# Глобальный коллектор ошибок# Тестирование декораторов# Тестирование# Тест обычного декоратора# Должен вернуть fallback значение# Должен работать нормально# Тест retry декоратора# Показать статистику ошибокu'
Централизованная обработка ошибок для торговой системы
Декораторы для безопасного выполнения методов
'u'Настройка логирования для обработчика ошибок'b'%(asctime)s - %(name)s - %(levelname)s - [%(funcName)s] - %(message)s'u'%(asctime)s - %(name)s - %(levelname)s - [%(funcName)s] - %(message)s'u'Базовое исключение торговой системы'u'Ошибка валидации данных'u'Ошибка расчета стратегии'u'Ошибка управления рисками'u'Ошибка расчета параметра Келли'u'Ошибка расчета размера позиции'u'Ошибка работы с кэшем'u'Ошибка симуляции торговли'u'
    Универсальный декоратор для обработки ошибок в методах системы
    
    Parameters:
    -----------
    logger : logging.Logger, optional
        Логгер для записи ошибок (по умолчанию используется модульный логгер)
    default_return : Any, optional
        Значение, возвращаемое при ошибке (по умолчанию определяется автоматически)
    log_level : int, optional
        Уровень логирования ошибок (по умолчанию ERROR)
    capture_traceback : bool, optional
        Захватывать ли traceback (по умолчанию True)
    'u' в 'u'Traceback для 'b':
'u':
'b'_errors'u'_errors'b'method'u'method'b'error_type'u'error_type'b'error_message'u'error_message'b'None'u'None'b'args'u'args'b'kwargs'u'kwargs'u'Ошибка данных в 'u'Неожиданная ошибка в 'u'Полный traceback для 'b'CRITICAL'u'CRITICAL'b'traceback'u'traceback'u'
    Безопасные значения по умолчанию при ошибках
    
    Parameters:
    -----------
    method_name : str
        Имя метода, в котором произошла ошибка
    args : tuple
        Аргументы метода
    kwargs : dict
        Именованные аргументы метода
        
    Returns:
    --------
    Any
        Безопасное значение по умолчанию
    'b'calculate_kelly_fraction'u'calculate_kelly_fraction'b'calculate_kelly_criterion'u'calculate_kelly_criterion'b'calculate_position_size'u'calculate_position_size'b'calculate_optimal_position'u'calculate_optimal_position'b'fast_position_size'u'fast_position_size'b'calculate_atr'u'calculate_atr'b'calculate_sma'u'calculate_sma'b'calculate_ema'u'calculate_ema'b'calculate_rsi'u'calculate_rsi'b'multi_timeframe_signal'u'multi_timeframe_signal'b'supertrend_strategy'u'supertrend_strategy'b'vectorized_signal_calculation'u'vectorized_signal_calculation'b'simulate_trading'u'simulate_trading'b'_optimized_simulation_loop'u'_optimized_simulation_loop'b'run_backtest'u'run_backtest'b'dynamic_risk_management'u'dynamic_risk_management'b'calculate_risk_level'u'calculate_risk_level'b'adjust_risk_parameters'u'adjust_risk_parameters'b'get_from_cache'u'get_from_cache'b'save_to_cache'u'save_to_cache'b'get_performance_report'u'get_performance_report'b'get_cache_stats'u'get_cache_stats'b'get_trade_history'u'get_trade_history'u'Мультифреймовая (MA)'b'multi_timeframe'u'multi_timeframe'b'Super Trend'u'Super Trend'b'supertrend'u'supertrend'b'get_available_strategies'u'get_available_strategies'u'�️ Использовано безопасное значение для метода: 'u'
    Создание безопасного DataFrame при ошибках симуляции
    
    Parameters:
    -----------
    args : tuple
        Аргументы метода
        
    Returns:
    --------
    pd.DataFrame
        Безопасный DataFrame с базовыми колонками
    'b'price_data'u'price_data'u'
    Упрощенный декоратор для методов класса
    
    Parameters:
    -----------
    func : Callable, optional
        Декорируемая функция
    **decorator_kwargs
        Дополнительные аргументы для error_handler
        
    Returns:
    --------
    Callable
        Декорированная функция
    'u'
    Декоратор для повторения операции при ошибках
    
    Parameters:
    -----------
    max_retries : int, optional
        Максимальное количество попыток (по умолчанию 3)
    delay : float, optional
        Задержка между попытками в секундах (по умолчанию 1.0)
    exceptions : tuple, optional
        Типы исключений для перехвата (по умолчанию все)
    'u'⚠️ Попытка 'u' не удалась в 'u'❌ Все 'u' попыток не удались в 'u'
    Класс для сбора и анализа ошибок системы
    'u'
        Добавление ошибки в коллектор
        
        Parameters:
        -----------
        method_name : str
            Имя метода, в котором произошла ошибка
        error : Exception
            Объект исключения
        args : tuple, optional
            Аргументы метода
        kwargs : dict, optional
            Именованные аргументы метода
        'u'
        Получение сводки по ошибкам
        
        Returns:
        --------
        dict
            Сводная информация об ошибках
        'b'total_errors'u'total_errors'b'error_types'u'error_types'b'recent_errors'u'recent_errors'b'most_common_error'u'most_common_error'u'Очистка коллекции ошибок'b'trading_errors.log'u'trading_errors.log'u'
        Сохранение ошибок в файл
        
        Parameters:
        -----------
        filename : str, optional
            Имя файла для сохранения
        'u'=== ЛОГ ОШИБОК ТОРГОВОЙ СИСТЕМЫ ===

'u'ОШИБКА #'u'Метод: 'u'Тип: 'u'Сообщение: 'u'Аргументы: 'b'KWArgs: 'u'KWArgs: 'b'Traceback:
'u'Traceback:
'u'
СТАТИСТИКА:
'u'Всего ошибок: 'u'✅ Ошибки сохранены в файл: 'u'❌ Ошибка сохранения ошибок в файл: 'u'
    Декоратор для валидации аргументов методов
    
    Parameters:
    -----------
    func : Callable
        Декорируемая функция
        
    Returns:
    --------
    Callable
        Декорированная функция с валидацией аргументов
    'u'Некорректное числовое значение в аргументе 'u'❌ Ошибка валидации аргументов в 'u'
    Получение глобального коллектора ошибок
    
    Returns:
    --------
    ErrorCollector
        Глобальный коллектор ошибок
    'u'Тестовый метод для демонстрации работы декоратора'u'Деление на ноль!'u'Тестовый метод для демонстрации повторных попыток'u'Случайная ошибка!'u'Успех!'u'� Тестирование обработки ошибок...'u'Результат с ошибкой: 'u'Результат без ошибки: 'u'Результат retry: 'u'Retry не удался: 'u'� Статистика ошибок: 'u'PythonScripts.trading_system.utils.error_handler'u'trading_system.utils.error_handler'u'utils.error_handler'u'error_handler'refind_instrument_service_importsПоиск всех импортов InstrumentServiceWorkingD:\Documents\PythonScripts\trading_system22project_dirrootdirsfileswalk.pyInstrumentServiceWorking� Найдено в: lines   Строка Ошибка чтения # Ищем упоминания InstrumentServiceWorking# Показываем контекстu'Поиск всех импортов InstrumentServiceWorking'b'D:\Documents\PythonScripts\trading_system22'u'D:\Documents\PythonScripts\trading_system22'b'.py'u'.py'b'InstrumentServiceWorking'u'InstrumentServiceWorking'u'� Найдено в: 'u'   Строка 'u'Ошибка чтения 'u'Documents.PythonScripts.trading_system.find_imports'u'PythonScripts.trading_system.find_imports'u'trading_system.find_imports'u'find_imports'find_realexchange_usageПоиск всех упоминаний RealExchange в проектеreal_exchangeRealExchange# Ищем упоминания RealExchangeu'Поиск всех упоминаний RealExchange в проекте'b'real_exchange'u'real_exchange'b'RealExchange'u'RealExchange'u'Documents.PythonScripts.trading_system.find_realexchange'u'PythonScripts.trading_system.find_realexchange'u'trading_system.find_realexchange'u'find_realexchange'
Правильный сервис инструментов Tinkoff Invest API
InstrumentStatusInstrumentIdTypeInstrumentServiceСервис для работы со справочной информацией об инструментахtoken_get_clientСоздает клиент для запросовget_all_sharesПолучение всех акцийresponseget_all_etfsПолучение всех ETFget_all_bondsПолучение всех облигацийget_all_currenciesПолучение всех валютfind_instrumentqueryПоиск инструментовget_instrument_by_figiПолучение инструмента по FIGIget_instrument_byINSTRUMENT_ID_TYPE_FIGIid_typeinstrumentget_popular_russian_sharesПолучение популярных российских акцийSBERGAZPLKOHROSNYNDXVTBRTATNGMKNPLZLNLMKPOLYAFKSPHORMTSSpopular_tickerssharetickercurrencyrubcountry_of_riskRUFIGITickerNameCurrencylotLotexchangeExchangesectorSectorCountryapply999SortOrder❌ Ошибка получения популярных акций: _get_fallback_datasearch_instruments_dataframeПоиск инструментов с возвратом DataFrameTypeapi_trade_available_flagAPI Trade Available❌ Ошибка поиска '': get_instruments_dataframeПолучение инструментов в виде DataFrame❌ Ошибка получения Резервные данныеСбер БанкГазпромBBG004730RP0ЛУКОЙЛBBG004731032РоснефтьBBG004731354ЯндексBBG006L8G4H1get_trading_schedulesfrom_dateto_dateПолучение расписания торгов23hour59minutesecondtrading_schedulesschedules❌ Ошибка получения расписания торгов: get_dividendsПолучение информации о дивидендахdividends❌ Ошибка получения дивидендов: get_accrued_interestsПолучение графика выплаты купонов по облигацииaccrued_interests❌ Ошибка получения купонов: get_futures_marginПолучение размера гарантийного обеспечения по фьючерсуmargin❌ Ошибка получения маржи: service� Тестирование InstrumentService...popular� Популярные акции: search� Поиск GAZP:  результатов# Сортируем по порядку популярных тикеров# Тест популярных акций# Тест поискаu'
Правильный сервис инструментов Tinkoff Invest API
'u'Сервис для работы со справочной информацией об инструментах'u'Создает клиент для запросов'u'Получение всех акций'u'Получение всех ETF'u'Получение всех облигаций'u'Получение всех валют'u'Поиск инструментов'u'Получение инструмента по FIGI'u'Получение популярных российских акций'b'SBER'u'SBER'b'GAZP'u'GAZP'b'LKOH'u'LKOH'b'ROSN'u'ROSN'b'YNDX'u'YNDX'b'VTBR'u'VTBR'b'TATN'u'TATN'b'GMKN'u'GMKN'b'PLZL'u'PLZL'b'NLMK'u'NLMK'b'POLY'u'POLY'b'AFKS'u'AFKS'b'PHOR'u'PHOR'b'MTSS'u'MTSS'b'ticker'u'ticker'b'currency'u'currency'b'rub'u'rub'b'country_of_risk'u'country_of_risk'b'RU'u'RU'b'FIGI'u'FIGI'b'Ticker'u'Ticker'b'Name'u'Name'b'Currency'u'Currency'b'Lot'u'Lot'b'Exchange'u'Exchange'b'sector'u'sector'b'Sector'u'Sector'b'Country'u'Country'b'SortOrder'u'SortOrder'u'❌ Ошибка получения популярных акций: 'u'Поиск инструментов с возвратом DataFrame'b'instrument_type'u'instrument_type'b'Type'u'Type'b'lot'u'lot'b'exchange'u'exchange'b'api_trade_available_flag'u'api_trade_available_flag'b'API Trade Available'u'API Trade Available'u'❌ Ошибка поиска ''b'': 'u'': 'u'Получение инструментов в виде DataFrame'u'❌ Ошибка получения 'u'Резервные данные'u'Сбер Банк'u'Газпром'b'BBG004730RP0'u'BBG004730RP0'u'ЛУКОЙЛ'b'BBG004731032'u'BBG004731032'u'Роснефть'b'BBG004731354'u'BBG004731354'u'Яндекс'b'BBG006L8G4H1'u'BBG006L8G4H1'u'Получение расписания торгов'u'❌ Ошибка получения расписания торгов: 'u'Получение информации о дивидендах'u'❌ Ошибка получения дивидендов: 'u'Получение графика выплаты купонов по облигации'u'❌ Ошибка получения купонов: 'u'Получение размера гарантийного обеспечения по фьючерсу'u'❌ Ошибка получения маржи: 'u'� Тестирование InstrumentService...'u'� Популярные акции: 'u'� Поиск GAZP: 'u' результатов'u'PythonScripts.trading_system.tbank_api.instrument_service'u'trading_system.tbank_api.instrument_service'u'tbank_api.instrument_service'u'instrument_service'InstrumentServiceFixedИсправленный сервис инструментов с обработкой ошибокget_shares_safeБезопасное получение акций с обработкой ошибок⚠️ Ошибка при обычном запросе: INSTRUMENT_STATUS_BASEinstrument_status❌ Критическая ошибка: get_popular_russian_shares_fixedПолучение популярных российских акций (безопасная версия)popular_dataMOEXsearch_instruments_safeБезопасный поиск инструментовinstruments_data❌ Ошибка поиска: � Тестирование исправленного сервиса...search_results� Результаты поиска: # Пробуем разные подходы# Пробуем альтернативный метод# Список популярных тикеров# Возвращаем тестовые данныеu'Исправленный сервис инструментов с обработкой ошибок'u'Безопасное получение акций с обработкой ошибок'u'⚠️ Ошибка при обычном запросе: 'u'❌ Критическая ошибка: 'u'Получение популярных российских акций (безопасная версия)'b'name'b'MOEX'u'MOEX'u'Безопасный поиск инструментов'b'figi'u'figi'u'❌ Ошибка поиска: 'u'� Тестирование исправленного сервиса...'u'� Результаты поиска: 'u'Documents.PythonScripts.trading_system.instrument_service_fixed'u'PythonScripts.trading_system.instrument_service_fixed'u'trading_system.instrument_service_fixed'u'instrument_service_fixed'tbank_api.instrument_serviceInstrumentsTabВкладка для работы с инструментамиcreate_widgetsload_popular_sharesСоздание интерфейсаmain_frame� Поиск инструментовsearch_frameПоиск:search_entry<Return>search_instrumentsНайтиТип:bondetffuturetype_comboNotebooknotebookshares_frame� Популярные акции� Результаты поискаetfs_frame� ETFbonds_frame� Облигацииcreate_shares_tablecreate_search_tablecreate_etfs_tablecreate_bonds_tablebutton_frameОбновить акцииЗагрузить ETFload_etfsЗагрузить облигацииload_bondsЭкспорт в CSVexport_to_csvСоздание таблицы для акцийTreeviewheadingsshares_treeheadingstretchСоздание таблицы для результатов поискаInstrument TypeAPI Tradesearch_tree120<Double-1>show_instrument_detailsСоздание таблицы для ETFFocus Typeetfs_treeСоздание таблицы для облигацийNominalbonds_treeЗагрузка популярных акцийget_childrenshares_dfЗагружено  популярных акцийНе удалось загрузить акции: ВниманиеВведите поисковый запросresults_dfДаНетРезультатыНайдено инструментов: Ошибка поиска: Загрузка ETFetfs_to_dataframeetfs_df ETFНе удалось загрузить ETF: Загрузка облигацийbonds_to_dataframebonds_df облигацийНе удалось загрузить облигации: eventПоказать детали инструмента - используем FIGItreeselectiondetailsshow_details_windowНе удалось найти детальную информацию для Не удалось получить детали: Показать детали инструментаget_instrument_by_ticker
Инструмент может быть недоступен через API"\n""Инструмент может быть недоступен через API"Экспорт данных в CSVto_csvpopular_shares.csvДанные экспортированы в popular_shares.csvОшибка экспорта: TkТест вкладки инструментовtabmainloop# Основной контейнер# Поиск# Тип инструмента для поиска# Вкладки для разных типов инструментов# Вкладка с популярными акциями# Вкладка с результатами поиска# Вкладка с ETF# Вкладка с облигациями# Создание таблиц для каждой вкладки# Кнопки управления# Treeview для акций - добавляем FIGI как скрытую колонку# Заголовки (FIGI скрываем)# Скрытая колонка# FIGI как первое значение (скрытое)# Берем только первые 100 для производительности# FIGI теперь первое значение# Тикер второе# Используем FIGI для поиска - это надежнее# Используем улучшенный метод поиска# Экспортируем популярные акции# Тестирование вкладкиu'Вкладка для работы с инструментами'u'Создание интерфейса'u'� Поиск инструментов'u'Поиск:'b'<Return>'u'<Return>'u'Найти'u'Тип:'b'share'u'share'b'bond'u'bond'b'etf'u'etf'b'future'u'future'u'� Популярные акции'u'� Результаты поиска'u'� ETF'u'� Облигации'u'Обновить акции'u'Загрузить ETF'u'Загрузить облигации'u'Экспорт в CSV'u'Создание таблицы для акций'b'headings'u'headings'u'Создание таблицы для результатов поиска'b'Instrument Type'u'Instrument Type'b'API Trade'u'API Trade'b'<Double-1>'u'<Double-1>'u'Создание таблицы для ETF'b'Focus Type'u'Focus Type'u'Создание таблицы для облигаций'b'Nominal'u'Nominal'u'Загрузка популярных акций'u'Загружено 'u' популярных акций'u'Не удалось загрузить акции: 'u'Внимание'u'Введите поисковый запрос'u'Да'u'Нет'u'Результаты'u'Найдено инструментов: 'u'Ошибка поиска: 'u'Загрузка ETF'b' ETF'u' ETF'u'Не удалось загрузить ETF: 'u'Загрузка облигаций'u' облигаций'u'Не удалось загрузить облигации: 'u'Показать детали инструмента - используем FIGI'b'instrument'u'instrument'u'Не удалось найти детальную информацию для 'u'Не удалось получить детали: 'u'Показать детали инструмента'u'
Инструмент может быть недоступен через API'u'Экспорт данных в CSV'b'popular_shares.csv'u'popular_shares.csv'u'Данные экспортированы в popular_shares.csv'u'Ошибка экспорта: 'u'Тест вкладки инструментов'u'trading_system.gui.tabs.instruments_tab'u'gui.tabs.instruments_tab'u'tabs.instruments_tab'u'instruments_tab'dirnameabspath__file__IMPORT_SUCCESS❌ Ошибка импорта InstrumentService: InstrumentsTabWorkingРабочая вкладка для инструментовshow_import_errorПоказать сообщение об ошибке импортаerror_frame❌ Ошибка загрузки модулей14Не удалось загрузить сервис инструментов.CENTERjustifyПерезагрузитьretry_importПопытка переимпортировать модули✅ Модуль успешно перезагружен❌ Ошибка импорта: Не удалось перезагрузить модуль: ❌ Другая ошибка: Ошибка при перезагрузке: � Инструменты Tinkoff APItitle_label✅ Сервис работаетstatus_label� Акции� Результатыdetails_frame� Деталиcreate_details_sectionПроверить APIТикерНазваниеЛотВалютаshow_instrument_details_from_sharesБиржаshow_instrument_details_from_searchСоздание секции с деталями инструментаdetails_text_frameДетальная информация:details_textdetails_buttonsОчиститьclear_detailsНе удалось загрузить акции акцийВведите запрос для поискаИнформацияИнструменты не найденыНайдено  инструментовПоказать детали инструмента из таблицы акцийshow_instrument_details_by_figiПоказать детали инструмента из результатов поискаПоказать детали инструмента по FIGIdisplay_instrument_detailsНе удалось получить деталиОшибка получения деталей: Отображение деталей инструмента� ДЕТАЛЬНАЯ ИНФОРМАЦИЯ:

                � Название: f"""
                �️ Тикер: 
                � FIGI: 
                � Валюта: 
                � Лот: 
                �️ Биржа: 
                � Класс-код: class_code

                ⚙️ Доступность:
                • Торговля через API: ✅ ДА❌ НЕТ
                • Покупка: buy_available_flag
                • Продажа: sell_available_flag
                min_price_incrementmin_price� Минимальный шаг цены: .selectОчистка деталей инструментаПроверка подключения к APIПодключение✅ API работает!
Загружено ⚠️ API отвечает, но не удалось загрузить данные❌ Ошибка подключения: instruments_export.csvЭкспортировано Инструменты900x600# Добавляем путь к корню проекта для импорта модулей# Импортируем правильный класс# Создаем сервис# Очищаем и пересоздаем интерфейс# Правильный вызов метода# FIGI в 5-й колонке# Используем правильный метод поиска# Используем правильный метод# Добавляем информацию о минимальном шаге цены если доступно# Простая проверка - пытаемся получить популярные акцииu'❌ Ошибка импорта InstrumentService: 'u'Рабочая вкладка для инструментов'u'Показать сообщение об ошибке импорта'u'❌ Ошибка загрузки модулей'u'Не удалось загрузить сервис инструментов.'u'Перезагрузить'u'Попытка переимпортировать модули'u'✅ Модуль успешно перезагружен'u'❌ Ошибка импорта: 'u'Не удалось перезагрузить модуль: 'u'❌ Другая ошибка: 'u'Ошибка при перезагрузке: 'u'� Инструменты Tinkoff API'u'✅ Сервис работает'u'� Акции'u'� Результаты'u'� Детали'u'Проверить API'u'Тикер'u'Название'u'Лот'u'Валюта'u'Биржа'u'Создание секции с деталями инструмента'u'Детальная информация:'u'Очистить'u'Не удалось загрузить акции'u' акций'u'Введите запрос для поиска'u'Информация'u'Инструменты не найдены'u'Найдено 'u' инструментов'u'Показать детали инструмента из таблицы акций'u'Показать детали инструмента из результатов поиска'u'Показать детали инструмента по FIGI'u'Не удалось получить детали'u'Ошибка получения деталей: 'u'Отображение деталей инструмента'u'� ДЕТАЛЬНАЯ ИНФОРМАЦИЯ:

                � Название: 'u'
                �️ Тикер: 'u'
                � FIGI: 'u'
                � Валюта: 'u'
                � Лот: 'u'
                �️ Биржа: 'u'
                � Класс-код: 'u'

                ⚙️ Доступность:
                • Торговля через API: 'u'✅ ДА'u'❌ НЕТ'u'
                • Покупка: 'u'
                • Продажа: 'b'
                'u'
                'b'min_price_increment'u'min_price_increment'b'units'u'units'b'nano'u'nano'u'� Минимальный шаг цены: 'b'.'u'.'u'Очистка деталей инструмента'u'Проверка подключения к API'u'Подключение'u'✅ API работает!
Загружено 'u'⚠️ API отвечает, но не удалось загрузить данные'u'❌ Ошибка подключения: 'b'instruments_export.csv'u'instruments_export.csv'u'Экспортировано 'u'Инструменты'b'900x600'u'900x600'u'trading_system.gui.tabs.instruments_tab_working'u'gui.tabs.instruments_tab_working'u'tabs.instruments_tab_working'u'instruments_tab_working'C:/Users/bezlp/AppData/Local/Programs/Python/Python313/Lib/jsonC:/Users/bezlp/AppData/Local/Programs/Python/Python313/Lib/logging
Главный файл для запуска торговой системы Сейкоты
Автоматически инициализирует все компоненты и запускает GUI
coreguiutilsgui.main_windowОсновная функция запуска программыStyleappКритическая ошибкаНе удалось запустить приложение: # ===== СЕКЦИЯ 1: ГЛАВНЫЙ ФАЙЛ ЗАПУСКА =====# Добавляем пути для импорта модулей# Создаем главное окно# Настраиваем стиль# Запускаем приложение - ПРАВИЛЬНЫЙ ВЫЗОВ# ✅ ПЕРЕДАЕМ root КАК АРГУМЕНТu'
Главный файл для запуска торговой системы Сейкоты
Автоматически инициализирует все компоненты и запускает GUI
'b'core'b'gui'b'utils'u'Основная функция запуска программы'u'Критическая ошибка'u'Не удалось запустить приложение: 'u'PythonScripts.trading_system.backup.main'u'PythonScripts.trading_system.backup'u'trading_system.backup.main'u'trading_system.backup'u'backup.main'u'backup'u'main'u'Documents.PythonScripts.trading_system.main'u'PythonScripts.trading_system.main'u'trading_system.main'matplotlibuseTkAggcore.trading_systemcore.visualizerutils.data_loaderutils.analyticsutils.error_handlergui.tabsTBANK_AVAILABLEtbank_api.tbank_gui✅ Модуль Т-банка API успешно загруженℹ️ Модуль Т-банка API не доступен: ⚠️ Ошибка при загрузке модуля Т-банка API: Графический интерфейс торговой системыТорговая система Сейкоты - Управление капиталом по Келли1400x900#f0f0f0systemdata_fileinitial_frisk_per_tradeuse_multi_timeframeuse_dynamic_riskuse_realisticselected_resultcurrent_api_datarisk_management_enabledstrategy_typesupertrend_atr_period3.0supertrend_multiplier2.0stop_loss_atrtake_profit_atrtrailing_stop_enabled2.5trailing_stop_atrbreak_even_enabled0.02max_position_risktime_stop_daystabssetup_guiinitialize_tabsИнициализация всех вкладокpricepositioncorrelationtradescompareЦены и сигналыПозицииДоходностиКорреляцииСделкиСравнениеРискиАнализ рисковНастройка графического интерфейса� Торговая система Сейкоты - Управление капиталом по Келли#2c3e50⚙️ Управление системойleft_frame� Результаты и аналитикаright_framesetup_left_panelsetup_right_panelНастройка левой панели управленияФайл с данными:file_browserНачальный капитал ($):Начальное f:Риск на сделку (%):Мультифреймовая стратегияДинамическое управление рискомРеалистичный режим (комиссии)�️ Включить риск-менеджментСтратегия:strategy_framestrategiesstrategy_comboon_strategy_changedПараметры Super Trendsupertrend_frameATR период:Множитель:�️ Управление рискамиrisk_frameStop Loss (ATR):Take Profit (ATR):Trailing StopTrailing (ATR):Break Even StopMax Position Risk (%):Time Stop (days):� Запустить тестrun_test� Обновить графикиupdate_all_tabs� Экспорт результатовexport_results❓ Справкаshow_helpℹ️ Информация о системеinfo_frameСистема реализует принципы Эда Сейкоты:
        • Управление капиталом по формуле Келли
        • Динамическая корректировка риска
        • Мультифреймовые торговые сигналы
        • Super Trend стратегия
        • Реалистичное моделирование издержекinfo_textНастройка правой панели результатовresult_frameon_result_selectedresults_combo� Т-банк API✅ Вкладка Т-банка API успешно добавлена❌ Ошибка создания вкладки Т-банка API: Обновление всех вкладокcurrent_resultupdate_tradesupdate_stats� Цены и сигналы� Капитал⚖️ Позиции� Доходности� Корреляции� Сделки� Статистика⚖️ Сравнение�️ Риски� Анализ рисковОбработчик смены стратегииbrowse_fileВыбор файла с даннымиЗапуск тестирования с поддержкой данных из APItbank_api_loaded_datahas_file_datahas_api_data❌ Выберите файл с данными или загрузите данные из API_validate_system_parametersapply_risk_parametersdata_sourceAPI Т-банка✅ Используются данные из API Т-банкафайла ❌ Данные не прошли валидацию:
Ошибка данных⚠️ Предупреждения валидации:
warning_msgaskyesnoМало данныхДля тестирования доступно только  записей.
Рекомендуется минимум 100-200 записей.

Продолжить тестирование?" записей.\n""Рекомендуется минимум 100-200 записей.\n\n""Продолжить тестирование?"current_capitalclear_caches_cache_stats_collect_test_parameterstest_paramsexecution_time_validate_simulation_results❌ Симуляция не вернула корректные результатыОшибка при анализе производительности: _generate_result_nameadd_simulation_resultupdate_results_combo_show_success_report_log_performance_stats❌ Файл не найден: ❌ Файл с данными пуст или имеет неправильный формат❌ Неожиданная ошибка при тестировании:
print_excВалидация параметров системы перед тестированиемchecksНачальный капитал должен быть положительнымПараметр Келли должен быть в диапазоне (0, 0.5]0.001Риск на сделку должен быть в диапазоне [0.1%, 10%]❌ Ошибки в параметрах системы:
check• Ошибка параметровСбор всех параметров для тестированияrealistic_modeВалидация результатов симуляцииattrscapital_valuesПоказать отчет об успешном завершении тестированияtrades_countcache_statsoverall_hit_ratiocache_efficiencyактивнаотключенаrisk_statusrisk_trades_info
• Сделок с рисками: ✅ Тестирование завершено успешно!

� Основные результаты:
• Сделок: "✅ Тестирование завершено успешно!\n\n""� Основные результаты:\n""• Сделок: "
• Финальный капитал: $"• Финальный капитал: $"
• Доходность: "• Доходность: "%
• Макс. просадка: "%\n""• Макс. просадка: "%
• Риск-менеджмент: "• Риск-менеджмент: "

⚡ Производительность:
• Время выполнения: "\n\n""⚡ Производительность:\n""• Время выполнения: " сек
• Эффективность кэша: " сек\n""• Эффективность кэша: "
• Обработано записей: "• Обработано записей: "

� Результат сохранен как: "� Результат сохранен как: "success_msgdata_statsЛогирование статистики производительностиГенерация имени для результата теста с указанием источника данныхMASTstrategy_mapUNKstrategyREALBASICmodeMULTISINGLEDYNSTATrisk_modeRISK_ONRISK_OFFrisk_mgmt%m%d_%H%Msource_prefixAPIAPI_файлаFILE_✅ Тестирование завершено успешно!

� Основные результаты:
• Источник данных: "• Источник данных: "
• Сделок: Обновление списка доступных результатовОбработчик выбора результатаОбновление всех вкладок - ОБНОВЛЕННАЯ ВЕРСИЯ С РИСКАМИЭкспорт результатовНет результатов для экспорта.txtText files*.txtЭКСПОРТ РЕЗУЛЬТАТОВ ТОРГОВОЙ СИСТЕМЫ СЕЙКОТЫВремя экспорта: Результат: get_detailed_statsРезультаты экспортированы в Ошибка при экспорте: Показ справки� ТОРГОВАЯ СИСТЕМА СЕЙКОТЫ - СПРАВКА

        ОСНОВНЫЕ ВОЗМОЖНОСТИ:

        � Управление капиталом по Келли
        • Автоматический расчет оптимального размера позиции
        • Использование дробного f для снижения риска
        • Динамическая корректировка на основе исторических данных

        ⚡ СТРАТЕГИИ:
        • Мультифреймовая (MA) - скользящие средние на трех таймфреймах
        • Super Trend - индикатор тренда с цветным кодированием

        �️ Управление рисками
        • Динамическая корректировка риска при просадках
        • Ограничение максимального размера позиции
        • Защита от чрезмерного риска

        � Реалистичное моделирование
        • Учет транзакционных издержек (комиссии)
        • Моделирование проскальзывания
        • Более точная оценка реальной доходности

        ИНСТРУКЦИЯ ПО ИСПОЛЬЗОВАНИЮ:

        1. Загрузите данные в формате CSV
        2. Выберите стратегию и настройте параметры
        3. Запустите тестирование
        4. Анализируйте результаты на графиках
        5. Сравнивайте разные стратегии

        ФОРМАТ ДАННЫХ:
        • CSV файл с разделителем ;
        • Обязательные колонки: DATE, CLOSE
        • Дополнительные: HIGH, LOW, OPEN, VOL

        ПАРАМЕТРЫ СИСТЕМЫ:
        • Начальный капитал - стартовый депозит
        • Начальное f - базовый параметр Келли
        • Риск на сделку - максимальный риск в %Справка по системе600x700Очистка всех кэшей для перезапуска_atr_cache_kelly_cache_position_size_cache_risk_management_cachecache_attrsattrcache_objatr_hitsatr_misseskelly_hitskelly_missesposition_hitsposition_missesrisk_hitsrisk_missesbreak_evenactive_ordersОтчет о производительностиcalculation_timevectorized_operations_data_points_processeddata_points_processedПолучить статистику кэширования для мониторинга производительностиtotal_hitstotal_missesatr_cachekelly_cacheposition_cacherisk_cachecache_sizesatrkellyВозвращает историю сделок в виде DataFrameПрименение параметров управления рисками к системеstop_loss_atr_multipliertake_profit_atr_multipliertrailing_stop_atr_multiplierbreak_even_stoprisk_paramsupdate_risk_parametersrun_test_optimizedОптимизированная версия запуска тестирования_quick_validate_inputs_load_and_validate_data_optimized_prepare_system_fast_collect_test_parameters_optimizedperf_countersimulate_trading_optimized_validate_results_fast_process_and_display_results_optimized_handle_optimized_errorБыстрая валидация входных данныхОптимизированная загрузка и валидация данныхНедостаточно данных для тестированияОтсутствует колонка 'close' в данныхОшибка загрузки данных: Оптимизированный сбор параметров тестирования# ===== СЕКЦИЯ 16: ГЛАВНОЕ ОКНО ПРИЛОЖЕНИЯ =====# Импорт основных компонентов# Импорт вкладок# � ИНИЦИАЛИЗАЦИЯ ПЕРЕМЕННОЙ ДО БЛОКА TRY# � ПЫТАЕМСЯ ИМПОРТИРОВАТЬ МОДУЛЬ Т-БАНКА# Инициализация системы# Переменные интерфейса# � ДЛЯ API ДАННЫХ# ... остальной код конструктора без изменений ...# � НОВАЯ ПЕРЕМЕННАЯ: Включение/отключение риск-менеджмента# Новые переменные для стратегий# � ПЕРЕМЕННЫЕ ДЛЯ УПРАВЛЕНИЯ РИСКАМИ# Словарь для хранения вкладок# Создание вкладок# Добавление вкладок в notebook - БЕЗ ЭМОДЗИ# Создаем основной фрейм# Настраиваем grid# Заголовок# Левая панель - Управление# Правая панель - Результаты# Настройка весов для растягивания# Загрузка данных# Параметры системы# Настройки стратегии# � НОВЫЙ ЧЕКБОКС: Включение риск-менеджмента# ВЫБОР СТРАТЕГИИ (смещаем на 1 строку вниз)# Комбобокс выбора стратегии# Параметры Super Trend (смещаем на 1 строку вниз)# �️ ПАРАМЕТРЫ УПРАВЛЕНИЯ РИСКАМИ (смещаем на 1 строку вниз)# Изначально скрываем параметры Super Trend# Кнопки управления (смещаем на 1 строку вниз)# Информация о системе (смещаем на 1 строку вниз)# ... остальной код info_frame без изменений ...# Выбор результата для отображения# Вкладки для разных типов аналитики# Инициализация всех вкладок# � ДОБАВЛЕНИЕ ВКЛАДКИ API ПОСЛЕ ОСНОВНЫХ ВКЛАДОК# Обновление графических вкладок# � ОБНОВЛЯЕМ ВКЛАДКУ АНАЛИЗА РИСКОВ - ВРЕМЕННО ЗАКОММЕНТИРУЕМ# if 'risk_analysis' in self.tabs:#     self.tabs['risk_analysis'].update_results_list()  # Обновляем список#     self.tabs['risk_analysis'].update_tab(current_result)  # Обновляем анализ# Добавление вкладок в notebook# ✅ ДОБАВИЛ self.notebook.add# === 1. ПРЕДВАРИТЕЛЬНАЯ ВАЛИДАЦИЯ ===# Проверка наличия файла с данными ИЛИ данных из API# Проверка параметров системы# � ПРИМЕНЕНИЕ ПАРАМЕТРОВ РИСКА ПЕРЕД ТЕСТИРОВАНИЕМ# === 2. ЗАГРУЗКА И ВАЛИДАЦИЯ ДАННЫХ ===# Если есть данные из API, используем их# Иначе загружаем из файла# ... остальной код метода без изменений ...# Расширенная валидация данных# Вывод предупреждений валидации# Проверка достаточности данных# === 3. ПОДГОТОВКА СИСТЕМЫ ===# Обновление параметров системы# � ОЧИСТКА ПРЕДЫДУЩИХ РЕЗУЛЬТАТОВ# Альтернативная очистка если метод еще не добавлен# === 4. СОБИРАЕМ ПАРАМЕТРЫ ТЕСТА ===# === 5. ЗАПУСК ОПТИМИЗИРОВАННОЙ СИМУЛЯЦИИ ===# Замер времени выполнения# Запуск симуляции с обработкой ошибок через декоратор# === 6. ВАЛИДАЦИЯ РЕЗУЛЬТАТОВ ===# === 7. АНАЛИЗ ПРОИЗВОДИТЕЛЬНОСТИ ===# === 8. СОХРАНЕНИЕ И ОТОБРАЖЕНИЕ РЕЗУЛЬТАТОВ ===# Генерация имени для результата с указанием источника данных# Добавление результатов в визуализатор# === 9. ОБНОВЛЕНИЕ ИНТЕРФЕЙСА ===# === 10. ФИНАЛЬНЫЙ ОТЧЕТ ===# === 11. СБОР СТАТИСТИКИ ===# Общая обработка ошибок# Дополнительная информация для отладки# Проверка начального капитала# Проверка параметра Келли# Проверка риска на сделку# Проверка на наличие ошибки в атрибутах DataFrame# Проверка корректности значений капитала# Статистика кэша# � ИНФОРМАЦИЯ О РИСК-МЕНЕДЖМЕНТЕ# Сообщение об успехе# Добавляем информацию об источнике данных# � ОБНОВЛЯЕМ ВКЛАДКУ РИСКОВ# Собираем все данные для экспорта# Добавляем статистику# Записываем в файл# Для словарей используем clear(), для других типов - переинициализация# Пересоздаем пустой словарь# Также сбрасываем статистику# � Очистка ордеров рисков# Отключаем риск-менеджмент# Добавить в класс TradingSystemGUI:# Быстрая предварительная валидация# Оптимизированная загрузка данных# Быстрая подготовка системы# Оптимизированный сбор параметров# Запуск симуляции с таймингом# Быстрая валидация результатов# Оптимизированный анализ и сохранение# Быстрая проверка минимальных требований# Предварительно вычисленные значенияb'TkAgg'u'TkAgg'u'✅ Модуль Т-банка API успешно загружен'u'ℹ️ Модуль Т-банка API не доступен: 'u'⚠️ Ошибка при загрузке модуля Т-банка API: 'u'Графический интерфейс торговой системы'u'Торговая система Сейкоты - Управление капиталом по Келли'b'1400x900'u'1400x900'b'#f0f0f0'u'#f0f0f0'u'Инициализация всех вкладок'b'price'u'price'b'position'u'position'b'correlation'u'correlation'b'trades'u'trades'b'compare'u'compare'b'risk'u'risk'u'Цены и сигналы'u'Позиции'u'Доходности'u'Корреляции'u'Сделки'u'Сравнение'u'Риски'u'Анализ рисков'u'Настройка графического интерфейса'b'10'u'10'u'� Торговая система Сейкоты - Управление капиталом по Келли'b'#2c3e50'u'#2c3e50'u'⚙️ Управление системой'u'� Результаты и аналитика'u'Настройка левой панели управления'u'Файл с данными:'u'Начальный капитал ($):'u'Начальное f:'u'Риск на сделку (%):'u'Мультифреймовая стратегия'u'Динамическое управление риском'u'Реалистичный режим (комиссии)'u'�️ Включить риск-менеджмент'u'Стратегия:'u'Параметры Super Trend'u'ATR период:'u'Множитель:'u'�️ Управление рисками'b'5'u'5'b'Stop Loss (ATR):'u'Stop Loss (ATR):'b'Take Profit (ATR):'u'Take Profit (ATR):'b'Trailing Stop'u'Trailing Stop'b'Trailing (ATR):'u'Trailing (ATR):'b'Break Even Stop'u'Break Even Stop'b'Max Position Risk (%):'u'Max Position Risk (%):'b'Time Stop (days):'u'Time Stop (days):'u'� Запустить тест'u'� Обновить графики'u'� Экспорт результатов'u'❓ Справка'u'ℹ️ Информация о системе'u'Система реализует принципы Эда Сейкоты:
        • Управление капиталом по формуле Келли
        • Динамическая корректировка риска
        • Мультифреймовые торговые сигналы
        • Super Trend стратегия
        • Реалистичное моделирование издержек'u'Настройка правой панели результатов'u'� Т-банк API'u'✅ Вкладка Т-банка API успешно добавлена'u'❌ Ошибка создания вкладки Т-банка API: 'u'Обновление всех вкладок'u'� Цены и сигналы'u'� Капитал'u'⚖️ Позиции'u'� Доходности'u'� Корреляции'u'� Сделки'u'� Статистика'u'⚖️ Сравнение'u'�️ Риски'u'� Анализ рисков'u'Обработчик смены стратегии'u'Выбор файла с данными'u'Запуск тестирования с поддержкой данных из API'b'tbank_api_loaded_data'u'tbank_api_loaded_data'b'current_api_data'u'current_api_data'u'❌ Выберите файл с данными или загрузите данные из API'u'API Т-банка'u'✅ Используются данные из API Т-банка'u'файла 'u'❌ Данные не прошли валидацию:
'u'Ошибка данных'u'⚠️ Предупреждения валидации:
'u'Мало данных'u'Для тестирования доступно только 'u' записей.
Рекомендуется минимум 100-200 записей.

Продолжить тестирование?'b'clear_caches'u'clear_caches'b'_cache_stats'u'_cache_stats'u'❌ Симуляция не вернула корректные результаты'u'Ошибка при анализе производительности: 'u'❌ Файл не найден: 'u'❌ Файл с данными пуст или имеет неправильный формат'u'❌ Неожиданная ошибка при тестировании:
'u'Валидация параметров системы перед тестированием'u'Начальный капитал должен быть положительным'u'Параметр Келли должен быть в диапазоне (0, 0.5]'u'Риск на сделку должен быть в диапазоне [0.1%, 10%]'u'❌ Ошибки в параметрах системы:
'u'• 'u'Ошибка параметров'u'Сбор всех параметров для тестирования'b'initial_f'u'initial_f'b'risk_per_trade'u'risk_per_trade'b'use_multi_timeframe'u'use_multi_timeframe'b'use_dynamic_risk'u'use_dynamic_risk'b'realistic_mode'u'realistic_mode'b'strategy_type'u'strategy_type'b'supertrend_atr_period'u'supertrend_atr_period'b'supertrend_multiplier'u'supertrend_multiplier'u'Валидация результатов симуляции'b'attrs'u'attrs'u'Показать отчет об успешном завершении тестирования'b'overall_hit_ratio'u'overall_hit_ratio'u'активна'u'отключена'u'
• Сделок с рисками: 'u'✅ Тестирование завершено успешно!

� Основные результаты:
• Сделок: 'u'
• Финальный капитал: $'u'
• Доходность: 'u'%
• Макс. просадка: 'u'%
• Риск-менеджмент: 'u'

⚡ Производительность:
• Время выполнения: 'u' сек
• Эффективность кэша: 'u'
• Обработано записей: 'u'

� Результат сохранен как: 'u'Логирование статистики производительности'u'Генерация имени для результата теста с указанием источника данных'b'MA'u'MA'b'ST'u'ST'b'UNK'u'UNK'b'REAL'u'REAL'b'BASIC'u'BASIC'b'MULTI'u'MULTI'b'SINGLE'u'SINGLE'b'DYN'u'DYN'b'STAT'u'STAT'b'RISK_ON'u'RISK_ON'b'RISK_OFF'u'RISK_OFF'b'%m%d_%H%M'u'%m%d_%H%M'b'API'u'API'b'API_'u'API_'u'файла'b'FILE_'u'FILE_'u'✅ Тестирование завершено успешно!

� Основные результаты:
• Источник данных: 'u'
• Сделок: 'u'Обновление списка доступных результатов'u'Обработчик выбора результата'u'Обновление всех вкладок - ОБНОВЛЕННАЯ ВЕРСИЯ С РИСКАМИ'u'Экспорт результатов'u'Нет результатов для экспорта'b'.txt'u'.txt'b'Text files'u'Text files'b'*.txt'u'*.txt'u'ЭКСПОРТ РЕЗУЛЬТАТОВ ТОРГОВОЙ СИСТЕМЫ СЕЙКОТЫ'u'Время экспорта: 'u'Результат: 'u'Результаты экспортированы в 'u'Ошибка при экспорте: 'u'Показ справки'u'� ТОРГОВАЯ СИСТЕМА СЕЙКОТЫ - СПРАВКА

        ОСНОВНЫЕ ВОЗМОЖНОСТИ:

        � Управление капиталом по Келли
        • Автоматический расчет оптимального размера позиции
        • Использование дробного f для снижения риска
        • Динамическая корректировка на основе исторических данных

        ⚡ СТРАТЕГИИ:
        • Мультифреймовая (MA) - скользящие средние на трех таймфреймах
        • Super Trend - индикатор тренда с цветным кодированием

        �️ Управление рисками
        • Динамическая корректировка риска при просадках
        • Ограничение максимального размера позиции
        • Защита от чрезмерного риска

        � Реалистичное моделирование
        • Учет транзакционных издержек (комиссии)
        • Моделирование проскальзывания
        • Более точная оценка реальной доходности

        ИНСТРУКЦИЯ ПО ИСПОЛЬЗОВАНИЮ:

        1. Загрузите данные в формате CSV
        2. Выберите стратегию и настройте параметры
        3. Запустите тестирование
        4. Анализируйте результаты на графиках
        5. Сравнивайте разные стратегии

        ФОРМАТ ДАННЫХ:
        • CSV файл с разделителем ;
        • Обязательные колонки: DATE, CLOSE
        • Дополнительные: HIGH, LOW, OPEN, VOL

        ПАРАМЕТРЫ СИСТЕМЫ:
        • Начальный капитал - стартовый депозит
        • Начальное f - базовый параметр Келли
        • Риск на сделку - максимальный риск в %'u'Справка по системе'b'600x700'u'600x700'u'Очистка всех кэшей для перезапуска'b'_atr_cache'u'_atr_cache'b'_kelly_cache'u'_kelly_cache'b'_position_size_cache'u'_position_size_cache'b'_risk_management_cache'u'_risk_management_cache'b'atr_hits'u'atr_hits'b'atr_misses'u'atr_misses'b'kelly_hits'u'kelly_hits'b'kelly_misses'u'kelly_misses'b'position_hits'u'position_hits'b'position_misses'u'position_misses'b'risk_hits'u'risk_hits'b'risk_misses'u'risk_misses'b'break_even'u'break_even'u'Отчет о производительности'b'calculation_time'u'calculation_time'b'cache_efficiency'u'cache_efficiency'b'vectorized_operations'u'vectorized_operations'b'_data_points_processed'u'_data_points_processed'b'data_points_processed'u'data_points_processed'u'Получить статистику кэширования для мониторинга производительности'b'atr_cache'u'atr_cache'b'kelly_cache'u'kelly_cache'b'position_cache'u'position_cache'b'risk_cache'u'risk_cache'b'cache_sizes'u'cache_sizes'b'atr'u'atr'b'kelly'u'kelly'b'hit_ratios'u'hit_ratios'b'total_hits'u'total_hits'b'total_misses'u'total_misses'u'Возвращает историю сделок в виде DataFrame'u'Применение параметров управления рисками к системе'b'stop_loss_atr_multiplier'u'stop_loss_atr_multiplier'b'take_profit_atr_multiplier'u'take_profit_atr_multiplier'b'trailing_stop_enabled'u'trailing_stop_enabled'b'trailing_stop_atr_multiplier'u'trailing_stop_atr_multiplier'b'break_even_stop'u'break_even_stop'b'max_position_risk'u'max_position_risk'b'time_stop_days'u'time_stop_days'b'risk_management_enabled'u'risk_management_enabled'u'Оптимизированная версия запуска тестирования'u'Быстрая валидация входных данных'u'Оптимизированная загрузка и валидация данных'u'Недостаточно данных для тестирования'u'Отсутствует колонка 'close' в данных'u'Ошибка загрузки данных: 'u'Оптимизированный сбор параметров тестирования'u'PythonScripts.trading_system.backup.main_window'u'trading_system.backup.main_window'u'backup.main_window'u'main_window'gui.tabs.instruments_tab_workingINSTRUMENTS_AVAILABLE✅ Рабочая вкладка инструментов загруженаℹ️ Рабочая вкладка инструментов не доступна: instruments_tab� Инструменты✅ Вкладка инструментов успешно добавлена❌ Ошибка добавления вкладки инструментов: � ТОРГОВАЯ СИСТЕМА СЕЙКОТЫ - СПРАВКА

        ОСНОВНЫЕ ВОЗМОЖНОСТИ:

        � Управление капиталом по Келли
        • Автоматический расчет оптимального размера позиции
        • Использование дробного f для снижения риска
        • Динамическая корректировка на основе исторических данных

        ⚡ СТРАТЕГИИ:
        • Мультифреймовая (MA) - скользящие средние на трех таймфреймах
        • Super Trend - индикатор тренда с цветным кодированием

        �️ Управление рисками
        • Динамическая корректировка риска при просадках
        • Ограничение максимального размера позиции
        • Защита от чрезмерного риска

        � Реалистичное моделирование
        • Учет транзакционных издержек (комиссии)
        • Моделирование проскальзывания
        • Более точная оценка реальной доходности

        ИНСТРУКЦИЯ ПО ИСПОЛЬЗОВАНИЮ:

        1. Загрузите данные в формата CSV
        2. Выберите стратегию и настройте параметры
        3. Запустите тестирование
        4. Анализируйте результаты на графиках
        5. Сравнивайте разные стратегии

        ФОРМАТ ДАННЫХ:
        • CSV файл с разделителем ;
        • Обязательные колонки: DATE, CLOSE
        • Дополнительные: HIGH, LOW, OPEN, VOL

        ПАРАМЕТРЫ СИСТЕМЫ:
        • Начальный капитал - стартовый депозит
        • Начальное f - базовый параметр Келли
        • Риск на сделку - максимальный риск в %Ошибка применения параметров риска: # ✅ ДОБАВЬТЕ ПОСЛЕ СУЩЕСТВУЮЩИХ ИМПОРТОВ:# � Инициализация атрибутов для избежания ошибок Pylint# ✅ ДОБАВЛЯЕМ ВКЛАДКУ ИНСТРУМЕНТОВ# Используем токен из Tinkoff API# ВЫБОР СТРАТЕГИИ# Параметры Super Trend# �️ ПАРАМЕТРЫ УПРАВЛЕНИЯ РИСКАМИ# Информация о системе# === 5. ЗАПУСК СИМУЛЯЦИИ ===u'✅ Рабочая вкладка инструментов загружена'u'ℹ️ Рабочая вкладка инструментов не доступна: 'u'� Инструменты'u'✅ Вкладка инструментов успешно добавлена'u'❌ Ошибка добавления вкладки инструментов: 'u'� ТОРГОВАЯ СИСТЕМА СЕЙКОТЫ - СПРАВКА

        ОСНОВНЫЕ ВОЗМОЖНОСТИ:

        � Управление капиталом по Келли
        • Автоматический расчет оптимального размера позиции
        • Использование дробного f для снижения риска
        • Динамическая корректировка на основе исторических данных

        ⚡ СТРАТЕГИИ:
        • Мультифреймовая (MA) - скользящие средние на трех таймфреймах
        • Super Trend - индикатор тренда с цветным кодированием

        �️ Управление рисками
        • Динамическая корректировка риска при просадках
        • Ограничение максимального размера позиции
        • Защита от чрезмерного риска

        � Реалистичное моделирование
        • Учет транзакционных издержек (комиссии)
        • Моделирование проскальзывания
        • Более точная оценка реальной доходности

        ИНСТРУКЦИЯ ПО ИСПОЛЬЗОВАНИЮ:

        1. Загрузите данные в формата CSV
        2. Выберите стратегию и настройте параметры
        3. Запустите тестирование
        4. Анализируйте результаты на графиках
        5. Сравнивайте разные стратегии

        ФОРМАТ ДАННЫХ:
        • CSV файл с разделителем ;
        • Обязательные колонки: DATE, CLOSE
        • Дополнительные: HIGH, LOW, OPEN, VOL

        ПАРАМЕТРЫ СИСТЕМЫ:
        • Начальный капитал - стартовый депозит
        • Начальное f - базовый параметр Келли
        • Риск на сделку - максимальный риск в %'b'update_risk_parameters'u'update_risk_parameters'u'Ошибка применения параметров риска: 'u'PythonScripts.trading_system.gui.main_window'u'trading_system.gui.main_window'u'gui.main_window'
Модуль для работы с API Московской Биржи
requestsКласс для работы с API Московской Биржиhttps://iss.moex.com/issbase_urlSessionsession_setup_sessionНастройка HTTP сессииheadersTradingSystem/1.0User-Agent
        Получение исторических данных по инструменту
        
        Parameters:
        -----------
        symbol : str
            Тикер инструмента (например: 'SBER', 'GAZP')
        start_date : str
            Начальная дата в формате 'YYYY-MM-DD'
        end_date : str, optional
            Конечная дата в формате 'YYYY-MM-DD'
        timeframe : str
            Таймфрейм данных ('D' - день, 'H1' - час, 'H4' - 4 часа, 'W' - неделя)
            
        Returns:
        --------
        pd.DataFrame
            Исторические данные
        _detect_market_and_boardboard240interval_map/engines/stock/markets//boards//securities//candles.jsonendpointfromtillparamsЗапрос данных МБ для ) с  по raise_for_statusНет данных МБ для  за период beginresult_df_fill_missing_data свечей МБ для  (таймфрейм: Ошибка получения данных МБ для 
        Заполнение пропущенных данных для внутридневных таймфреймов
        
        Parameters:
        -----------
        data : pd.DataFrame
            Исходные данные
        timeframe : str
            Таймфрейм данных
            
        Returns:
        --------
        pd.DataFrame
            Данные с заполненными пропусками
        1H4H1Dfreq_mapTimestampTimedeltaend_timefull_indexreindexsubset
        Получение текущих котировок
        
        Parameters:
        -----------
        symbols : List[str]
            Список тикеров
            
        Returns:
        --------
        pd.DataFrame
            Текущие котировки
        quotes_datamarketdataquotelast_pricechange27Ошибка получения котировки МБ для 
        Получение списка инструментов
        
        Parameters:
        -----------
        market : str
            Рынок ('shares' - акции, 'bonds' - облигации, 'futures' - фьючерсы)
            
        Returns:
        --------
        pd.DataFrame
            Список инструментов
        TQBRTQOBRFUDSNDXboard_map/securities.jsonlimitsecuritiesНет данных по инструментам для рынка SECIDSHORTNAMESECNAMELOTSIZElot_sizeCURRENCYRUBSTATUSA инструментов МБ (рынок: Ошибка получения списка инструментов МБ: get_available_markets
        Получение списка доступных рынков
        
        Returns:
        --------
        List[Dict]
            Список рынков
        АкцииОсновной рынок акцийdescriptionОблигацииОблигации федерального займаФьючерсыСрочный рынокИндексыФондовые индексыmarkets
        Определение рынка и борда по тикеру
        
        Parameters:
        -----------
        symbol : str
            Тикер инструмента
            
        Returns:
        --------
        tuple
            (рынок, борд)
        NVTKstock_symbolsSiRIBRGZGDfutures_symbolsIMOEXRTSIRGBIindex_symbols
        Проверка подключения к API МБ
        
        Returns:
        --------
        bool
            True если подключение успешно
        /engines.jsonstatus_code# tbank_api/moex_api.py# Определяем рынок и борд# Конвертация таймфреймов для МБ API# День# 1 час# 4 часа# Неделя# Проверяем наличие данных# Создаем DataFrame# Преобразуем даты# Стандартизируем колонки# Обработка пропусков для часовых данных# Определяем частоту# Создаем полный временной ряд (только в рабочие часы)# Для внутридневных данных - только торговые часы (10:00-18:45 МСК)# 10:00 МСК = 7:00 UTC# 18:45 МСК = 15:45 UTC# Реиндексируем данные# Заполняем пропущенные значения (forward fill для OHLC, 0 для объема)# Удаляем строки где все значения NaN (в начале ряда)# Безопасное извлечение данных (индексы могут отличаться)# Определяем борд для рынка# Безопасное создание результата# Добавляем доступные колонки# Фильтруем только активные инструменты# Для акций# Для фьючерсов# Для индексов# По умолчанию - акции основного рынкаu'
Модуль для работы с API Московской Биржи
'u'Класс для работы с API Московской Биржи'b'https://iss.moex.com/iss'u'https://iss.moex.com/iss'u'Настройка HTTP сессии'b'TradingSystem/1.0'u'TradingSystem/1.0'b'User-Agent'u'User-Agent'u'
        Получение исторических данных по инструменту
        
        Parameters:
        -----------
        symbol : str
            Тикер инструмента (например: 'SBER', 'GAZP')
        start_date : str
            Начальная дата в формате 'YYYY-MM-DD'
        end_date : str, optional
            Конечная дата в формате 'YYYY-MM-DD'
        timeframe : str
            Таймфрейм данных ('D' - день, 'H1' - час, 'H4' - 4 часа, 'W' - неделя)
            
        Returns:
        --------
        pd.DataFrame
            Исторические данные
        'b'24'u'24'b'60'u'60'b'240'u'240'b'7'u'7'b'/engines/stock/markets/'u'/engines/stock/markets/'b'/boards/'u'/boards/'b'/securities/'u'/securities/'b'/candles.json'u'/candles.json'b'from'u'from'b'till'u'till'b'interval'u'interval'u'Запрос данных МБ для 'u') с 'u' по 'b'data'u'data'u'Нет данных МБ для 'u' за период 'b'begin'u'begin'u' свечей МБ для 'u' (таймфрейм: 'u'Ошибка получения данных МБ для 'u'
        Заполнение пропущенных данных для внутридневных таймфреймов
        
        Parameters:
        -----------
        data : pd.DataFrame
            Исходные данные
        timeframe : str
            Таймфрейм данных
            
        Returns:
        --------
        pd.DataFrame
            Данные с заполненными пропусками
        'b'1H'u'1H'b'4H'u'4H'b'1D'u'1D'u'
        Получение текущих котировок
        
        Parameters:
        -----------
        symbols : List[str]
            Список тикеров
            
        Returns:
        --------
        pd.DataFrame
            Текущие котировки
        'b'marketdata'u'marketdata'b'change'u'change'u'Ошибка получения котировки МБ для 'u'
        Получение списка инструментов
        
        Parameters:
        -----------
        market : str
            Рынок ('shares' - акции, 'bonds' - облигации, 'futures' - фьючерсы)
            
        Returns:
        --------
        pd.DataFrame
            Список инструментов
        'b'TQBR'u'TQBR'b'TQOB'u'TQOB'b'RFUD'u'RFUD'b'SNDX'u'SNDX'b'index'u'index'b'/securities.json'u'/securities.json'b'limit'u'limit'b'securities'u'securities'u'Нет данных по инструментам для рынка 'b'SECID'u'SECID'b'SHORTNAME'u'SHORTNAME'b'SECNAME'u'SECNAME'b'LOTSIZE'u'LOTSIZE'b'lot_size'u'lot_size'b'CURRENCY'u'CURRENCY'b'RUB'u'RUB'b'STATUS'u'STATUS'b'A'u'A'u' инструментов МБ (рынок: 'u'Ошибка получения списка инструментов МБ: 'u'
        Получение списка доступных рынков
        
        Returns:
        --------
        List[Dict]
            Список рынков
        'b'code'u'code'u'Акции'u'Основной рынок акций'b'description'u'description'u'Облигации'u'Облигации федерального займа'u'Фьючерсы'u'Срочный рынок'u'Индексы'u'Фондовые индексы'u'
        Определение рынка и борда по тикеру
        
        Parameters:
        -----------
        symbol : str
            Тикер инструмента
            
        Returns:
        --------
        tuple
            (рынок, борд)
        'b'NVTK'u'NVTK'b'Si'u'Si'b'RI'u'RI'b'BR'u'BR'b'GZ'u'GZ'b'GD'u'GD'b'IMOEX'u'IMOEX'b'RTSI'u'RTSI'b'RGBI'u'RGBI'u'
        Проверка подключения к API МБ
        
        Returns:
        --------
        bool
            True если подключение успешно
        'b'/engines.json'u'/engines.json'u'PythonScripts.trading_system.tbank_api.moex_api'u'trading_system.tbank_api.moex_api'u'tbank_api.moex_api'u'moex_api'
Оптимизированный менеджер с расширенной аналитикой
cache_optimizeradvanced_analyticssmart_predictorSmartPredictorauto_optimizerOptimizedTBankDataManagerОптимизированный менеджер с расширенной аналитикойapicacheoptimizeravailable_symbolscache_hitscache_missesoptimization_savings_mb✅ Оптимизированный менеджер с AI-предсказаниями инициализированget_historical_data_with_cacheuse_cache
        Улучшенная загрузка данных с расширенной аналитикой
        from_dtto_dt_get_figi_by_tickerFIGI не найден для ✅ Данные из кэша:  записей)� Загрузка из API: api_dataoptimized_datasavings� Экономия памяти:  MB для get_performance_statsБазовая статистика производительностиmemory_savings_mbavg_savings_per_requestДетальная аналитика с расширенными метрикамиadvanced_trendsОшибка получения расширенной аналитики: psutil недоступен, использование памяти не отслеживаетсяactive_alerts_countadvancedoptimization_levelactivereal_time_metricsfeaturesget_advanced_analyticsПолная расширенная аналитикаbasic_statscache_infoПодтвердить алерт в расширенной аналитикеget_instruments_with_cacheforce_refreshПолучение списка инструментов с кэшированиемload_instrumentscached_instruments✅ Инструменты из кэша: � Загрузка инструментов из API: api_instrumentssave_instrumentsget_available_symbols_cachedПолучение списка доступных символов с кэшированиемupdate_data_incrementallyИнкрементальное обновление данныхfresh_dataНет свежих данных для updated_datasearch_instruments_cachedПоиск инструментов в кэшированном спискеsymbols_dfcontainscasenamaskget_cache_infoИнформация о состоянии кэшаОчистка всего кэшаis_symbol_availableПроверка доступности символаПредзагрузка данных✅ Предзагружено  записей для get_prediction_statsСтатистика предсказанийget_optimization_infoИнформация об оптимизацияхauto_optimization_enabledoptimization_history_count# tbank_api/optimized_data_manager.py# ✅ ПРАВИЛЬНЫЙ ИМПОРТ PSUTIL С ОБРАБОТКОЙ ОШИБОК# ✅ ИНИЦИАЛИЗИРУЕМ РАСШИРЕННУЮ АНАЛИТИКУ# ✅ ДОБАВЛЯЕМ УМНЫЙ ПРЕДСКАЗАТЕЛЬ И АВТООПТИМИЗАТОР# Конвертация дат# Получаем FIGI# Пытаемся загрузить из кэша# Загружаем из API# Безопасная оптимизация данных# Логируем экономию места# Сохраняем оптимизированные данные в кэш# ===== РАСШИРЕННАЯ АНАЛИТИКА =====# Безопасное получение расширенной аналитики# ===== СОВМЕСТИМОСТЬ С СУЩЕСТВУЮЩИМ КОДОМ =====# ДОБАВЬТЕ НОВЫЕ МЕТОДЫ:u'
Оптимизированный менеджер с расширенной аналитикой
'u'Оптимизированный менеджер с расширенной аналитикой'b'cache_hits'u'cache_hits'b'cache_misses'u'cache_misses'b'optimization_savings_mb'u'optimization_savings_mb'u'✅ Оптимизированный менеджер с AI-предсказаниями инициализирован'u'
        Улучшенная загрузка данных с расширенной аналитикой
        'u'FIGI не найден для 'u'✅ Данные из кэша: 'u' записей)'u'� Загрузка из API: 'u'� Экономия памяти: 'u' MB для 'u'Базовая статистика производительности'b'memory_savings_mb'u'memory_savings_mb'b'avg_savings_per_request'u'avg_savings_per_request'u'Детальная аналитика с расширенными метриками'u'Ошибка получения расширенной аналитики: 'u'psutil недоступен, использование памяти не отслеживается'b'active_alerts_count'u'active_alerts_count'b'advanced'u'advanced'b'optimization_level'u'optimization_level'b'active'u'active'b'advanced_analytics'b'real_time_metrics'u'real_time_metrics'b'features'u'features'u'Полная расширенная аналитика'b'basic_stats'u'basic_stats'b'cache_info'u'cache_info'b'advanced_trends'u'advanced_trends'b'metrics_history'u'metrics_history'u'Подтвердить алерт в расширенной аналитике'u'Получение списка инструментов с кэшированием'u'✅ Инструменты из кэша: 'u'� Загрузка инструментов из API: 'u'Получение списка доступных символов с кэшированием'u'Инкрементальное обновление данных'u'Нет свежих данных для 'u'Поиск инструментов в кэшированном списке'u'Информация о состоянии кэша'u'Очистка всего кэша'u'Проверка доступности символа'u'Предзагрузка данных'u'✅ Предзагружено 'u' записей для 'u'Статистика предсказаний'u'Информация об оптимизациях'b'auto_optimization_enabled'u'auto_optimization_enabled'b'optimization_history_count'u'optimization_history_count'b'last_optimization'u'last_optimization'u'PythonScripts.trading_system.tbank_api.optimized_data_manager'u'trading_system.tbank_api.optimized_data_manager'u'tbank_api.optimized_data_manager'u'optimized_data_manager'C:/Users/bezlp/AppData/Local/Programs/Python/Python313/Lib/pathlib
Вкладка для отображения размера позиций и управления рисками
Визуализация параметров Келли и уровней риска
Вкладка позиций и управления рискамиОбновить график позиций и рисков с улучшенной диагностикойax3Размер позицииpurpleРазмер торговой позицииРазмер позиции ($)kelly_cleanДоля Келли f (%)avg_fСреднее: Динамика параметра Келли frisk_cleanУровень рискаrisk_changesrisk_changes_cleanКорректировки рискаДинамика уровня рискаРиск (%)# ===== СЕКЦИЯ 9: ВКЛАДКА ПОЗИЦИЙ И УПРАВЛЕНИЯ РИСКАМИ =====# Создание графика с несколькими осями Y# График 1: Размер позиции# График 2: Параметр Келли f (ИСПРАВЛЕННЫЙ)# Ограничиваем разумные значения# Среднее значение# Ограничения оси Y для читаемости# 0-20% для лучшей визуализации# График 3: Уровень риска# Динамика рискаu'
Вкладка для отображения размера позиций и управления рисками
Визуализация параметров Келли и уровней риска
'u'Вкладка позиций и управления рисками'u'Обновить график позиций и рисков с улучшенной диагностикой'u'Размер позиции'b'purple'u'purple'u'Размер торговой позиции'u'Размер позиции ($)'u'Доля Келли f (%)'u'Среднее: 'u'Динамика параметра Келли f'u'Уровень риска'u'Корректировки риска'u'Динамика уровня риска'u'Риск (%)'u'trading_system.gui.tabs.position_tab'u'gui.tabs.position_tab'u'tabs.position_tab'u'position_tab'utils.supertrendВкладка цен и торговых сигналовcurrent_figlast_result_name� Автомасштабauto_scale� Сохранитьsave_plotВременная шкала:timeframe_var1W1M3M6M1Ytimeframe_comboon_timeframe_changeshow_supertrendSuperTrendrefresh_current_plotshow_trade_signalsСигналыshow_entries_exitsВходы/Выходыshow_rsiRSIПериод: - | Свечей: -date_info_labelМасштаб: Автоzoom_info_labelsetup_mouse_eventsНастройка обработчиков событий мыши для графикаon_mouse_moveОбработка движения мыши для показа датыinaxesfig_canvasnum2datexdata%d.%m.%Y %H:%Mx_dateydatay_valueДата:  | Цена: on_zoomОбновление информации после масштабированияget_xlimxlimМасштаб: Обработка изменения временной шкалыАвтоматическое масштабирование графикаСохранить текущий график в файлtrading_chart_.pngsavefigdpitightbbox_inches✅ График сохранен: ❌ Ошибка сохранения: Обновить текущий график с новыми настройкамиdetect_strategy_typeОпределить тип торговой стратегии по даннымsupertrend_directionsupertrend_lineМультифреймовая MArsirsi_oversoldRSI StrategyБазоваяsetup_time_axisdatesНастройка временной шкалыissubdtypedatetime64yearis_datetime_indexdays_range%d.%m
%H:%M%d.%mWeekdayLocatorbyweekday90%b %YMonthLocator⚠️ Ошибка в автоформатировании дат: %H:%Mtimeframe_formatslocator⚠️ Ошибка в ручном форматировании дат: Индекс данныхFuncFormattersetpget_majorticklabelstick_paramswhichlabelsizecalculate_technical_indicatorsРасчет технических индикаторов для отображенияindicatorsatr_periodmultiplier✅ Super Trend рассчитан❌ Ошибка расчета Super Trend: ✅ RSI рассчитан❌ Ошибка расчета RSI: pricesperiodРасчет RSI индикатораdiffdeltawheregainrsplot_price_and_positionsПостроение графика цен и позицийstrategy_nameЦены и торговые позиции (pad_plot_position_backgroundЦена закрытия1.5_plot_supertrend_plot_moving_averages_plot_trade_signalsЦена ($)upper leftautoscaleenablebothplot_trading_signalsПостроение графика торговых сигналовТорговые сигналы и индикаторыТорговый сигналcombined_signalКомбинированный сигналtrend_axistrend_strengthtwinxСила трендаlabelpadupper rightrsi_axisrsi_dataspinesset_positionoutward70lower rightget_ylimcurrent_ylim1.10.98bbox_to_anchor� ДИАГНОСТИКА СИЛЫ ТРЕНДА:   Положение оси: get_position   Y limits силы тренда:    Подпись Y: 'get_ylabelyaxisget_labelylabel_obj   Отступ подписи:    Выравнивание подписи: get_ha, get_va   Положение оси RSI:    Общие границы ax2:    X limits основного графика:    Y limits основного графика: Обновить график цен и сигналовНет данных для отображенияto_pydatetime1970⚠️ Обнаружены даты 1970 года - используем числовой индексRangeIndexПериод: date_infoПериод: индексы Период: неизвестноtotal_candles | Свечей: 1.2height_ratiosgridspec_kwsubplots_adjust0.070.060.96top0.2hspacempl_connectmotion_notify_eventbutton_release_event✅ График обновлен: , SuperTrend: ", ""SuperTrend: ", Сигналы: "Сигналы: ", Входы/Выходы: "Входы/Выходы: ", RSI: "RSI: ", Временная шкала: "Временная шкала: "Границы ax2: X limits: Y limits: � ДИАГНОСТИКА ПОСЛЕ ПОСТРОЕНИЯ:   Границы ax2: figure   Доп.ось      Подпись: Фоновая подсветка торговых позицийposition_changespos_typeaxvspan0.15LONGSHORTsupertrend_dataОтрисовка SuperTrend индикатораdirectionchange_pointssegment_directionarangeОтрисовка скользящих среднихma_columnsma_colorsMA БыстраяMA МедленнаяMA Трендma_labelsma_colОтрисовка точек входа и выходаentry_signalentry_signalsentry_dateslime^markerВходedgecolorsexit_signalexit_signalsexit_datesvВыход# ===== СЕКЦИЯ 7: ВКЛАДКА ЦЕН И ТОРГОВЫХ СИГНАЛОВ =====# Основное место для графика# Панель управления# Левая часть - управление масштабом# Правая часть - настройки отображения# Настройки временной шкалы# Настройки отображения сигналов# Панель информации о датах# Основной фрейм с графиком# Привязка событий мыши для информации о датах# Преобразование координат в дату# Обновление информации в реальном времени# Проверяем, что dates - это datetime объекты# Автоматическое определение формата в зависимости от диапазона дат# Если это не timedelta, используем длину массива как приближение# предполагаем часовые данные# Неделя или меньше - показывать дни и время# До месяца - показывать дни# До 3 месяцев - показывать недели# Более 3 месяцев - показывать месяцы# Используем базовое форматирование# Ручной выбор формата# Если это не datetime индекс, используем числовые метки# Убираем форматирование дат для числового индекса# Поворачиваем даты для лучшей читаемости# Добавляем сетку# SuperTrend (только если включен)# RSI (только если включен)# Настройка временной шкалы# 1. ФОНОВАЯ ПОДСВЕТКА ПОЗИЦИЙ# 2. ОСНОВНАЯ ЦЕНА ЗАКРЫТИЯ# 3. SUPER TREND ИНДИКАТОР (только если включен)# 4. СКОЛЬЗЯЩИЕ СРЕДНИЕ# 5. ТОРГОВЫЕ СИГНАЛЫ (точки входа/выхода) - только если включены# Настройка внешнего вида# Включаем автоматическое масштабирование# Основной торговый сигнал# Комбинированный сигнал# Сила тренда# RSI индикатор# Смещаем ось RSI если есть сила тренда# Настройка основного графика# Автоматическое масштабирование# Минимум отступов по X# УВЕЛИЧИВАЕМ ОТСТУПЫ ВНУТРИ ГРАФИКА# Фиксированные границы вместо расчетных# УВЕЛИЧИВАЕМ ОТСТУПЫ ПОДПИСЕЙ# Было 5 → стало 8# Смещаем от верха# � ДИАГНОСТИКА ОТСТУПОВ СИЛЫ ТРЕНДА# Проверяем границы подписи# Подготовка данных - правильное преобразование дат# Обновление информации о периоде# Расчет индикаторов (учитываем настройки чекбоксов)# СОЗДАЕМ БОЛЬШУЮ ФИГУРУ ДЛЯ ГРАФИКА СИГНАЛОВ# Больше места си# Очищаем оси перед построением# Построение графиков с учетом настроек чекбоксов# НАСТРОЙКА ОТСТУПОВ ДЛЯ ГРАФИКА СИГНАЛОВ# Уменьшаем отступ слева# Отступ справа  # Уменьшаем отступ снизу# Увеличиваем отступ сверху# Увеличиваем расстояние между графиками# Подключаем события мыши# ВРЕМЕННО: проверяем границы# Дополнительная диагностика после построения# Проверяем все оси на графике сигналов# Только дополнительные оси# ...# Находим сегменты позиций# Закрашиваем сегменты позиций# LONG позиция# SHORT позиция# Находим точки смены направления# Разбиваем на сегменты# Отрисовка сегментовu'Вкладка цен и торговых сигналов'u'� Автомасштаб'u'� Сохранить'u'Временная шкала:'b'1W'u'1W'b'1M'u'1M'b'3M'u'3M'b'6M'u'6M'b'1Y'u'1Y'b'SuperTrend'u'SuperTrend'u'Сигналы'u'Входы/Выходы'b'RSI'u'RSI'u'Период: - | Свечей: -'u'Масштаб: Авто'u'Настройка обработчиков событий мыши для графика'u'Обработка движения мыши для показа даты'b'fig_canvas'u'fig_canvas'b'%d.%m.%Y %H:%M'u'%d.%m.%Y %H:%M'u'Дата: 'u' | Цена: 'u'Обновление информации после масштабирования'u'Масштаб: 'u'Обработка изменения временной шкалы'u'Автоматическое масштабирование графика'u'Сохранить текущий график в файл'b'trading_chart_'u'trading_chart_'b'.png'u'.png'b'tight'u'tight'u'✅ График сохранен: 'u'❌ Ошибка сохранения: 'u'Обновить текущий график с новыми настройками'u'Определить тип торговой стратегии по данным'b'supertrend_direction'u'supertrend_direction'b'supertrend_line'u'supertrend_line'u'Мультифреймовая MA'b'rsi'u'rsi'b'rsi_oversold'u'rsi_oversold'b'RSI Strategy'u'RSI Strategy'u'Базовая'u'Настройка временной шкалы'b'dtype'u'dtype'b'dt'u'dt'b'year'u'year'b'%d.%m
%H:%M'u'%d.%m
%H:%M'b'%d.%m'u'%d.%m'b'%b %Y'u'%b %Y'u'⚠️ Ошибка в автоформатировании дат: 'b'%H:%M'u'%H:%M'u'⚠️ Ошибка в ручном форматировании дат: 'u'Индекс данных'b'major'u'Расчет технических индикаторов для отображения'u'✅ Super Trend рассчитан'u'❌ Ошибка расчета Super Trend: 'u'✅ RSI рассчитан'u'❌ Ошибка расчета RSI: 'u'Расчет RSI индикатора'u'Построение графика цен и позиций'u'Цены и торговые позиции ('u'Цена закрытия'u'Цена ($)'b'upper left'u'upper left'b'both'u'both'u'Построение графика торговых сигналов'u'Торговые сигналы и индикаторы'u'Торговый сигнал'b'combined_signal'u'combined_signal'u'Комбинированный сигнал'b'trend_strength'u'trend_strength'u'Сила тренда'b'upper right'u'upper right'b'outward'u'outward'b'lower right'u'lower right'u'� ДИАГНОСТИКА СИЛЫ ТРЕНДА:'u'   Положение оси: 'u'   Y limits силы тренда: 'u'   Подпись Y: ''b'''u'''u'   Отступ подписи: 'u'   Выравнивание подписи: 'b', 'u', 'u'   Положение оси RSI: 'u'   Общие границы ax2: 'u'   X limits основного графика: 'u'   Y limits основного графика: 'u'Обновить график цен и сигналов'u'Нет данных для отображения'b'to_pydatetime'u'to_pydatetime'u'⚠️ Обнаружены даты 1970 года - используем числовой индекс'b'strftime'u'strftime'u'Период: 'u'Период: индексы 'u'Период: неизвестно'u' | Свечей: 'b'height_ratios'u'height_ratios'b'motion_notify_event'u'motion_notify_event'b'button_release_event'u'button_release_event'u'✅ График обновлен: 'b', SuperTrend: 'u', SuperTrend: 'u', Сигналы: 'u', Входы/Выходы: 'b', RSI: 'u', RSI: 'u', Временная шкала: 'u'Границы ax2: 'b'X limits: 'u'X limits: 'b'Y limits: 'u'Y limits: 'u'� ДИАГНОСТИКА ПОСЛЕ ПОСТРОЕНИЯ:'u'   Границы ax2: 'u'   Доп.ось 'b'get_ylabel'u'get_ylabel'u'     Подпись: 'u'Фоновая подсветка торговых позиций'b'__getitem__'u'__getitem__'b'LONG'u'LONG'b'SHORT'u'SHORT'u'Отрисовка SuperTrend индикатора'u'Отрисовка скользящих средних'u'MA Быстрая'u'MA Медленная'u'MA Тренд'u'Отрисовка точек входа и выхода'b'entry_signal'u'entry_signal'b'lime'u'lime'b'^'u'^'u'Вход'b'exit_signal'u'exit_signal'b'v'u'v'u'Выход'u'trading_system.gui.tabs.price_tab'u'gui.tabs.price_tab'u'tabs.price_tab'u'price_tab'ax_twinПерекупленностьПерепроданность0.251.250.03x_paddingset_xlim1.8# УВЕЛИЧИВАЕМ ОТСТУПЫ ДЛЯ ЗАГОЛОВКА И ПОДПИСЕЙ# Основной торговый сигнал (только если включен)# Комбинированный сигнал (только если включен)# RSI индикатор (только если включен)# УВЕЛИЧИВАЕМ ОТСТУПЫ ДЛЯ ПОДПИСЕЙ ОСЕЙ# РАЗМЕЩАЕМ ЛЕГЕНДУ ВНУТРИ ГРАФИКА, ЧТОБЫ НЕ ЗАНИМАЛА МЕСТО СВЕРХУ# ВАЖНО: УВЕЛИЧИВАЕМ ДИАПАЗОН ПО Y ДЛЯ ОТСТУПОВ# Значительно увеличиваем диапазон# ДОБАВЛЯЕМ ОТСТУПЫ ПО X# 3% отступ по X# Больше места для сигналовu'Перекупленность'u'Перепроданность'u'trading_system.gui.tabs.price_tab1'u'gui.tabs.price_tab1'u'tabs.price_tab1'u'price_tab1'C:/Users/bezlp/AppData/Local/Programs/Python/Python313/Lib/re
Вкладка для анализа распределения доходностей и кумулятивной доходности
Статистический анализ торговых результатов
Вкладка доходностей и статистикиОбновить график доходностейdaily_returnscumulative_returnax4Кумулятивная доходностьfinal_returnФинальная: Доходность (%)histbinsskybluedensitypatchesset_facecolorlightgreenmean_returnstd_return+1σ: -1σ: Распределение дневных доходностейПлотность вероятностиsorted_returnscdfКумулятивное распределение доходностейВероятностьreturns_datacrolling_meanСкользящее среднее (5)Положительных: Отрицательных: Соотношение: verticalalignmentlightyellowДневные доходности по времениПлотность распределения доходностейРаспределение доходностей (Box Plot)Box Plot дневных доходностей# ===== СЕКЦИЯ 10: ВКЛАДКА ДОХОДНОСТЕЙ И СТАТИСТИКИ =====# Расчет доходностей# Создание комплексного графика# График 1: Кумулятивная доходность# Отметка финальной доходности# График 2: Распределение дневных доходностей# Раскраска столбцов# Статистические линии# График 3: Накопительная гистограмма доходностей# График 4: Scatter plot временного ряда доходностей - САМЫЙ ПРОСТОЙ ВАРИАНТ# SCATTER PLOT - точки доходностей по времени# Линия нулевой доходности# Скользящее среднее для трендаu'
Вкладка для анализа распределения доходностей и кумулятивной доходности
Статистический анализ торговых результатов
'u'Вкладка доходностей и статистики'u'Обновить график доходностей'u'Кумулятивная доходность'u'Финальная: 'u'Доходность (%)'b'skyblue'u'skyblue'b'lightgreen'u'lightgreen'u'+1σ: 'u'-1σ: 'u'Распределение дневных доходностей'u'Плотность вероятности'u'Кумулятивное распределение доходностей'u'Вероятность'u'Скользящее среднее (5)'u'Положительных: 'u'Отрицательных: 'u'Соотношение: 'b'top'u'top'b'round'u'round'b'lightyellow'u'lightyellow'u'Дневные доходности по времени'u'Плотность распределения доходностей'u'Распределение доходностей (Box Plot)'u'Box Plot дневных доходностей'u'trading_system.gui.tabs.returns_tab'u'gui.tabs.returns_tab'u'tabs.returns_tab'u'returns_tab'
Вкладка для детального анализа эффективности риск-менеджмента
Визуализация стоп-лоссов, тейк-профитов и статистики выходов
MenuВкладка для анализа эффективности риск-менеджментаcurrent_figureНастройка интерфейса вкладкиРезультат:result_varresult_combo_on_result_selected� Обновить анализupdate_analysisshow_analysis_menuПоказать меню анализаtearoffmenuadd_command� График ордеровshow_risk_plot� Статистика рисковshow_risk_stats⚖️ Сравнить стратегииcompare_risk_strategiesadd_separatoranalysis_btnwinfo_rootxwinfo_rootywinfo_heightpost❌ Ошибка показа меню: � Анализ ▼Выберите результат для анализаstats_frame25� Детальная статистика� Визуализация ордеровefficiency_frameefficiency_textefficiency_scrollbar� Эффективность выходовupdate_results_list❌ Ошибка обновления списка результатов: Показать заглушку при отсутствии данных
        � АНАЛИЗ ЭФФЕКТИВНОСТИ РИСК-МЕНЕДЖМЕНТА
        ======================================
        
        Для отображения анализа:
        
        1. Загрузите данные и запустите тестирование
        2. Выберите результат в выпадающем списке
        3. Нажмите "Обновить анализ"
        
        � Что будет показано:
        • Эффективность стоп-лоссов и тейк-профитов
        • Визуализация ордеров на графике цен
        • Статистика по типам выходов из позиций
        • Рекомендации по оптимизации параметров рисков
        placeholder_textОбновление анализа рисков_get_current_result� Отладка: current_result = '� Отладка: main_window = _show_error❌ Выберите результат для анализаavailable� Доступные результаты: ⏳ Анализируем риски..._update_stats_tab_update_efficiency_tab✅ Анализ завершен❌ Ошибка анализа: Упрощенная версия без тулбара⏳ Строим график...plot_risk_levels✅ График построен❌ Не удалось построить график❌ Ошибка построения графика: Показать статистику рисков⏳ Загружаем статистику...get_risk_efficiency_reportstats_report_generate_basic_efficiency_report✅ Статистика загружена❌ Ошибка загрузки статистики: Обновление вкладки со статистикойget_detailed_risk_statsОбновление вкладки с эффективностью выходовefficiency_report❌ Ошибка анализа эффективности: Генерация базового отчета об эффективностиДанные не найдены� ОТЧЕТ ЭФФЕКТИВНОСТИ ВЫХОДОВ


✅ СИСТЕМА РИСК-МЕНЕДЖМЕНТА АКТИВНА

� СТАТИСТИКА ВЫХОДОВ:
• Всего сделок с рисками: • Стоп-лоссы: • Тейк-профиты: • Risk-Reward Ratio: • Win Rate: %

� PnL ПО ТИПАМ ВЫХОДОВ:
)
❌ СИСТЕМА РИСК-МЕНЕДЖМЕНТА НЕ АКТИВНА
Сделки закрывались только по торговым сигналам
Получить текущий выбранный результатwinfo_toplevel❌ Не удалось найти выбранный результат❌ Ошибка получения результата: Показать сообщение об ошибкеclear_analysisОчистить анализАнализ очищенupdate_tabОбновить вкладку (вызывается из главного окна)Сравнение разных стратегий риск-менеджмента⏳ Сравниваем стратегии..._generate_strategy_comparisoncomparison_report✅ Сравнение завершено❌ Ошибка сравнения стратегий: Генерация отчета сравнения стратегий⚖️ СРАВНЕНИЕ СТРАТЕГИЙ РИСК-МЕНЕДЖМЕНТА
� ТЕКУЩИЕ НАСТРОЙКИ ():
• Используются параметры из тестирования

� РЕКОМЕНДУЕМЫЕ СТРАТЕГИИ:

1. � КОНСЕРВАТИВНАЯ (ATR: 1.5/2.0)
   • Стоп-лосс: 1.5 ATR
   • Тейк-профит: 2.0 ATR
   • Risk-Reward: 1.33
   • Для: Низкая волатильность, начинающие трейдеры

2. � УМЕРЕННАЯ (ATR: 2.0/3.0)
   • Стоп-лосс: 2.0 ATR
   • Тейк-профит: 3.0 ATR
   • Risk-Reward: 1.50
   • Для: Стандартные условия, сбалансированный риск

3. � АГРЕССИВНАЯ (ATR: 2.5/4.0)
   • Стоп-лосс: 2.5 ATR
   • Тейк-профит: 4.0 ATR
   • Risk-Reward: 1.60
   • Для: Высокая волатильность, опытные трейдеры

� СОВЕТЫ:
• Протестируйте разные параметры в основном интерфейсе
• Сравните результаты в разделе 'Сравнение'
• Используйте 'График ордеров' для визуальной оценки эффективности
# ===== СЕКЦИЯ: ВКЛАДКА АНАЛИЗА РИСК-МЕНЕДЖМЕНТА =====# � Сохраняем ссылку на главное окно# � ДОБАВЛЯЕМ ВЫПАДАЮЩИЙ СПИСОК С РЕЗУЛЬТАТАМИ# Даем пространство для индикатора# Основная кнопка обновления# Выпадающее меню для дополнительных функций# Показываем меню под кнопкой# Индикатор загрузки# Область для отображения# � Изменяем на row=2# Вкладка с текстовой статистикой# Вкладка с графиком риск-ордеров# ✅ ДОБАВИТЬ# Вкладка с эффективностью выходов# Заглушка при инициализации# Выбираем последний результат# � ДОБАВИМ ОТЛАДОЧНУЮ ИНФОРМАЦИЮ# � Покажем доступные результаты# Обновляем все вкладки# Переключаемся на вкладку с графиком# Очищаем предыдущий график# Создаем новый график# ✅ pack ТОЛЬКО для canvas# Переключаемся на вкладку со статистикой# Получаем отчет об эффективности# Получаем детальную статистику рисков# Анализ PnL# Способ 1: через переданное главное окно# Способ 2: через parent chain# Максимум 5 уровней вверх# Способ 3: через toplevel# Очищаем график# Переключаемся на вкладку эффективности# Добавляем информацию о текущих настройках# Здесь можно добавить информацию о текущих параметрахu'
Вкладка для детального анализа эффективности риск-менеджмента
Визуализация стоп-лоссов, тейк-профитов и статистики выходов
'u'Вкладка для анализа эффективности риск-менеджмента'u'Настройка интерфейса вкладки'u'Результат:'u'� Обновить анализ'u'Показать меню анализа'u'� График ордеров'u'� Статистика рисков'u'⚖️ Сравнить стратегии'u'❌ Ошибка показа меню: 'u'� Анализ ▼'u'Выберите результат для анализа'u'� Детальная статистика'u'� Визуализация ордеров'u'� Эффективность выходов'b'get_available_results'u'get_available_results'u'❌ Ошибка обновления списка результатов: 'u'Показать заглушку при отсутствии данных'u'
        � АНАЛИЗ ЭФФЕКТИВНОСТИ РИСК-МЕНЕДЖМЕНТА
        ======================================
        
        Для отображения анализа:
        
        1. Загрузите данные и запустите тестирование
        2. Выберите результат в выпадающем списке
        3. Нажмите "Обновить анализ"
        
        � Что будет показано:
        • Эффективность стоп-лоссов и тейк-профитов
        • Визуализация ордеров на графике цен
        • Статистика по типам выходов из позиций
        • Рекомендации по оптимизации параметров рисков
        'u'Обновление анализа рисков'u'� Отладка: current_result = ''u'� Отладка: main_window = 'u'❌ Выберите результат для анализа'u'� Доступные результаты: 'u'⏳ Анализируем риски...'u'✅ Анализ завершен'u'❌ Ошибка анализа: 'u'Упрощенная версия без тулбара'u'⏳ Строим график...'u'✅ График построен'u'❌ Не удалось построить график'u'❌ Ошибка построения графика: 'u'Показать статистику рисков'u'⏳ Загружаем статистику...'b'get_risk_efficiency_report'u'get_risk_efficiency_report'u'✅ Статистика загружена'u'❌ Ошибка загрузки статистики: 'u'Обновление вкладки со статистикой'u'Обновление вкладки с эффективностью выходов'u'❌ Ошибка анализа эффективности: 'u'Генерация базового отчета об эффективности'u'Данные не найдены'u'� ОТЧЕТ ЭФФЕКТИВНОСТИ ВЫХОДОВ
'b'

'u'

'u'✅ СИСТЕМА РИСК-МЕНЕДЖМЕНТА АКТИВНА

'u'� СТАТИСТИКА ВЫХОДОВ:
'u'• Всего сделок с рисками: 'u'• Стоп-лоссы: 'u'• Тейк-профиты: 'u'• Risk-Reward Ratio: 'u'• Win Rate: 'b'%

'u'%

'u'� PnL ПО ТИПАМ ВЫХОДОВ:
'b')
'u')
'u'❌ СИСТЕМА РИСК-МЕНЕДЖМЕНТА НЕ АКТИВНА
'u'Сделки закрывались только по торговым сигналам
'u'Получить текущий выбранный результат'b'selected_result'u'selected_result'b'master'u'master'u'❌ Не удалось найти выбранный результат'u'❌ Ошибка получения результата: 'u'Показать сообщение об ошибке'u'Очистить анализ'u'Анализ очищен'u'Обновить вкладку (вызывается из главного окна)'u'Сравнение разных стратегий риск-менеджмента'u'⏳ Сравниваем стратегии...'u'✅ Сравнение завершено'u'❌ Ошибка сравнения стратегий: 'u'Генерация отчета сравнения стратегий'u'⚖️ СРАВНЕНИЕ СТРАТЕГИЙ РИСК-МЕНЕДЖМЕНТА
'u'� ТЕКУЩИЕ НАСТРОЙКИ ('b'):
'u'):
'u'• Используются параметры из тестирования

'u'� РЕКОМЕНДУЕМЫЕ СТРАТЕГИИ:

'u'1. � КОНСЕРВАТИВНАЯ (ATR: 1.5/2.0)
'u'   • Стоп-лосс: 1.5 ATR
'u'   • Тейк-профит: 2.0 ATR
'u'   • Risk-Reward: 1.33
'u'   • Для: Низкая волатильность, начинающие трейдеры

'u'2. � УМЕРЕННАЯ (ATR: 2.0/3.0)
'u'   • Стоп-лосс: 2.0 ATR
'u'   • Тейк-профит: 3.0 ATR
'u'   • Risk-Reward: 1.50
'u'   • Для: Стандартные условия, сбалансированный риск

'u'3. � АГРЕССИВНАЯ (ATR: 2.5/4.0)
'u'   • Стоп-лосс: 2.5 ATR
'u'   • Тейк-профит: 4.0 ATR
'u'   • Risk-Reward: 1.60
'u'   • Для: Высокая волатильность, опытные трейдеры

'u'� СОВЕТЫ:
'u'• Протестируйте разные параметры в основном интерфейсе
'u'• Сравните результаты в разделе 'Сравнение'
'u'• Используйте 'График ордеров' для визуальной оценки эффективности
'u'trading_system.gui.tabs.risk_analysis_tab'u'gui.tabs.risk_analysis_tab'u'tabs.risk_analysis_tab'u'risk_analysis_tab'
Оптимизированная вкладка для отображения стоп-лоссов, тейк-профитов и анализа рисков
Оптимизированная вкладка визуализации рисков и ордеровСтоп-лоссТейк-профитТрейлинг-стопВременной стопСигнал продажиsignal_sellСигнал покупкиsignal_buyREASON_TRANSLATIONScyanREASON_COLORS_current_figureБыстрая настройка пользовательского интерфейсаnsewЗапустите тест с включенным risk management для отображения данныхОптимизированное обновление графика рисков и ордеров_validate_data_availability_create_risk_analysis_plotОшибка построения графика: Быстрая валидация доступности данныхstop_loss_leveltake_profit_levelДанные о рисках не найдены. Запустите тест с включенным risk managementFigureСоздание оптимизированного графика анализа рисков_plot_price_with_risk_levels_plot_exit_reasons_plot_risk_efficiency_plot_stop_loss_distancesОшибка создания графика рисков: Оптимизированный график цен с уровнями рискаvalid_stopsvalid_take_profitsЦены с уровнями рискаОптимизированный график причин выходаreason_countsbar_colorsПричины выхода из позицийКоличество_translate_reasonget_xget_widthget_heightОптимизированный график эффективности рисковexit_datagroupbyaggreasons_pnlvalid_reasonsСредний PnL по причинам выходаСредний PnL (%)va_posy_offsetОптимизированный график распределения расстояний до стоп-лоссаactive_positions_calculate_stop_distancesstop_distancesРаспределение расстояний до стоп-лоссаРасстояние до стопа (%)Частотаmean_distancepositionsБыстрый расчет расстояний до стоп-лоссаdistancesdistanceБыстрый перевод причин выхода (использует кэш)cleanupОчистка ресурсов# ===== СЕКЦИЯ: ВКЛАДКА ВИЗУАЛИЗАЦИИ РИСК-МЕНЕДЖМЕНТА =====# Кэш переводов для быстрого доступа# Цвета для типов выходов# Быстрая проверка наличия данных# Создаем комплексный график рисков# Освобождаем память# Проверяем наличие критических колонок# График 1: Цены с уровнями риска (оптимизированный)# График 2: Причины выхода из позиций# График 3: Эффективность системы рисков# График 4: Распределение расстояний до стоп-лосса# Векторизованная обработка стоп-лоссов# Векторизованная обработка тейк-профитов# Используем предопределенные цвета# Быстрое добавление значений# Векторизованная группировка# Векторизованный расчет расстоянийu'
Оптимизированная вкладка для отображения стоп-лоссов, тейк-профитов и анализа рисков
'u'Оптимизированная вкладка визуализации рисков и ордеров'u'Стоп-лосс'u'Тейк-профит'u'Трейлинг-стоп'u'Временной стоп'u'Сигнал продажи'b'signal_sell'u'signal_sell'u'Сигнал покупки'b'signal_buy'u'signal_buy'b'cyan'u'cyan'u'Быстрая настройка пользовательского интерфейса'b'nsew'u'nsew'u'Запустите тест с включенным risk management для отображения данных'u'Оптимизированное обновление графика рисков и ордеров'u'Ошибка построения графика: 'u'Быстрая валидация доступности данных'b'stop_loss_level'u'stop_loss_level'b'take_profit_level'u'take_profit_level'u'Данные о рисках не найдены. Запустите тест с включенным risk management'u'Создание оптимизированного графика анализа рисков'u'Ошибка создания графика рисков: 'u'Оптимизированный график цен с уровнями риска'u'Цены с уровнями риска'u'Оптимизированный график причин выхода'u'Причины выхода из позиций'u'Количество'b'bottom'u'bottom'u'Оптимизированный график эффективности рисков'u'Средний PnL по причинам выхода'u'Средний PnL (%)'u'Оптимизированный график распределения расстояний до стоп-лосса'u'Распределение расстояний до стоп-лосса'u'Расстояние до стопа (%)'u'Частота'u'Быстрый расчет расстояний до стоп-лосса'u'Быстрый перевод причин выхода (использует кэш)'u'Очистка ресурсов'u'trading_system.gui.tabs.risk_tab'u'gui.tabs.risk_tab'u'tabs.risk_tab'u'risk_tab'
Сканирование существующей структуры проекта и сохранение в файл
scan_project_structureproject_structure.txtstart_pathoutput_file
    Сканирует существующую структуру проекта и сохраняет в файл
    Сканирую структуру проекта в: absolutetotal_filestotal_dirsd__pycache__.git.vscode.ideavenvenvnode_modules.pytest_cachesep    /
basenamedir_namesub_indent.DS_StoreThumbs.dbdesktop.iniСтруктура сохранена в: Найдено:  папок,  файловНачинаю сканирование проекта...Сканирование завершено!# Счетчики# Пропускаем служебные папки# Уровень вложенности# Относительный путь# Файлы в текущей директории# Пропускаем служебные файлыu'
Сканирование существующей структуры проекта и сохранение в файл
'b'project_structure.txt'u'project_structure.txt'u'
    Сканирует существующую структуру проекта и сохраняет в файл
    'u'Сканирую структуру проекта в: 'b'__pycache__'u'__pycache__'b'.git'u'.git'b'.vscode'u'.vscode'b'.idea'u'.idea'b'venv'u'venv'b'env'u'env'b'node_modules'u'node_modules'b'.pytest_cache'u'.pytest_cache'b'    'u'    'b'/
'u'/
'b'.DS_Store'u'.DS_Store'b'Thumbs.db'u'Thumbs.db'b'desktop.ini'u'desktop.ini'u'Структура сохранена в: 'u'Найдено: 'u' папок, 'u' файлов'u'Начинаю сканирование проекта...'u'Сканирование завершено!'u'Documents.PythonScripts.trading_system.scan_project_structure'u'PythonScripts.trading_system.scan_project_structure'u'trading_system.scan_project_structure'u'scan_project_structure'dotenvload_dotenvSecurityConfiggetenvTINKOFF_SANDBOX_TOKENDATABASE_URLvalidate_tokensclsTINKOFF_TOKEN not set in environment# config/security.pyb'TINKOFF_TOKEN'u'TINKOFF_TOKEN'b'TINKOFF_SANDBOX_TOKEN'u'TINKOFF_SANDBOX_TOKEN'b'DATABASE_URL'u'DATABASE_URL'b'TINKOFF_TOKEN not set in environment'u'TINKOFF_TOKEN not set in environment'u'PythonScripts.trading_system.config.security'u'trading_system.config.security'u'config.security'u'security'
Интеллектуальное предсказание и предзагрузка данных
defaultdictSetУмный предсказатель на основе паттернов использованияaccess_patternstime_patternsseasonal_patternsprediction_accuracytotal_predictionssuccessful_predictions_start_prediction_engineЗапись обращения с временной меткойweekdayday_of_weekget_likely_requestshours_aheadПредсказание вероятных запросовpredictionspattern_calculate_request_probabilityprobabilityРасчет вероятности запроса_analyze_time_patterntime_prob_analyze_frequency_patternfreq_probcombined_probАнализ временных паттерновhour_patternscurrent_hourhour_offsettarget_hourhour_probАнализ паттернов частотыmax_requestsЗапуск движка предсказанийprediction_worker_execute_predictions1800Ошибка в движке предсказаний: Выполнение предсказаний и предзагрузкиlikely_requests) - вероятность: sorted_symbolsaccuracyaccess_patterns_countpopular_symbols_count# tbank_api/smart_predictor.py# Обновляем паттерны доступа# Анализируем временные паттерны# Сезонные паттерны (день недели)# Порог вероятности# Сортируем по вероятности# Топ-10 предсказаний# Анализ временных паттернов# Анализ частоты обращений# Комбинированная вероятность# Проверяем следующие N часов# Нормализуем относительно самого популярного инструмента# Каждые 30 минут# Высокая вероятность# В реальной системе здесь бы отслеживалась точность предсказаний# ДОБАВЛЕННЫЕ МЕТОДЫ ДЛЯ GUI:# Сортируем по количеству обращений и берем топ-N# В долях для форматированияu'
Интеллектуальное предсказание и предзагрузка данных
'u'Умный предсказатель на основе паттернов использования'u'Запись обращения с временной меткой'u'Предсказание вероятных запросов'u'Расчет вероятности запроса'u'Анализ временных паттернов'u'Анализ паттернов частоты'u'Запуск движка предсказаний'u'Ошибка в движке предсказаний: 'u'Выполнение предсказаний и предзагрузки'u') - вероятность: 'b'total_predictions'u'total_predictions'b'successful_predictions'u'successful_predictions'b'prediction_accuracy'u'prediction_accuracy'b'access_patterns_count'u'access_patterns_count'b'popular_symbols_count'u'popular_symbols_count'u'PythonScripts.trading_system.tbank_api.smart_predictor'u'trading_system.tbank_api.smart_predictor'u'tbank_api.smart_predictor'u'smart_predictor'
Вкладка для отображения детальной статистики производительности
Текстовое представление всех ключевых метрик системы
Вкладка статистики производительностиЗапустите тест для отображения статистикиОбновить статистику# ===== СЕКЦИЯ 13: ВКЛАДКА СТАТИСТИКИ =====# Получение детальной статистики из визуализатораu'
Вкладка для отображения детальной статистики производительности
Текстовое представление всех ключевых метрик системы
'u'Вкладка статистики производительности'u'Запустите тест для отображения статистики'u'Обновить статистику'u'trading_system.gui.tabs.stats_tab'u'gui.tabs.stats_tab'u'tabs.stats_tab'u'stats_tab'
Реализация индикатора Super Trend для определения тренда
Зеленая линия под ценой - восходящий тренд, красная над ценой - нисходящий

    ОПТИМИЗИРОВАННАЯ версия расчета Super Trend с векторизованными операциями
    � Super Trend расчет:    Колонки: ❌ ОШИБКА: Отсутствуют необходимые колонки high, low, close✅ Данные проверены: high=, low="low=", close="close="hl2calculate_true_rangetrmin_periods� ATR расчет: min=, max=, NaN="NaN="basic_upperbasic_lower� Базовые полосы: upper=, lower="lower="zerosfinal_upperfinal_lowerfirst_valid_indexfirst_valid_idx❌ ОШИБКА: ATR не рассчитан, все значения NaNget_loc✅ Первый валидный индекс: � Инициализация: direction=, line=valid_calculations❌ Ошибка на шаге ✅ Успешных расчетов: valid_directionvalid_line� Super Trend результат:   Направление:  валидных   Линия:    Уникальные направления: unique   Диапазон линии: 
    Расчет True Range (TR)
    TR = max[(high - low), abs(high - prev_close), abs(low - prev_close)]
    � Расчет True Range...close_prevtr1tr2tr3concat� True Range: min=
    Получение торговых сигналов на основе Super Trend
    
    Returns:
    --------
    pd.Series
        Сигналы: 1 - покупка, -1 - продажа, 0 - без сигнала
    direction_changesbuy_signalssell_signalssignal_seriesanalyze_supertrend_performance
    Анализ эффективности сигналов Super Trend
    signalstotal_buy_signalstotal_sell_signalstotal_signalsbuy_signal_datessell_signal_dates# ===== СЕКЦИЯ 19: ИНДИКАТОР SUPER TREND =====# � ПРОВЕРКА ВХОДНЫХ ДАННЫХ# Создаем пустые колонки чтобы избежать ошибок# Расчет HL2 и ATR# Базовые полосы# Инициализация массивов для векторизованных расчетов# Находим первый валидный индекс после расчета ATR# Инициализация первых значений# ВЕКТОРИЗОВАННЫЙ РАСЧЕТ для остальных значений# Финальная верхняя полоса# Финальная нижняя полоса# Определение направления и линии Super Trend# Предыдущий тренд восходящий# Предыдущий тренд нисходящий# Заполняем предыдущими значениями при ошибке# Заполняем DataFrame результатами# � ДИАГНОСТИКА РЕЗУЛЬТАТА# Сигналы при смене направления# Покупка: смена с -1 (нисходящий) на 1 (восходящий)# Продажа: смена с 1 (восходящий) на -1 (нисходящий)  # Фильтр: игнорируем сигналы, которые сразу меняются обратно# Статистика сигналовu'
Реализация индикатора Super Trend для определения тренда
Зеленая линия под ценой - восходящий тренд, красная над ценой - нисходящий
'u'
    ОПТИМИЗИРОВАННАЯ версия расчета Super Trend с векторизованными операциями
    'u'� Super Trend расчет: 'u'   Колонки: 'u'❌ ОШИБКА: Отсутствуют необходимые колонки high, low, close'u'✅ Данные проверены: high='b', low='u', low='b', close='u', close='b'hl2'u'hl2'b'tr'u'tr'u'� ATR расчет: min='b', max='u', max='b', NaN='u', NaN='b'basic_upper'u'basic_upper'b'basic_lower'u'basic_lower'u'� Базовые полосы: upper='b', lower='u', lower='u'❌ ОШИБКА: ATR не рассчитан, все значения NaN'u'✅ Первый валидный индекс: 'u'� Инициализация: direction='b', line='u', line='u'❌ Ошибка на шаге 'u'✅ Успешных расчетов: 'b'final_upper'u'final_upper'b'final_lower'u'final_lower'u'� Super Trend результат:'u'   Направление: 'u' валидных'u'   Линия: 'u'   Уникальные направления: 'u'   Диапазон линии: 'u'
    Расчет True Range (TR)
    TR = max[(high - low), abs(high - prev_close), abs(low - prev_close)]
    'u'� Расчет True Range...'u'� True Range: min='u'
    Получение торговых сигналов на основе Super Trend
    
    Returns:
    --------
    pd.Series
        Сигналы: 1 - покупка, -1 - продажа, 0 - без сигнала
    'u'
    Анализ эффективности сигналов Super Trend
    'b'total_buy_signals'u'total_buy_signals'b'total_sell_signals'u'total_sell_signals'b'total_signals'u'total_signals'b'buy_signal_dates'u'buy_signal_dates'b'sell_signal_dates'u'sell_signal_dates'u'PythonScripts.trading_system.utils.supertrend'u'trading_system.utils.supertrend'u'utils.supertrend'
Модуль для работы с Tinkoff Invest API (Т-банк)
ИСПРАВЛЕННАЯ ВЕРСИЯ на основе работающих примеров
tinkoff.invest.servicesInstrumentsServicequotation_to_floatquotationКонвертация Quotation в floatmoneyvalue_to_floatmoney_valueКонвертация MoneyValue в floatИСПРАВЛЕННЫЙ класс для работы с Tinkoff Invest API_figi_cache_instruments_cache_last_instruments_update_cache_ttl✅ Tinkoff API инициализирован с ключом⚠️ Tinkoff API без ключа - только MOEX будет доступен_get_instruments
        Получение списка всех инструментов с кэшированием
        secondsinstrument_typesapi_trade_availablebuy_availablesell_availableОшибка загрузки  инструментов Tinkoff❌ Ошибка получения инструментов Tinkoff: 
        Получение списка доступных инструментов с фильтрацией
        
        Получение FIGI по тикеру с кэшированием
        instruments_dfmatchsimilarНайден похожий тикер:  для запроса Инструмент с тикером 
        Получение исторических данных по инструменту
        API ключ не установленCANDLE_INTERVAL_DAYCANDLE_INTERVAL_4_HOURCANDLE_INTERVAL_WEEKCANDLE_INTERVAL_1_MINCANDLE_INTERVAL_5_MINCANDLE_INTERVAL_15_MINНе найден FIGI для тикера microsecond999999Запрос данных Tinkoff для  с , таймфрейм: get_all_candlesНет данных Tinkoff для  свечей Tinkoff для ❌ Ошибка получения данных Tinkoff для Не найден FIGI для get_order_bookdepthorder_bookbidsbest_bidasksbest_askbidaskspreadНе удалось получить котировку для ✅ Загружены котировки для ❌ Ошибка получения котировок Tinkoff: usersget_accountsaccounts✅ Подключение к Tinkoff API успешно❌ Ошибка подключения к Tinkoff API: Проверка доступности APIОчистка кэшей✅ Кэши Tinkoff API очищеныget_account_info
        Получение информации о счетах
        accounts_infoaccounttotal_accountsОшибка получения информации о счетах: # tbank_api/tbank_api.py# Кэш FIGI для тикеров# Кэш всех инструментов# 1 час в секундах# Проверяем актуальность кэша# Получаем разные типы инструментов# Базовые проверки доступности инструмента# Фильтрация по типу инструмента# Фильтрация по доступности торговли# Сортировка по тикеру# Ищем точное совпадение тикера# Если точного совпадения нет, ищем похожие# Конвертация таймфреймов# Получаем FIGI по тикеру# Корректируем время для Tinkoff API# Получаем свечи# Убедимся, что все числовые колонки имеют правильный тип# Получаем стакан цен# Получаем последнюю цену# Получаем лучшие цены покупки/продажи# Простой запрос для проверки подключенияu'
Модуль для работы с Tinkoff Invest API (Т-банк)
ИСПРАВЛЕННАЯ ВЕРСИЯ на основе работающих примеров
'u'Конвертация Quotation в float'u'Конвертация MoneyValue в float'u'ИСПРАВЛЕННЫЙ класс для работы с Tinkoff Invest API'u'✅ Tinkoff API инициализирован с ключом'u'⚠️ Tinkoff API без ключа - только MOEX будет доступен'u'
        Получение списка всех инструментов с кэшированием
        'b'class_code'u'class_code'b'api_trade_available'u'api_trade_available'b'buy_available'u'buy_available'b'sell_available'u'sell_available'u'Ошибка загрузки 'u' инструментов Tinkoff'u'❌ Ошибка получения инструментов Tinkoff: 'u'
        Получение списка доступных инструментов с фильтрацией
        'u'
        Получение FIGI по тикеру с кэшированием
        'u'Найден похожий тикер: 'u' для запроса 'u'Инструмент с тикером 'u'
        Получение исторических данных по инструменту
        'u'API ключ не установлен'u'Не найден FIGI для тикера 'u'Запрос данных Tinkoff для 'u' с 'u', таймфрейм: 'u'Нет данных Tinkoff для 'u' свечей Tinkoff для 'u'❌ Ошибка получения данных Tinkoff для 'u'Не найден FIGI для 'b'bid'u'bid'b'ask'u'ask'b'spread'u'spread'u'Не удалось получить котировку для 'u'✅ Загружены котировки для 'u'❌ Ошибка получения котировок Tinkoff: 'u'✅ Подключение к Tinkoff API успешно'u'❌ Ошибка подключения к Tinkoff API: 'u'Проверка доступности API'u'Очистка кэшей'u'✅ Кэши Tinkoff API очищены'u'
        Получение информации о счетах
        'b'id'u'id'b'accounts'u'accounts'b'total_accounts'u'total_accounts'u'Ошибка получения информации о счетах: 'u'PythonScripts.trading_system.tbank_api.tbank_api'u'trading_system.tbank_api.tbank_api'u'tbank_api.tbank_api'
Исправленная версия Tinkoff API для торговой системы
ОБНОВЛЕННАЯ ВЕРСИЯ - использует исправленный основной класс
TBankAPIFixed
    Улучшенный класс для работы с Tinkoff Invest API
    Наследует функциональность из исправленного TBankAPI
    
        Инициализация с использованием исправленного основного класса
        
        Parameters:
        -----------
        api_key : str
            API ключ Tinkoff Invest
        _additional_cache
        Получение списка доступных инструментов
        
        Parameters:
        -----------
        instrument_type : str, optional
            Тип инструмента ('shares', 'bonds', 'etfs', 'currencies', 'futures')
            
        Returns:
        --------
        pd.DataFrame
            DataFrame с инструментами
        
        Получение исторических данных по инструменту
        
        Parameters:
        -----------
        symbol : str
            Тикер инструмента
        start_date : str
            Начальная дата в формате 'YYYY-MM-DD'
        end_date : str, optional
            Конечная дата в формате 'YYYY-MM-DD'
        timeframe : str
            Таймфрейм ('1d', '1h', '4h', '1w', '1m', '5m', '15m')
            
        Returns:
        --------
        pd.DataFrame
            DataFrame с историческими данными
        
        Получение текущих котировок
        
        Parameters:
        -----------
        symbols : List[str]
            Список тикеров
            
        Returns:
        --------
        pd.DataFrame
            DataFrame с текущими котировками
        
        Проверка подключения к API
        
        Returns:
        --------
        bool
            True если подключение успешно
        
        Проверка доступности API
        
        Returns:
        --------
        bool
            True если API доступен
        get_instrument_info
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Получение детальной информации об инструменте
        
        Parameters:
        -----------
        symbol : str
            Тикер инструмента
            
        Returns:
        --------
        Dict
            Словарь с информацией об инструменте
        info_instrument_dataavailable_for_tradingОшибка получения информации об инструменте get_portfolio_data
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Получение данных портфеля
        Требует права на чтение портфеля
        
        Returns:
        --------
        pd.DataFrame
            DataFrame с позициями портфеля
        portfolio_dataНет доступных счетовПолучена информация о счетах (портфель требует дополнительной настройки прав)Ошибка получения данных портфеля: 
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Поиск инструментов по названию или тикеру
        
        Parameters:
        -----------
        query : str
            Строка для поиска
        instrument_type : str, optional
            Ограничение по типу инструмента
            
        Returns:
        --------
        pd.DataFrame
            DataFrame с найденными инструментами
         инструментов по запросу 'Ошибка поиска инструментов: get_available_timeframes
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Получение доступных таймфреймов
        
        Returns:
        --------
        Dict[str, List[str]]
            Словарь с доступными таймфреймами для каждого API
        validate_symbol
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Валидация тикера
        
        Parameters:
        -----------
        symbol : str
            Тикер для проверки
            
        Returns:
        --------
        Dict[str, bool]
            Результаты валидации
        tradableunknownОшибка валидации тикера get_market_hours
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Получение информации о времени работы рынка
        
        Returns:
        --------
        Dict
            Информация о времени работы
        Europe/Moscowtimezone10:00open_time18:40close_time14:00lunch_start14:03lunch_endmondaytuesdaywednesdaythursdayfriday_is_market_open_nowis_open_now
        Проверка, открыт ли рынок в текущий момент
        market_openmarket_close
        Очистка всех кэшей
        ✅ Все кэши TBankAPIFixed очищеныget_api_stats
        Получение статистики использования API
        
        Returns:
        --------
        Dict
            Статистика API
        tbank_availableconnection_okTBankAPISimple
    Упрощенная версия для обратной совместимости
    Простая версия получения инструментовПростая версия получения исторических данныхПолучение FIGI по тикеру (для обратной совместимости)Проверка подключенияПроверка доступности# tbank_api/tbank_api_fixed.py# Импортируем исправленный основной класс# Используем исправленный основной класс# Дополнительный кэш для специфичных данных# Добавляем дополнительную информацию# Используем основной класс для получения счетов# Здесь можно добавить логику получения портфеля для каждого счета# Для простоты возвращаем пустой DataFrame# В реальной реализации нужно использовать client.operations.get_portfolio()# Поиск по тикеру и названию# Для Tinkoff - Московская биржа# Проверяем день недели (пн-пт)# 5=суббота, 6=воскресенье# Проверяем время# Проверяем общее время работы# Проверяем обеденный перерыв# Альтернативная упрощенная версия для обратной совместимости# В реальной реализации нужно получить FIGI из кэша основного API# Заглушкаu'
Исправленная версия Tinkoff API для торговой системы
ОБНОВЛЕННАЯ ВЕРСИЯ - использует исправленный основной класс
'u'
    Улучшенный класс для работы с Tinkoff Invest API
    Наследует функциональность из исправленного TBankAPI
    'u'
        Инициализация с использованием исправленного основного класса
        
        Parameters:
        -----------
        api_key : str
            API ключ Tinkoff Invest
        'u'
        Получение списка доступных инструментов
        
        Parameters:
        -----------
        instrument_type : str, optional
            Тип инструмента ('shares', 'bonds', 'etfs', 'currencies', 'futures')
            
        Returns:
        --------
        pd.DataFrame
            DataFrame с инструментами
        'u'
        Получение исторических данных по инструменту
        
        Parameters:
        -----------
        symbol : str
            Тикер инструмента
        start_date : str
            Начальная дата в формате 'YYYY-MM-DD'
        end_date : str, optional
            Конечная дата в формате 'YYYY-MM-DD'
        timeframe : str
            Таймфрейм ('1d', '1h', '4h', '1w', '1m', '5m', '15m')
            
        Returns:
        --------
        pd.DataFrame
            DataFrame с историческими данными
        'u'
        Получение текущих котировок
        
        Parameters:
        -----------
        symbols : List[str]
            Список тикеров
            
        Returns:
        --------
        pd.DataFrame
            DataFrame с текущими котировками
        'u'
        Проверка подключения к API
        
        Returns:
        --------
        bool
            True если подключение успешно
        'u'
        Проверка доступности API
        
        Returns:
        --------
        bool
            True если API доступен
        'u'
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Получение детальной информации об инструменте
        
        Parameters:
        -----------
        symbol : str
            Тикер инструмента
            
        Returns:
        --------
        Dict
            Словарь с информацией об инструменте
        'b'info_'u'info_'b'available_for_trading'u'available_for_trading'u'Ошибка получения информации об инструменте 'u'
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Получение данных портфеля
        Требует права на чтение портфеля
        
        Returns:
        --------
        pd.DataFrame
            DataFrame с позициями портфеля
        'u'Нет доступных счетов'u'Получена информация о счетах (портфель требует дополнительной настройки прав)'u'Ошибка получения данных портфеля: 'u'
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Поиск инструментов по названию или тикеру
        
        Parameters:
        -----------
        query : str
            Строка для поиска
        instrument_type : str, optional
            Ограничение по типу инструмента
            
        Returns:
        --------
        pd.DataFrame
            DataFrame с найденными инструментами
        'u' инструментов по запросу ''u'Ошибка поиска инструментов: 'u'
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Получение доступных таймфреймов
        
        Returns:
        --------
        Dict[str, List[str]]
            Словарь с доступными таймфреймами для каждого API
        'u'
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Валидация тикера
        
        Parameters:
        -----------
        symbol : str
            Тикер для проверки
            
        Returns:
        --------
        Dict[str, bool]
            Результаты валидации
        'b'exists'u'exists'b'tradable'u'tradable'b'unknown'u'unknown'u'Ошибка валидации тикера 'u'
        ДОПОЛНИТЕЛЬНЫЙ МЕТОД: Получение информации о времени работы рынка
        
        Returns:
        --------
        Dict
            Информация о времени работы
        'b'Europe/Moscow'u'Europe/Moscow'b'timezone'u'timezone'b'10:00'u'10:00'b'open_time'u'open_time'b'18:40'u'18:40'b'close_time'u'close_time'b'14:00'u'14:00'b'lunch_start'u'lunch_start'b'14:03'u'14:03'b'lunch_end'u'lunch_end'b'monday'u'monday'b'tuesday'u'tuesday'b'wednesday'u'wednesday'b'thursday'u'thursday'b'friday'u'friday'b'is_open_now'u'is_open_now'u'
        Проверка, открыт ли рынок в текущий момент
        'u'
        Очистка всех кэшей
        'u'✅ Все кэши TBankAPIFixed очищены'u'
        Получение статистики использования API
        
        Returns:
        --------
        Dict
            Статистика API
        'b'tbank_available'u'tbank_available'b'connection_ok'u'connection_ok'b'market_open'u'market_open'u'
    Упрощенная версия для обратной совместимости
    'u'Простая версия получения инструментов'u'Простая версия получения исторических данных'u'Получение FIGI по тикеру (для обратной совместимости)'u'Проверка подключения'u'Проверка доступности'u'PythonScripts.trading_system.tbank_api.tbank_api_fixed'u'trading_system.tbank_api.tbank_api_fixed'u'tbank_api.tbank_api_fixed'u'tbank_api_fixed'
Система кэширования данных Tinkoff API
UnionКэширование данных Tinkoff API с поддержкой инкрементального обновления_memory_cacheСохранение списка инструментов в кэшcache_pathto_parquetpyarrowcached_at_save_metadatainstruments_✅ Инструменты типа '' сохранены в кэш (❌ Ошибка сохранения инструментов в кэш: Загрузка списка инструментов из кэшаИнструменты загружены из memory cache: _is_cache_validread_parquet✅ Инструменты загружены из кэша: ❌ Ошибка загрузки инструментов из кэша: Сохранение свечей в кэшcandles_✅ Свечи ) сохранены в кэш (❌ Ошибка сохранения свечей в кэш: Загрузка свечей из кэша✅ Свечи загружены из кэша: ) - ❌ Ошибка загрузки свечей из кэша: find_cached_candle_periodsПоиск всех кэшированных периодов для инструмента_*.parquetglobcache_filesstemdate_partНе удалось обработать файл кэша Инкрементальное обновление кэша свечейcached_periodsall_candlesОшибка загрузки кэша combined_cachedcombined_all✅ Кэш свечей обновлен инкрементально: Сохранение метаданных кэшаmetadata_pathОшибка сохранения метаданных _load_metadataЗагрузка метаданных кэшаОшибка загрузки метаданных ttlПроверка актуальности кэшаfromisoformatcache_typeОчистка кэша*.parquetunlink✅ Кэш инструментов очищен✅ Кэш свечей очищен❌ Ошибка очистки кэша: Статистика кэшаinstruments_cache_sizecandles_cache_sizememory_cache_entries_get_total_cache_sizeОбщий размер кэша в мегабайтахtotal_sizecache_dir**/*is_filestatst_size# tbank_api/tbank_cache.py# Быстрый кэш в памяти# ===== КЭШИРОВАНИЕ ИНСТРУМЕНТОВ =====# Сохраняем в parquet# Сохраняем метаданные# Сохраняем в memory cache# Проверка memory cache# Проверка актуальности кэша# Загрузка из файла# ===== КЭШИРОВАНИЕ СВЕЧЕЙ =====# Генерируем ключ на основе дат# Сохраняем данные# Индекс - это дата# Извлекаем даты из имени файла# Последние две части - даты# ===== ИНКРЕМЕНТАЛЬНОЕ ОБНОВЛЕНИЕ =====# Находим существующие кэшированные периоды# Нет кэша, сохраняем все данные# Объединяем с существующими данными# Объединяем все кэшированные данные# Объединяем с новыми данными# Сохраняем обновленный кэш# ===== ВСПОМОГАТЕЛЬНЫЕ МЕТОДЫ =====# Очистка кэша инструментов# Очистка кэша свечей# Очистка memory cache# Convert to MBu'
Система кэширования данных Tinkoff API
'u'Кэширование данных Tinkoff API с поддержкой инкрементального обновления'u'Сохранение списка инструментов в кэш'b'pyarrow'u'pyarrow'b'cached_at'u'cached_at'b'instruments_'u'instruments_'u'✅ Инструменты типа ''u'' сохранены в кэш ('u'❌ Ошибка сохранения инструментов в кэш: 'u'Загрузка списка инструментов из кэша'u'Инструменты загружены из memory cache: 'u'✅ Инструменты загружены из кэша: 'u'❌ Ошибка загрузки инструментов из кэша: 'u'Сохранение свечей в кэш'b'timeframe'u'timeframe'b'date_str'u'date_str'b'candles_'u'candles_'u'✅ Свечи 'u') сохранены в кэш ('u'❌ Ошибка сохранения свечей в кэш: 'u'Загрузка свечей из кэша'u'✅ Свечи загружены из кэша: 'b') - 'u') - 'u'❌ Ошибка загрузки свечей из кэша: 'u'Поиск всех кэшированных периодов для инструмента'b'_*.parquet'u'_*.parquet'u'Не удалось обработать файл кэша 'u'Инкрементальное обновление кэша свечей'u'Ошибка загрузки кэша 'u'✅ Кэш свечей обновлен инкрементально: 'u'Сохранение метаданных кэша'u'Ошибка сохранения метаданных 'u'Загрузка метаданных кэша'u'Ошибка загрузки метаданных 'u'Проверка актуальности кэша'u'Очистка кэша'b'*.parquet'u'*.parquet'u'✅ Кэш инструментов очищен'u'✅ Кэш свечей очищен'u'❌ Ошибка очистки кэша: 'u'Статистика кэша'b'instruments_cache_size'u'instruments_cache_size'b'candles_cache_size'u'candles_cache_size'b'memory_cache_entries'u'memory_cache_entries'u'Общий размер кэша в мегабайтах'b'**/*'u'**/*'u'PythonScripts.trading_system.tbank_api.tbank_cache'u'trading_system.tbank_api.tbank_cache'u'tbank_api.tbank_cache'u'tbank_cache'
Конфигурация для модуля Т-банка API
Класс конфигурации для Т-банка APIhttps://api.tbank.ru/investments/v1api_urldefault_timeframesupported_timeframescache_duration_minutesDEFAULT_CONFIGconfig_fileload_configЗагрузка конфигурации из файлаuser_config✅ Конфигурация загружена из ⚠️ Ошибка загрузки конфигурации: ℹ️ Файл конфигурации не найден: create_default_configСоздание файла конфигурации по умолчаниюmakedirs✅ Создан файл конфигурации: ℹ️ Пожалуйста, добавьте ваш API ключ в файл конфигурации❌ Ошибка создания файла конфигурации: Сохранение конфигурации в файл✅ Конфигурация сохранена в ❌ Ошибка сохранения конфигурации: defaultПолучение значения конфигурацииУстановка значения конфигурацииПолучение API ключа из конфигурацииset_api_keyУстановка API ключа✅ API ключ сохранен в конфигурацииvalidate_configВалидация конфигурацииrequired_fieldsfieldis_api_key_setПроверка, установлен ли API ключget_config_pathПолучение пути к файлу конфигурации# tbank_api/tbank_config.py# Создаем папку если не существует# Пустой ключ по умолчаниюu'
Конфигурация для модуля Т-банка API
'u'Класс конфигурации для Т-банка API'b'https://api.tbank.ru/investments/v1'u'https://api.tbank.ru/investments/v1'b'api_url'u'api_url'b'timeout'u'timeout'b'max_retries'u'max_retries'b'default_timeframe'u'default_timeframe'b'supported_timeframes'u'supported_timeframes'b'cache_duration_minutes'u'cache_duration_minutes'u'Загрузка конфигурации из файла'u'✅ Конфигурация загружена из 'u'⚠️ Ошибка загрузки конфигурации: 'u'ℹ️ Файл конфигурации не найден: 'u'Создание файла конфигурации по умолчанию'b'api_key'u'api_key'u'✅ Создан файл конфигурации: 'u'ℹ️ Пожалуйста, добавьте ваш API ключ в файл конфигурации'u'❌ Ошибка создания файла конфигурации: 'u'Сохранение конфигурации в файл'u'✅ Конфигурация сохранена в 'u'❌ Ошибка сохранения конфигурации: 'u'Получение значения конфигурации'u'Установка значения конфигурации'u'Получение API ключа из конфигурации'u'Установка API ключа'u'✅ API ключ сохранен в конфигурации'u'Валидация конфигурации'u'Проверка, установлен ли API ключ'u'Получение пути к файлу конфигурации'u'PythonScripts.trading_system.tbank_api.tbank_config'u'trading_system.tbank_api.tbank_config'u'tbank_api.tbank_config'u'tbank_config'
Модуль загрузки данных с БЕЗОПАСНЫМИ оптимизациями
optimized_data_managerTBankDataManagerTBankDataLoaderЗагрузчик данных с безопасными оптимизациямиdata_manager✅ TBankDataLoader с безопасными оптимизациями инициализированЗагрузка данных с безопасными оптимизациями� Загрузка данных для Не удалось загрузить данные для Получить статистику производительностиПолучить детальную аналитикуupdate_recent_dataget_current_pricesis_configuredСтандартизация данных (без изменений)Отсутствует обязательная колонка: Получить расширенную аналитику# tbank_api/tbank_data_loader.py# ✅ ПЕРЕКЛЮЧАЕМСЯ НА БЕЗОПАСНУЮ ОПТИМИЗИРОВАННУЮ ВЕРСИЮ# Используем безопасный оптимизированный менеджер# ... остальные методы без изменений ...# В класс TBankDataLoader добавьте:u'
Модуль загрузки данных с БЕЗОПАСНЫМИ оптимизациями
'u'Загрузчик данных с безопасными оптимизациями'u'✅ TBankDataLoader с безопасными оптимизациями инициализирован'u'Загрузка данных с безопасными оптимизациями'u'� Загрузка данных для 'u'Не удалось загрузить данные для 'u'Получить статистику производительности'u'Получить детальную аналитику'u'Стандартизация данных (без изменений)'u'Отсутствует обязательная колонка: 'u'Получить расширенную аналитику'u'PythonScripts.trading_system.tbank_api.tbank_data_loader'u'trading_system.tbank_api.tbank_data_loader'u'tbank_api.tbank_data_loader'u'tbank_data_loader'
Умный менеджер данных с кэшированием для Tinkoff API
Умный менеджер данных с двухуровневым кэшированием
        Получение исторических данных с использованием кэша
        ✅ Данные загружены из кэша: � Загрузка данных из API: 
        Инкрементальное обновление данных (догрузка свежих данных)
        # tbank_api/tbank_data_manager.py# Определяем период для догрузки# Загружаем свежие данные# Инкрементальное обновление кэшаu'
Умный менеджер данных с кэшированием для Tinkoff API
'u'Умный менеджер данных с двухуровневым кэшированием'u'
        Получение исторических данных с использованием кэша
        'u'✅ Данные загружены из кэша: 'u'� Загрузка данных из API: 'u'
        Инкрементальное обновление данных (догрузка свежих данных)
        'u'PythonScripts.trading_system.tbank_api.tbank_data_manager'u'trading_system.tbank_api.tbank_data_manager'u'tbank_api.tbank_data_manager'u'tbank_data_manager'
Графический интерфейс для работы с API Т-банка
tbank_data_loaderВкладка для работы с API Т-банкаmain_apptoken_varsymbol_vardays_back_varloaded_dataavailable_instruments� T-Банк API - Загрузка рыночных данных� Настройка APIapi_frameAPI Токен:*token_entry� Проверить подключение� Сохранить токенsave_tokenИскать� Все инструментыload_all_instrumentsinstruments_frameinstruments_tree<<TreeviewSelect>>on_instrument_select� Загрузка данныхdata_frameТикер:Дней назад:Таймфрейм:Использовать кэширование� Загрузить данныеload_data� Обновить свежие данные� Использовать в системеuse_in_main_system⚡ Управление кэшированием и оптимизациямиcache_framecache_buttons_frame�️ Очистить кэш� Статистика кэшаshow_cache_stats� Статистика оптимизацийshow_optimization_stats� Перезагрузить инструментыadvanced_buttons_frame� Расширенная аналитикаshow_advanced_analytics�️ Дашборд производительностиshow_performance_dashboardai_buttons_frame� AI Предсказанияshow_ai_predictions⚡ Автооптимизацияtoggle_auto_optimization� История оптимизацийshow_optimization_historymemory_buttons_frame� Очистка памятиforce_memory_cleanup� Управление алертамиmanage_memory_alerts� Настройки памятиconfigure_memory_settings� Память: Нормаmemory_status_varmemory_status_label_start_memory_monitoring� AI: Активенai_status_varai_status_labelРежим: � Расширенная аналитика активнаmode_labelРежим: �️ Безопасные оптимизации активныДобро пожаловать в T-Банк API!

1. Настройте API токен
2. Найдите нужный инструмент
3. Загрузите исторические данные
4. Используйте данные в торговой системе
load_saved_tokenПоказать статистику оптимизаций (ОБНОВЛЕННАЯ ВЕРСИЯ)prediction_statsoptimization_info� РАСШИРЕННАЯ СТАТИСТИКА СИСТЕМЫ

            � ОСНОВНЫЕ МЕТРИКИ:
            • Запросов: 
            • Попаданий в кэш: )
            • Экономия памяти:  MB
            • Средняя экономия:  MB/запрос

            � AI СИСТЕМА:
            • Предсказаний: 
            • Точность: 
            • Автооптимизация: ВКЛВЫКЛ
            • Оптимизаций: 

            � СОСТОЯНИЕ КЭША:
            • Файлов инструментов: 
            • Файлов свечей: 
            • Общий размер:  MB
            • Записей в памяти: 

            � ПРОИЗВОДИТЕЛЬНОСТЬ:
            • Тренд Hit Ratio: 
            • Использование памяти:  MB
            • Активных алертов: Не удалось получить статистику: Показать AI предсказания и статистику� AI СИСТЕМА ПРЕДСКАЗАНИЙ

            � СТАТИСТИКА ПРЕДСКАЗАНИЙ:
            • Всего предсказаний: 
            • Успешных предсказаний: 

            � ВЕРОЯТНЫЕ ЗАПРОСЫ (следующие 24 часа):prediction_text✅ ВЫСОКАЯ⚠️ СРЕДНЯЯℹ️ НИЗКАЯ. 
� Пока нет данных для предсказаний

� ПОПУЛЯРНЫЕ ИНСТРУМЕНТЫ: обращенийAI ПредсказанияНе удалось получить AI предсказания: Включить/выключить автооптимизациюcurrent_statenew_stateВКЛЮЧЕНАВЫКЛЮЧЕНА� AI: childcgetАвтооптимизацияАвтооптимизация !

Система будет "!\n\n""Система будет "автоматически оптимизировать параметрыработать в ручном режимеНе удалось изменить настройки оптимизации: Показать историю оптимизаций� ИСТОРИЯ АВТООПТИМИЗАЦИЙ:

history_textrecord%d.%m %H:%Maction_type   �️ Автоочистка:    ⬆️ Увеличение TTL:    ⬇️ Уменьшение TTL:    ⚙️ snapshot   � Hit Ratio:    � Размер кэша:  MB

� Оптимизации еще не выполнялись

⚙️ ТЕКУЩИЕ НАСТРОЙКИ:
• Автооптимизация: • Автоочистка: • Порог очистки:  MB
• Макс. размер: Не удалось получить историю оптимизаций: Загрузка сохраненного токенаsaved_tokenlog_info✅ Загружен сохраненный токен APIlog_errorОшибка загрузки токена: Сохранение токена APIВведите API токенТокен успешно сохранен в конфигурации✅ Токен API сохраненОшибка сохранения токена: test_loader✅ Подключение к T-Банк API успешно!✅ Подключение к API успешно❌ Не удалось подключиться к APIОшибка подключения: Загрузка всех инструментовСначала настройте API токен� Загрузка списка инструментов...Не удалось загрузить инструментыОшибка загрузки инструментов: Сначала загрузите список инструментовfiltered_instruments� Найдено Обработчик выбора инструмента в таблице✅ Выбран инструмент: Загрузка исторических данных (ОБНОВЛЕННАЯ ВЕРСИЯ)Выберите или введите тикер инструментаКоличество дней должно быть положительным� AI: записано обращение к AI predictor недоступен для записи обращенийНе удалось записать обращение для AI: .
Возможные причины:
• Неправильный тикер
• Проблемы с подключением к API
• Нет данных за выбранный период".\n""Возможные причины:\n""• Неправильный тикер\n""• Проблемы с подключением к API\n""• Нет данных за выбранный период"min_datemax_datemax_priceОшибка форматирования данных: ✅ ДАННЫЕ УСПЕШНО ЗАГРУЖЕНЫ� Инструмент: � Период: � Записей: ⏰ Таймфрейм: � Кэширование: info_lines (Hit Ratio: ⚡ Производительность:  запросовНе удалось получить статистику производительности: Данные для  успешно загружены!

� Записей: " успешно загружены!\n\n""� Записей: "
� Период: "� Период: " дней
⏰ Таймфрейм: " дней\n""⏰ Таймфрейм: "
� Кэширование: "� Кэширование: "

Теперь вы можете использовать данные в торговой системе."Теперь вы можете использовать данные в торговой системе."❌ Ошибка загрузки данных: Ошибка загрузки данных для :

":\n\n"""

Проверьте:
• Правильность тикера
• Наличие интернет-подключения
• Корректность API ключа
• Доступность инструмента"Проверьте:\n""• Правильность тикера\n""• Наличие интернет-подключения\n""• Корректность API ключа\n""• Доступность инструмента"detailed_errorОшибка загрузкиИнкрементальное обновление свежих данныхВведите символ для обновления� Обновление свежих данных для ✅ Данные обновлены! Добавлено  новых записей успешно обновлены
Добавлено " успешно обновлены\n""Добавлено "ℹ️ Нет новых данных или данные уже актуальныНет новых данных для  или данные уже актуальны❌ Ошибка обновления данных: Использование загруженных данных в основной системе� Данные для  переданы в торговую систему готовы к использованию в торговой системе!

Теперь вы можете:
1. Перейти на вкладку 'Управление системой'
2. Нажать 'Запустить тест'
3. Проанализировать результаты" готовы к использованию в торговой системе!\n\n""Теперь вы можете:\n""1. Перейти на вкладку 'Управление системой'\n""2. Нажать 'Запустить тест'\n""3. Проанализировать результаты"Не удалось передать данные в основную системуОшибка передачи данных: Вы уверены, что хотите очистить весь кэш?

Это удалит все сохраненные данные инструментов и свечей."Вы уверены, что хотите очистить весь кэш?\n\n""Это удалит все сохраненные данные инструментов и свечей."�️ Кэш успешно очищенКэш успешно очищенОшибка очистки кэша: Показать статистику кэша� СТАТИСТИКА КЭША:

            • Файлов инструментов: 
            • Записей в памяти:  MB

            � Кэширование ускоряет загрузку данных
            и уменьшает количество запросов к API.Добавление информационного сообщения в лог
[%H:%M:%S] seeДобавление сообщения об ошибке в лог] ❌ Показать расширенную аналитикуtrendsalerts� РАСШИРЕННАЯ АНАЛИТИКА СИСТЕМЫ

            � ОСНОВНЫЕ МЕТРИКИ:
            • Запросов:  MB

            � СОСТОЯНИЕ КЭША:
            • Файлов инструментов:  MB

            � ТРЕНДЫ ПРОИЗВОДИТЕЛЬНОСТИ:
            • Hit Ratio: 
            • Время ответа: 
            • Активных алертов: 
            • Время работы:  часов
            • Точек данных: analytics_text

� АКТИВНЫЕ АЛЕРТЫ:
⚠️❌level_icon [Z+00:00alert_timehit_historylatest_hit
� ИСТОРИЯ МЕТРИК (последние  точек)
• Последний Hit Ratio: Расширенная аналитикаНе удалось получить аналитику: Показать дашборд производительности✅status_iconОтличнаяperformance_status�status_colorХорошаяТребует оптимизации�️ ДАШБОРД ПРОИЗВОДИТЕЛЬНОСТИ

             СТАТУС СИСТЕМЫ: 
             ПРОИЗВОДИТЕЛЬНОСТЬ: 

            � ОСНОВНЫЕ ПОКАЗАТЕЛИ:
            • Hit Ratio: 
            • Среднее время ответа:  ms
            • Тренд производительности: 

            � ИСПОЛЬЗОВАНИЕ РЕСУРСОВ:
            • Использование памяти:  MB
            • Размер кэша: 

            � СИСТЕМНЫЕ МЕТРИКИ:
            • Время работы:  часов
            • Всего запросов: 
            • Промахов кэша: 

            ⚡ ФУНКЦИОНАЛЬНОСТЬ:
            • Расширенная аналитика: ВключенаВыключена
            • Мониторинг производительности: АктивенНеактивен
            • Метрики в реальном времени: РаботаютНе работаютdashboard_textДашборд производительностиНе удалось загрузить дашборд: Запуск мониторинга памяти в фонеmemory_monitor_update_memory_statusОшибка мониторинга памяти: Обновление статуса памяти� КРИТИЧЕСКИ1500⚠️ ВЫСОКОЕℹ️ ПОВЫШЕННОЕ✅ НОРМАafter_update_memory_ui� Память:  MB)Не удалось обновить статус памяти: Обновление UI памяти в основном потокеПринудительная очистка памятиgccollectmemory_afterОчистка памяти✅ Память успешно очищена!

Текущее использование: "✅ Память успешно очищена!\n\n""Текущее использование: " MB
Кэш очищен, сборка мусора выполнена." MB\n""Кэш очищен, сборка мусора выполнена."� Выполнена принудительная очистка памятиНе удалось очистить память: Управление алертами памяти (упрощенная версия)memory_alerts� УПРАВЛЕНИЕ АЛЕРТАМИ ПАМЯТИ

    Текущее использование:  MB
    Активных алертов памяти: 

    alert_textАКТИВНЫЕ АЛЕРТЫ:
time_str   Время: ✅ Нет активных алертов памяти

Управление алертами памяти500x400✅ Подтвердить все алертыacknowledge_all_memory_alertscleanup_and_closeНе удалось управлять алертами: Подтвердить все алерты памяти (безопасная версия)confirmed_countНе удалось подтвердить алерт ✅ Подтверждено  алертов памяти✅ Подтверждены алерты памяти ( шт.)Не удалось подтвердить алерты: Очистка памяти и закрытие диалогаНастройка параметров памяти⚙️ НАСТРОЙКИ ПАМЯТИ И ОПТИМИЗАЦИИ

            Текущие настройки:
            • Автоочистка: 
            • Порог очистки:  MB
            • Макс. размер кэша:  MB
            • Минимальный Hit Ratio: %

            Рекомендации для текущей системы:
            • Порог очистки: 500-1000 MB
            • Макс. размер: 1000-2000 MB  
            • Hit Ratio: 20-30%

            Хотите применить рекомендуемые настройки?settings_textНастройки памяти✅ Настройки памяти обновлены!

Новые параметры:
• Порог очистки: 800 MB
• Макс. размер: 1500 MB
• Min Hit Ratio: 25%
• Автоочистка: ВКЛ"✅ Настройки памяти обновлены!\n\n""Новые параметры:\n""• Порог очистки: 800 MB\n""• Макс. размер: 1500 MB\n""• Min Hit Ratio: 25%\n""• Автоочистка: ВКЛ"⚙️ Применены рекомендуемые настройки памятиНе удалось настроить параметры: # tbank_api/tbank_gui.py# ✅ ДОБАВЛЯЕМ ttk# Импорты для работы с кэшированием# Инициализация загрузчика данных# Данные# Основной фрейм с прокруткой# === СЕКЦИЯ 1: НАСТРОЙКА API ===# Токен API# Кнопки управления API# === СЕКЦИЯ 2: ПОИСК ИНСТРУМЕНТОВ ===# Таблица инструментов# Scrollbar для таблицы# Обработчик выбора инструмента# === СЕКЦИЯ 3: ЗАГРУЗКА ДАННЫХ ===# Параметры загрузки# Кнопки загрузки# === СЕКЦИЯ 4: УПРАВЛЕНИЕ КЭШЕМ И ОПТИМИЗАЦИИ ===# ✅ НОВАЯ КНОПКА# В секции "Управление кэшированием и оптимизациями" ДОБАВЬТЕ:# Новые кнопки для расширенной аналитики# В секции "Управление кэшированием и оптимизациями" ДОБАВИМ:# Новые кнопки для AI-функций# В секции "Управление кэшированием и оптимизациями" после AI кнопок:# Кнопки для управления памятью# Индикатор памяти# Запускаем мониторинг памяти# Индикатор статуса AI# Обновленная информация о режиме# Информация о режиме оптимизаций# Информация о загрузке# Загружаем сохраненный токен# Получаем AI статистику# Получаем статистику предсказаний# Получаем вероятные запросы# Топ-5# Информация о популярных инструментах# Обновляем конфигурацию# Обновляем цвет индикатора# Последние сначала# Добавляем статистику на момент оптимизации# Текущие настройки оптимизации# Очищаем таблицу# Заполняем таблицу# Заполняем таблицу отфильтрованными данными# ✅ ЗАПИСЫВАЕМ ОБРАЩЕНИЕ ДЛЯ AI ПРЕДСКАЗАНИЙ (ЗАЩИЩЕННАЯ ВЕРСИЯ)# Проверяем, что smart_predictor существует и доступен# Загружаем данные# Форматируем информацию о загруженных данных# Показываем статистику производительности, если доступно# Более информативное сообщение об ошибке# Формируем текст аналитики# Добавляем алерты если есть# Показываем первые 5# Форматируем время# Добавляем историю метрик# Определяем статус системы# Проверяем каждые 30 секунд# Обновляем в основном потоке# Находим и обновляем лейбл# Очищаем кэш# Очищаем memory cache# Сбор мусора# Получаем обновленную статистику# ✅ ПРОСТАЯ И НАДЕЖНАЯ ОБРАБОТКА ВРЕМЕНИ# Объект datetime# Строка или другой формат# Остальной код без изменений...# Создаем диалог с кнопками# Текст алертов# Кнопки действий# Применяем рекомендуемые настройкиu'
Графический интерфейс для работы с API Т-банка
'u'Вкладка для работы с API Т-банка'u'� T-Банк API - Загрузка рыночных данных'u'� Настройка API'b'15'u'15'u'API Токен:'b'*'u'*'u'� Проверить подключение'u'� Сохранить токен'u'Искать'u'� Все инструменты'b'<<TreeviewSelect>>'u'<<TreeviewSelect>>'u'� Загрузка данных'u'Тикер:'u'Дней назад:'u'Таймфрейм:'u'Использовать кэширование'u'� Загрузить данные'u'� Обновить свежие данные'u'� Использовать в системе'u'⚡ Управление кэшированием и оптимизациями'u'�️ Очистить кэш'u'� Статистика кэша'u'� Статистика оптимизаций'u'� Перезагрузить инструменты'u'� Расширенная аналитика'u'�️ Дашборд производительности'u'� AI Предсказания'u'⚡ Автооптимизация'u'� История оптимизаций'u'� Очистка памяти'u'� Управление алертами'u'� Настройки памяти'u'� Память: Норма'u'� AI: Активен'u'Режим: � Расширенная аналитика активна'u'Режим: �️ Безопасные оптимизации активны'u'Добро пожаловать в T-Банк API!

'u'1. Настройте API токен
'u'2. Найдите нужный инструмент
'u'3. Загрузите исторические данные
'u'4. Используйте данные в торговой системе
'u'Показать статистику оптимизаций (ОБНОВЛЕННАЯ ВЕРСИЯ)'u'� РАСШИРЕННАЯ СТАТИСТИКА СИСТЕМЫ

            � ОСНОВНЫЕ МЕТРИКИ:
            • Запросов: 'u'
            • Попаданий в кэш: 'u')
            • Экономия памяти: 'u' MB
            • Средняя экономия: 'u' MB/запрос

            � AI СИСТЕМА:
            • Предсказаний: 'u'
            • Точность: 'u'
            • Автооптимизация: 'u'ВКЛ'u'ВЫКЛ'u'
            • Оптимизаций: 'u'

            � СОСТОЯНИЕ КЭША:
            • Файлов инструментов: 'u'
            • Файлов свечей: 'u'
            • Общий размер: 'u' MB
            • Записей в памяти: 'u'

            � ПРОИЗВОДИТЕЛЬНОСТЬ:
            • Тренд Hit Ratio: 'u'
            • Использование памяти: 'u' MB
            • Активных алертов: 'u'Не удалось получить статистику: 'u'Показать AI предсказания и статистику'u'� AI СИСТЕМА ПРЕДСКАЗАНИЙ

            � СТАТИСТИКА ПРЕДСКАЗАНИЙ:
            • Всего предсказаний: 'u'
            • Успешных предсказаний: 'u'

            � ВЕРОЯТНЫЕ ЗАПРОСЫ (следующие 24 часа):'u'✅ ВЫСОКАЯ'u'⚠️ СРЕДНЯЯ'u'ℹ️ НИЗКАЯ'b'. 'u'. 'u'
� Пока нет данных для предсказаний'u'

� ПОПУЛЯРНЫЕ ИНСТРУМЕНТЫ:'u' обращений'u'AI Предсказания'u'Не удалось получить AI предсказания: 'u'Включить/выключить автооптимизацию'u'ВКЛЮЧЕНА'u'ВЫКЛЮЧЕНА'u'� AI: 'b'winfo_children'u'winfo_children'b'textvariable'u'textvariable'u'Автооптимизация'u'Автооптимизация 'u'!

Система будет 'u'автоматически оптимизировать параметры'u'работать в ручном режиме'u'Не удалось изменить настройки оптимизации: 'u'Показать историю оптимизаций'u'� ИСТОРИЯ АВТООПТИМИЗАЦИЙ:

'b'%d.%m %H:%M'u'%d.%m %H:%M'u'   �️ Автоочистка: 'u'   ⬆️ Увеличение TTL: 'u'   ⬇️ Уменьшение TTL: 'u'   ⚙️ 'u'   � Hit Ratio: 'u'   � Размер кэша: 'b' MB

'u' MB

'u'� Оптимизации еще не выполнялись

'u'⚙️ ТЕКУЩИЕ НАСТРОЙКИ:
'u'• Автооптимизация: 'u'• Автоочистка: 'u'• Порог очистки: 'b' MB
'u' MB
'u'• Макс. размер: 'u'Не удалось получить историю оптимизаций: 'u'Загрузка сохраненного токена'u'✅ Загружен сохраненный токен API'u'Ошибка загрузки токена: 'u'Сохранение токена API'u'Введите API токен'u'Токен успешно сохранен в конфигурации'u'✅ Токен API сохранен'u'Ошибка сохранения токена: 'u'✅ Подключение к T-Банк API успешно!'u'✅ Подключение к API успешно'u'❌ Не удалось подключиться к API'u'Ошибка подключения: 'u'Загрузка всех инструментов'u'Сначала настройте API токен'u'� Загрузка списка инструментов...'u'Не удалось загрузить инструменты'u'Ошибка загрузки инструментов: 'u'Сначала загрузите список инструментов'u'� Найдено 'u'Обработчик выбора инструмента в таблице'u'✅ Выбран инструмент: 'u'Загрузка исторических данных (ОБНОВЛЕННАЯ ВЕРСИЯ)'u'Выберите или введите тикер инструмента'u'Количество дней должно быть положительным'b'data_manager'u'data_manager'b'smart_predictor'b'record_access'u'record_access'u'� AI: записано обращение к 'u'AI predictor недоступен для записи обращений'u'Не удалось записать обращение для AI: 'u'.
Возможные причины:
• Неправильный тикер
• Проблемы с подключением к API
• Нет данных за выбранный период'u'Ошибка форматирования данных: 'u'✅ ДАННЫЕ УСПЕШНО ЗАГРУЖЕНЫ'u'� Инструмент: 'u'� Период: 'u'� Записей: 'u'⏰ Таймфрейм: 'u'� Кэширование: 'b'get_performance_stats'u'get_performance_stats'b' (Hit Ratio: 'u' (Hit Ratio: 'u'⚡ Производительность: 'u' запросов'u'Не удалось получить статистику производительности: 'u'Данные для 'u' успешно загружены!

� Записей: 'u'
� Период: 'u' дней
⏰ Таймфрейм: 'u'
� Кэширование: 'u'

Теперь вы можете использовать данные в торговой системе.'u'❌ Ошибка загрузки данных: 'u'Ошибка загрузки данных для 'b':

'u':

'u'

Проверьте:
• Правильность тикера
• Наличие интернет-подключения
• Корректность API ключа
• Доступность инструмента'u'Ошибка загрузки'u'Инкрементальное обновление свежих данных'u'Введите символ для обновления'u'� Обновление свежих данных для 'u'✅ Данные обновлены! Добавлено 'u' новых записей'u' успешно обновлены
Добавлено 'u'ℹ️ Нет новых данных или данные уже актуальны'u'Нет новых данных для 'u' или данные уже актуальны'u'❌ Ошибка обновления данных: 'u'Использование загруженных данных в основной системе'u'� Данные для 'u' переданы в торговую систему'u' готовы к использованию в торговой системе!

Теперь вы можете:
1. Перейти на вкладку 'Управление системой'
2. Нажать 'Запустить тест'
3. Проанализировать результаты'b'data_file'u'data_file'u'Не удалось передать данные в основную систему'u'Ошибка передачи данных: 'u'Вы уверены, что хотите очистить весь кэш?

Это удалит все сохраненные данные инструментов и свечей.'u'�️ Кэш успешно очищен'u'Кэш успешно очищен'u'Ошибка очистки кэша: 'u'Показать статистику кэша'u'� СТАТИСТИКА КЭША:

            • Файлов инструментов: 'u'
            • Записей в памяти: 'u' MB

            � Кэширование ускоряет загрузку данных
            и уменьшает количество запросов к API.'u'Добавление информационного сообщения в лог'b'
['u'
['b'%H:%M:%S'u'%H:%M:%S'b'] 'u'] 'u'Добавление сообщения об ошибке в лог'u'] ❌ 'u'Показать расширенную аналитику'u'� РАСШИРЕННАЯ АНАЛИТИКА СИСТЕМЫ

            � ОСНОВНЫЕ МЕТРИКИ:
            • Запросов: 'u' MB

            � СОСТОЯНИЕ КЭША:
            • Файлов инструментов: 'u' MB

            � ТРЕНДЫ ПРОИЗВОДИТЕЛЬНОСТИ:
            • Hit Ratio: 'u'
            • Время ответа: 'u'
            • Активных алертов: 'u'
            • Время работы: 'u' часов
            • Точек данных: 'u'

� АКТИВНЫЕ АЛЕРТЫ:
'u'⚠️'u'❌'b' ['u' ['b'Z'u'Z'b'+00:00'u'+00:00'u'
� ИСТОРИЯ МЕТРИК (последние 'u' точек)'u'
• Последний Hit Ratio: 'u'Расширенная аналитика'u'Не удалось получить аналитику: 'u'Показать дашборд производительности'u'✅'u'Отличная'u'�'u'Хорошая'u'Требует оптимизации'u'�️ ДАШБОРД ПРОИЗВОДИТЕЛЬНОСТИ

            'u' СТАТУС СИСТЕМЫ: 'b'
            'u'
            'u' ПРОИЗВОДИТЕЛЬНОСТЬ: 'u'

            � ОСНОВНЫЕ ПОКАЗАТЕЛИ:
            • Hit Ratio: 'u'
            • Среднее время ответа: 'u' ms
            • Тренд производительности: 'u'

            � ИСПОЛЬЗОВАНИЕ РЕСУРСОВ:
            • Использование памяти: 'u' MB
            • Размер кэша: 'u'

            � СИСТЕМНЫЕ МЕТРИКИ:
            • Время работы: 'u' часов
            • Всего запросов: 'u'
            • Промахов кэша: 'u'

            ⚡ ФУНКЦИОНАЛЬНОСТЬ:
            • Расширенная аналитика: 'u'Включена'u'Выключена'u'
            • Мониторинг производительности: 'u'Активен'u'Неактивен'u'
            • Метрики в реальном времени: 'u'Работают'u'Не работают'u'Дашборд производительности'u'Не удалось загрузить дашборд: 'u'Запуск мониторинга памяти в фоне'u'Ошибка мониторинга памяти: 'u'Обновление статуса памяти'u'� КРИТИЧЕСКИ'u'⚠️ ВЫСОКОЕ'u'ℹ️ ПОВЫШЕННОЕ'u'✅ НОРМА'u'� Память: 'b' MB)'u' MB)'u'Не удалось обновить статус памяти: 'u'Обновление UI памяти в основном потоке'u'Принудительная очистка памяти'b'_memory_cache'u'_memory_cache'u'Очистка памяти'u'✅ Память успешно очищена!

Текущее использование: 'u' MB
Кэш очищен, сборка мусора выполнена.'u'� Выполнена принудительная очистка памяти'u'Не удалось очистить память: 'u'Управление алертами памяти (упрощенная версия)'u'� УПРАВЛЕНИЕ АЛЕРТАМИ ПАМЯТИ

    Текущее использование: 'u' MB
    Активных алертов памяти: 'b'

    'u'

    'u'АКТИВНЫЕ АЛЕРТЫ:
'u'   Время: 'u'✅ Нет активных алертов памяти

'u'Управление алертами памяти'b'500x400'u'500x400'u'✅ Подтвердить все алерты'u'Не удалось управлять алертами: 'u'Подтвердить все алерты памяти (безопасная версия)'u'Не удалось подтвердить алерт 'u'✅ Подтверждено 'u' алертов памяти'u'✅ Подтверждены алерты памяти ('u' шт.)'u'Не удалось подтвердить алерты: 'u'Очистка памяти и закрытие диалога'u'Настройка параметров памяти'u'⚙️ НАСТРОЙКИ ПАМЯТИ И ОПТИМИЗАЦИИ

            Текущие настройки:
            • Автоочистка: 'u'
            • Порог очистки: 'u' MB
            • Макс. размер кэша: 'u' MB
            • Минимальный Hit Ratio: 'u'%

            Рекомендации для текущей системы:
            • Порог очистки: 500-1000 MB
            • Макс. размер: 1000-2000 MB  
            • Hit Ratio: 20-30%

            Хотите применить рекомендуемые настройки?'u'Настройки памяти'u'✅ Настройки памяти обновлены!

Новые параметры:
• Порог очистки: 800 MB
• Макс. размер: 1500 MB
• Min Hit Ratio: 25%
• Автоочистка: ВКЛ'u'⚙️ Применены рекомендуемые настройки памяти'u'Не удалось настроить параметры: 'u'PythonScripts.trading_system.tbank_api.tbank_gui'u'trading_system.tbank_api.tbank_gui'u'tbank_api.tbank_gui'u'tbank_gui'
Тестирование AI-функций
tbank_api.optimized_data_managertest_ai_features� ТЕСТИРОВАНИЕ AI-ФУНКЦИЙmanager1. � Тестирование умного предсказателя...   • Отслеживается инструментов: tracked_symbols   • Предсказаний:    ✅ Умный предсказатель работает   ❌ Ошибка предсказателя: 2. ⚙️ Тестирование автооптимизатора...optimizer_info   • Автооптимизация:    • История оптимизаций:    ✅ Автооптимизатор работает   ❌ Ошибка оптимизатора: 3. � Тестирование полной аналитики...   • Hit Ratio:    • Размер кэша:    ✅ Полная аналитика работает   ❌ Ошибка аналитики: 
� AI-ФУНКЦИИ РАБОТАЮТ!� Система теперь предсказывает ваши запросы и самооптимизируется# test_ai_features.py# Тест 1: Умный предсказатель# Симулируем несколько обращений# Тест 2: Автооптимизатор# Запускаем оптимизацию# Тест 3: Полная аналитикаu'
Тестирование AI-функций
'u'� ТЕСТИРОВАНИЕ AI-ФУНКЦИЙ'u'1. � Тестирование умного предсказателя...'u'   • Отслеживается инструментов: 'b'tracked_symbols'u'tracked_symbols'u'   • Предсказаний: 'u'   ✅ Умный предсказатель работает'u'   ❌ Ошибка предсказателя: 'u'2. ⚙️ Тестирование автооптимизатора...'u'   • Автооптимизация: 'u'   • История оптимизаций: 'u'   ✅ Автооптимизатор работает'u'   ❌ Ошибка оптимизатора: 'u'3. � Тестирование полной аналитики...'u'   • Hit Ratio: 'u'   • Размер кэша: 'u'   ✅ Полная аналитика работает'u'   ❌ Ошибка аналитики: 'u'
� AI-ФУНКЦИИ РАБОТАЮТ!'u'� Система теперь предсказывает ваши запросы и самооптимизируется'u'Documents.PythonScripts.trading_system.test_ai_features'u'PythonScripts.trading_system.test_ai_features'u'trading_system.test_ai_features'u'test_ai_features'
Тестовый скрипт для проверки расширенной аналитики
basicConfig%(asctime)s - %(levelname)s - %(message)stest_analyticsТестирование модуля аналитикиtbank_api.advanced_analyticsMockCacheManager75%150.5245.342� Тестирование AdvancedCacheAnalytics...mock_manager� Тренды производительности:  ✅ Тестирование завершено успешно!Убедитесь, что:1. Установлен psutil: pip install psutil2. Файл advanced_analytics.py в папке tbank_api/❌ Ошибка тестирования: # test_analytics.py# Добавляем путь к проекту# Импортируем после настройки пути# Создаем mock менеджер для тестирования# Создаем экземпляр# Ждем немного для сбора метрик# Получаем трендыu'
Тестовый скрипт для проверки расширенной аналитики
'b'%(asctime)s - %(levelname)s - %(message)s'u'%(asctime)s - %(levelname)s - %(message)s'u'Тестирование модуля аналитики'b'75%'u'75%'u'� Тестирование AdvancedCacheAnalytics...'u'� Тренды производительности:'b'  'u'  'u'✅ Тестирование завершено успешно!'u'Убедитесь, что:'u'1. Установлен psutil: pip install psutil'u'2. Файл advanced_analytics.py в папке tbank_api/'u'❌ Ошибка тестирования: 'u'Documents.PythonScripts.trading_system.test_analytics'u'PythonScripts.trading_system.test_analytics'u'trading_system.test_analytics'u'test_analytics'
Полное тестирование системы с расширенной аналитикой
tbank_api.tbank_data_loadertest_complete_system� ПОЛНОЕ ТЕСТИРОВАНИЕ СИСТЕМЫloader✅ TBankDataLoader инициализирован
1. � Тестирование базовой аналитики...   • Запросов:    ✅ Базовая аналитика работает   ❌ Ошибка базовой аналитики: 
2. � Тестирование расширенной аналитики...   • Тренд Hit Ratio:    • Активных алертов:    • Время работы:  ч   ✅ Расширенная аналитика работает   ❌ Ошибка расширенной аналитики: 
3. � Тестирование полной аналитики...full_analytics   • Всего алертов:    • Алерт:    ❌ Ошибка полной аналитики: 
4. � Тестирование загрузки инструментов...   • Загружено инструментов:    ✅ Загрузка инструментов работает   ⚠️ Нет инструментов (возможно, нет API ключа)   ❌ Ошибка загрузки инструментов: 
5. � Тестирование статистики кэша...   • Файлов инструментов:    • Файлов свечей:    ✅ Статистика кэша работает   ❌ Ошибка статистики кэша: � ТЕСТИРОВАНИЕ ЗАВЕРШЕНО!� Система готова к использованию с расширенной аналитикой# test_complete_system.py# Инициализация# Тест 1: Базовая аналитика# Тест 2: Расширенная аналитика# Тест 4: Загрузка инструментов (если есть API ключ)# Тест 5: Статистика кэшаu'
Полное тестирование системы с расширенной аналитикой
'u'� ПОЛНОЕ ТЕСТИРОВАНИЕ СИСТЕМЫ'u'✅ TBankDataLoader инициализирован'u'
1. � Тестирование базовой аналитики...'u'   • Запросов: 'u'   ✅ Базовая аналитика работает'u'   ❌ Ошибка базовой аналитики: 'u'
2. � Тестирование расширенной аналитики...'u'   • Тренд Hit Ratio: 'u'   • Активных алертов: 'u'   • Время работы: 'u' ч'u'   ✅ Расширенная аналитика работает'u'   ❌ Ошибка расширенной аналитики: 'u'
3. � Тестирование полной аналитики...'u'   • Всего алертов: 'u'   • Алерт: 'u'   ❌ Ошибка полной аналитики: 'u'
4. � Тестирование загрузки инструментов...'u'   • Загружено инструментов: 'u'   ✅ Загрузка инструментов работает'u'   ⚠️ Нет инструментов (возможно, нет API ключа)'u'   ❌ Ошибка загрузки инструментов: 'u'
5. � Тестирование статистики кэша...'u'   • Файлов инструментов: 'u'   • Файлов свечей: 'u'   ✅ Статистика кэша работает'u'   ❌ Ошибка статистики кэша: 'u'� ТЕСТИРОВАНИЕ ЗАВЕРШЕНО!'u'� Система готова к использованию с расширенной аналитикой'u'Documents.PythonScripts.trading_system.test_complete_system'u'PythonScripts.trading_system.test_complete_system'u'trading_system.test_complete_system'u'test_complete_system'tbank_api.instrument_service_working� Тестирование исправленных импортов...service1✅ InstrumentService работаетservice2✅ InstrumentServiceWorking работает✅ Популярные акции: ❌ Ошибка: # Тест методовu'� Тестирование исправленных импортов...'u'✅ InstrumentService работает'u'✅ InstrumentServiceWorking работает'u'✅ Популярные акции: 'u'❌ Ошибка: 'u'Documents.PythonScripts.trading_system.test_fix'u'PythonScripts.trading_system.test_fix'u'trading_system.test_fix'u'test_fix'� Тест импорта модулей...Текущая директория: getcwdPython path: ✅ instrument_service_working импортирован успешно!✅ Сервис создан успешно!search_instruments_working✅ Поиск работает! Найдено: � Содержимое папки tbank_api/:   -    Папка tbank_api не найдена# Тест функциональностиu'� Тест импорта модулей...'u'Текущая директория: 'b'Python path: 'u'Python path: 'u'✅ instrument_service_working импортирован успешно!'u'✅ Сервис создан успешно!'u'✅ Поиск работает! Найдено: 'u'� Содержимое папки tbank_api/:'b'   - 'u'   - 'u'   Папка tbank_api не найдена'u'Documents.PythonScripts.trading_system.test_import'u'PythonScripts.trading_system.test_import'u'trading_system.test_import'u'test_import'� Тестирование сервиса инструментов...
1. � Получение списка российских акций...shares_to_dataframe✅ Успешно получено  российских акцийПервые 10 российских акций:
2. � Поиск российских инструментов...СберЛукойлНорникельsearch_queries
Поиск '':russian_instruments   Найдено российских инструментов: instr
3. � Получение ETF...russian_etfs✅ Найдено  российских ETF
4. � Информация по Сбербанку...   Лот:    Валюта:    Минимальный шаг цены: # Токен для тестирования# Тест 1: Получение акций# Тест 2: Поиск инструментов (упрощенный)# Тест 3: Получение ETF# Тест 4: Получение информации по конкретному инструментуu'� Тестирование сервиса инструментов...'u'
1. � Получение списка российских акций...'u'✅ Успешно получено 'u' российских акций'u'Первые 10 российских акций:'u'
2. � Поиск российских инструментов...'u'Сбер'u'Лукойл'u'Норникель'u'
Поиск ''b'':'u'':'u'   Найдено российских инструментов: 'u'
3. � Получение ETF...'u'✅ Найдено 'u' российских ETF'u'
4. � Информация по Сбербанку...'u'   Лот: 'u'   Валюта: 'u'   Минимальный шаг цены: 'u'Documents.PythonScripts.trading_system.test_instruments'u'PythonScripts.trading_system.test_instruments'u'trading_system.test_instruments'u'test_instruments'SimpleInstrumentsTabУпрощенная вкладка инструментов для тестированияload_sample_dataСоздание простого интерфейса� Инструменты - РАБОЧАЯ ВЕРСИЯСервис инструментов работает!
Используйте поиск для тестирования.info_labelТест поискаtest_searchТест подключенияclear_tableЗагрузка тестовых данныхАкцияБанк ВТБsample_dataРезультат поиска: ТестTESTТестовый инструментПоиск '' выполнен
(тестовый режим)Тест подключения к API✅ Подключение к Tinkoff API работает!Очистка таблицыТест упрощенной вкладки# Информация# Пример по умолчанию# Таблица для результатов# Простой тест - имитация поиска# Добавляем результат поискаu'Упрощенная вкладка инструментов для тестирования'u'Создание простого интерфейса'u'� Инструменты - РАБОЧАЯ ВЕРСИЯ'u'Сервис инструментов работает!
Используйте поиск для тестирования.'u'Тест поиска'u'Тест подключения'u'Загрузка тестовых данных'u'Акция'u'Банк ВТБ'u'Результат поиска: 'u'Тест'b'TEST'u'TEST'u'Тестовый инструмент'u'Поиск ''u'' выполнен
(тестовый режим)'u'Тест подключения к API'u'✅ Подключение к Tinkoff API работает!'u'Очистка таблицы'u'Тест упрощенной вкладки'u'Documents.PythonScripts.trading_system.test_instruments_simple'u'PythonScripts.trading_system.test_instruments_simple'u'trading_system.test_instruments_simple'u'test_instruments_simple'
Финальный тест исправления psutil
test_final_psutil_fix� ФИНАЛЬНЫЙ ТЕСТ ИСПРАВЛЕНИЯ PSUTIL⏳ Ждем сбор метрик...✅ Аналитика работает без ошибок!� ОСНОВНЫЕ МЕТРИКИ:   • Использование памяти: ⚙️  ФУНКЦИОНАЛЬНОСТЬ:   • Мониторинг памяти: ✅ Включен⚠️ Выключен   • Расширенная аналитика: ✅ Включена❌ Выключена   • Мониторинг производительности: ✅ Активен❌ Неактивен� РАСШИРЕННАЯ АНАЛИТИКА:✅ Доступен⚠️ Недоступен
� ВСЕ ИСПРАВЛЕНИЯ РАБОТАЮТ КОРРЕКТНО!� Система готова к использованию❌ КРИТИЧЕСКАЯ ОШИБКА: # test_final_psutil_fix.py# Даем время для сбора метрик# Проверяем что аналитика работает без ошибок# Проверяем расширенную аналитикуu'
Финальный тест исправления psutil
'u'� ФИНАЛЬНЫЙ ТЕСТ ИСПРАВЛЕНИЯ PSUTIL'u'⏳ Ждем сбор метрик...'u'✅ Аналитика работает без ошибок!'u'� ОСНОВНЫЕ МЕТРИКИ:'u'   • Использование памяти: 'u'⚙️  ФУНКЦИОНАЛЬНОСТЬ:'u'   • Мониторинг памяти: 'u'✅ Включен'u'⚠️ Выключен'u'   • Расширенная аналитика: 'u'✅ Включена'u'❌ Выключена'u'   • Мониторинг производительности: 'u'✅ Активен'u'❌ Неактивен'u'� РАСШИРЕННАЯ АНАЛИТИКА:'u'✅ Доступен'u'⚠️ Недоступен'u'
� ВСЕ ИСПРАВЛЕНИЯ РАБОТАЮТ КОРРЕКТНО!'u'� Система готова к использованию'u'❌ КРИТИЧЕСКАЯ ОШИБКА: 'u'Documents.PythonScripts.trading_system.test_psutil_fix'u'PythonScripts.trading_system.test_psutil_fix'u'trading_system.test_psutil_fix'u'test_psutil_fix'_STRUCT_TM_ITEMSu'This module provides various functions to manipulate time values.

There are two standard representations of time.  One is the number
of seconds since the Epoch, in UTC (a.k.a. GMT).  It may be an integer
or a floating-point number (to represent fractions of seconds).
The epoch is the point where the time starts, the return value of time.gmtime(0).
It is January 1, 1970, 00:00:00 (UTC) on all platforms.

The other representation is a tuple of 9 integers giving local time.
The tuple items are:
  year (including century, e.g. 1998)
  month (1-12)
  day (1-31)
  hours (0-23)
  minutes (0-59)
  seconds (0-59)
  weekday (0-6, Monday is 0)
  Julian day (day in the year, 1-366)
  DST (Daylight Savings Time) flag (-1, 0 or 1)
If the DST flag is 0, the time is given in the regular time zone;
if it is 1, the time is given in the DST time zone;
if it is -1, mktime() should guess based on the date and time.
'-18000altzoneasctimectimedaylightget_clock_infogmtimelocaltimemktimemonotonicmonotonic_nsperf_counter_nsprocess_timeprocess_time_nsu'The time value as returned by gmtime(), localtime(), and strptime(), and
 accepted by asctime(), mktime() and strftime().  May be considered as a
 sequence of 9 integers.

 Note that several fields' values are not the same as those defined by
 the C language standard for struct tm.  For example, the value of the
 field tm_year is the actual year, not year - 1900.  See individual
 fields' descriptions for details.'u'tm_year'u'tm_mon'u'tm_mday'u'tm_hour'u'tm_min'u'tm_sec'u'tm_wday'u'tm_yday'u'tm_isdst'tm_gmtofftm_hourtm_isdsttm_mdaytm_mintm_montm_sectm_wdaytm_ydaytm_yeartm_zonetime.struct_timestruct_timethread_timethread_time_nstime_ns-14400u'Маврикий (зима)'u'Маврикий (лето)'tznameC:/Users/bezlp/AppData/Local/Programs/Python/Python313/Lib/tkinter
Вкладка для отображения детальной информации о всех сделках
Таблица сделок с аналитикой и статистикой
Вкладка списка сделок с детальной информациейtrades_frame� Список сделок� Статистика сделокsetup_trades_tabsetup_stats_tabНастройка вкладки с таблицей сделок№Цена входаЦена выходаРазмерP&L %P&L $Длит.trades_treecolumn_widthssetup_context_menuНастройка контекстного меню для таблицыcontext_menuКопировать данныеcopy_selected_data<Button-3>show_context_menuПоказать контекстное менюidentify_rowselection_setx_rooty_rootКопировать выделенные данные в буфер обменаselected_itemscopied_dataclipboard_clearclipboard_appendЭкспорт данных в CSV файлtrades_export_.csvНастройка вкладки со статистикой сделокСтатистика сделок будет отображена после тестированияОбновить информацию о сделкахНет данных о сделкахtrade_typelongentry_indexexit_indexexit_price дн.eventagstag_configure#f0fff0background#fff0f0update_trades_statsОбновление статистики сделокeven_tradeswin_loss_ratiocumsumcumulative_pnlrunning_maxСТАТИСТИКА СДЕЛОК
� ОБЩАЯ СТАТИСТИКА:
   Всего сделок:    Прибыльных: %)
   Убыточных:    Безубыточных:    Общий P&L: $� ДОХОДНОСТЬ:
   Средний P&L за сделку: $   Средняя прибыль: $   Средний убыток: $   Profit Factor:    Соотношение прибыль/убыток: � ЭКСТРЕМУМЫ:
   Крупнейшая прибыль: $   Крупнейший убыток: $   Максимальная просадка: $⏱️  ВРЕМЕННЫЕ ХАРАКТЕРИСТИКИ:
   Средняя длительность сделки:  дней
   Минимальная длительность:    Максимальная длительность: Ошибка при расчете статистики: # ===== СЕКЦИЯ 12: ВКЛАДКА СПИСКА СДЕЛОК =====# Создание Notebook для разделения на таблицу и статистику# Вкладка с таблицей сделок# Вкладка со статистикой сделок# Создание Treeview для отображения сделок# Настройка колонок# Добавляем контекстное меню# Привязка правой кнопки мыши# Здесь можно добавить уведомление об успешном экспорте# Очистка таблицы# Получение истории сделок# Заполнение таблицы# Определение цвета для P&L# Определение типа сделки (длинная/короткая)# Форматирование значений# №# Подсветка прибыльных/убыточных сделок# Настройка тегов для цветового выделения# Светло-зеленый# Светло-красный# Серый# Расчет метрик# Расчет средней прибыли/убытка с проверкой на пустые данные# Расчет максимальной просадки# Форматирование статистикиu'
Вкладка для отображения детальной информации о всех сделках
Таблица сделок с аналитикой и статистикой
'u'Вкладка списка сделок с детальной информацией'u'� Список сделок'u'� Статистика сделок'u'Настройка вкладки с таблицей сделок'u'№'u'Цена входа'u'Цена выхода'u'Размер'b'P&L %'u'P&L %'b'P&L $'u'P&L $'u'Длит.'u'Настройка контекстного меню для таблицы'u'Копировать данные'b'<Button-3>'u'<Button-3>'u'Показать контекстное меню'u'Копировать выделенные данные в буфер обмена'u'Экспорт данных в CSV файл'b'trades_export_'u'trades_export_'b'.csv'u'.csv'u'Настройка вкладки со статистикой сделок'u'Статистика сделок будет отображена после тестирования'u'Обновить информацию о сделках'u'Нет данных о сделках'b'trade_type'u'trade_type'b'long'u'long'b'entry_index'u'entry_index'b'exit_index'u'exit_index'b'$'u'$'b'exit_price'u'exit_price'u' дн.'b'even'u'even'b'#f0fff0'u'#f0fff0'b'#fff0f0'u'#fff0f0'u'Обновление статистики сделок'u'СТАТИСТИКА СДЕЛОК
'u'� ОБЩАЯ СТАТИСТИКА:
'u'   Всего сделок: 'u'   Прибыльных: 'b'%)
'u'%)
'u'   Убыточных: 'u'   Безубыточных: 'u'   Общий P&L: $'u'� ДОХОДНОСТЬ:
'u'   Средний P&L за сделку: $'u'   Средняя прибыль: $'u'   Средний убыток: $'b'   Profit Factor: 'u'   Profit Factor: 'u'   Соотношение прибыль/убыток: 'u'� ЭКСТРЕМУМЫ:
'u'   Крупнейшая прибыль: $'u'   Крупнейший убыток: $'u'   Максимальная просадка: $'u'⏱️  ВРЕМЕННЫЕ ХАРАКТЕРИСТИКИ:
'u'   Средняя длительность сделки: 'u' дней
'u'   Минимальная длительность: 'u'   Максимальная длительность: 'u'Ошибка при расчете статистики: 'u'trading_system.gui.tabs.trades_tab'u'gui.tabs.trades_tab'u'tabs.trades_tab'u'trades_tab'filterwarningsignoretotal_commissiontotal_slippagetrade_countbreak_even_atr_threshold
        Возвращает список доступных торговых стратегий
        
        Returns:
        --------
        dict
            Словарь с кодами стратегий и их описаниями
        calculate_risk_levels
        Расчет уровней стоп-лосса и тейк-профита на основе ATR
        initial_stop_lossstop_distancetake_profit_distancerisk_percentupdate_trailing_stopposition_idcurrent_price
        Обновление уровня трейлинг-стопа
        
        Parameters:
        -----------
        position_id : str
            ID позиции
        current_price : float
            Текущая цена
        atr : float
            Текущее значение ATR
        position_type : int
            Тип позиции: 1 (LONG), -1 (SHORT)
            
        Returns:
        --------
        float or None
            Новый уровень стоп-лосса или None если не изменился
        stop_pricehighest_pricelowest_pricetrail_datatrailing_distancenew_stop_pricecheck_risk_orders
        Проверка срабатывания стоп-лоссов и тейк-профитов
        
        Parameters:
        -----------
        position_id : str
            ID позиции
        current_price : float
            Текущая цена
        position_type : int
            Тип позиции: 1 (LONG), -1 (SHORT)
        entry_price : float
            Цена входа
            
        Returns:
        --------
        tuple
            (should_exit, exit_reason, exit_price)
        stop_loss_pricetake_profit_pricetrail_stop_pricesetup_risk_orders
        Установка стоп-лоссов и тейк-профитов при входе в позицию
        risk_levelsentry_timemax_dayscheck_time_stop
        Проверка срабатывания временного стоп-лосса
        
        Parameters:
        -----------
        position_id : str
            ID позиции
            
        Returns:
        --------
        bool
            True если пора выходить по времени
        time_datadays_in_positionclear_risk_orders
        Очистка всех ордеров для позиции
        
        Parameters:
        -----------
        position_id : str
            ID позиции для очистки
        order_type
        Обновление параметров управления рисками
        
        Parameters:
        -----------
        **kwargs
            Параметры для обновления
        valid_paramsget_active_orders
        Получение информации об активных ордерах
        
        Parameters:
        -----------
        position_id : str, optional
            ID конкретной позиции
            
        Returns:
        --------
        dict
            Информация об ордерах
        
        UPDATED trading simulation loop with risk management system
        ОБНОВЛЕННЫЙ цикл симуляции торговли с системой управления рисками
        capital_historyf_historytrades_historyposition_size_historyrisk_historydrawdown_historyposition_type_historystop_loss_historytake_profit_historyexit_reason_historycurrent_fcurrent_riskpeak_capitalin_positioncurrent_position_idcurrent_drawdownunrealized_pnlprice_change_pctexit_tradetrade_result_pcttrade_resultshould_exitrisk_exit_reasonrisk_exit_priceposition_type_namenew_stopL_S_capital_aftertrade_infocurrent_stop_losscurrent_take_profittotal_capitalexisting_columnsall_columns
        ОСНОВНАЯ СИМУЛЯЦИЯ ТОРГОВЛИ
        С улучшенной валидацией и обработкой ошибок
        Данные не прошли валидацию: _create_safe_dataframe_validate_parametersperf_reportВалидация параметров системыСоздание безопасного DataFrame при ошибкахbase_riskИСПРАВЛЕННОЕ управление рискомrisk_adjusted_risk0.101.050.005СИГНАЛЫ НА НЕСКОЛЬКИХ ТАЙМФРЕЙМАХ - ОРИГИНАЛЬНАЯ ВЕРСИЯfastslowtrendma_signal_signal_fastsignal_slowsignal_trendfinal_signal
        СТРАТЕГИЯ SUPER TREND - ОРИГИНАЛЬНАЯ ВЕРСИЯ
        data_with_supertrendnan_count_directionfirst_valid_valuenan_count_linecurrent_positioncurrent_directionprevious_directionATR с УПРОЩЕННЫМИ ключами кэшаatr_
        ОПТИМИЗИРОВАННЫЙ расчет размера позиции с кэшированием
        atr_valuepos_kelly_amountrisk_amountstop_loss_pctvolatility_position
        ОПТИМИЗИРОВАННЫЙ расчет оптимальной доли f по формуле Келли с кэшированием
        arraytrades_arraykelly_kelly_f_altfractional_f# ===== СЕКЦИЯ 2: ОСНОВНАЯ ТОРГОВАЯ СИСТЕМА =====# Импорт декоратора обработки ошибок# УПРОЩЕННАЯ статистика кэша# ПРОСТОЙ кэш# � ОПТИМИЗАЦИЯ: Профилирование производительности# � RISK MANAGEMENT: Параметры стоп-лоссов и тейк-профитов# Стоп-лосс в ATR# Тейк-профит в ATR  # Трейлинг-стоп# Стоп в безубыток# ATR для активации безубытка# Макс риск на позицию (2%)# Временной стоп (дней)# � Активные ордера и стоп-лоссы# {position_id: stop_price}# {position_id: take_profit_price}# {position_id: {stop_price, highest_price}}# {position_id: activated}# � ДОБАВЛЯЕМ ОТСУТСТВУЮЩИЙ МЕТОД# � НОВЫЙ МЕТОД: Расчет уровней стоп-лосса и тейк-профита# � Если риск-менеджмент отключен, возвращаем нейтральные значения# ... существующий код ...# Ограничение максимального риска на позицию# Корректируем стоп-лосс под максимальный риск# � НОВЫЙ МЕТОД: Обновление трейлинг-стопа# Инициализация трейлинг-стопа# Обновляем наивысшую цену# Поднимаем стоп-лосс# Активация безубытка# Обновляем наименьшую цену# Опускаем стоп-лосс# � НОВЫЙ МЕТОД: Проверка срабатывания ордеров# Проверка стоп-лосса# Проверка тейк-профита# Проверка трейлинг-стопа# � НОВЫЙ МЕТОД: Установка ордеров при входе в позицию# � Если риск-менеджмент отключен, не устанавливаем ордера# Устанавливаем основные ордера# ... остальной код без изменений ...# Инициализируем трейлинг-стоп если включен# Инициализируем отслеживание времени# � НОВЫЙ МЕТОД: Проверка временного стопа# � НОВЫЙ МЕТОД: Очистка ордеров при выходе из позиции# � НОВЫЙ МЕТОД: Обновление параметров риска# � НОВЫЙ МЕТОД: Получение текущих ордеров# � ИЗМЕНЕНИЕ СУЩЕСТВУЮЩЕГО МЕТОДА: _optimized_simulation_loop# === 1. ИНИЦИАЛИЗАЦИЯ ИСТОРИИ ===# � Дополнительная история для рисков# === 2. ПЕРЕМЕННЫЕ СОСТОЯНИЯ ===# � ID текущей позиции# === 3. ОСНОВНОЙ ЦИКЛ С УЧЕТОМ РИСК-МЕНЕДЖМЕНТА ===# Получение текущих данных# Защита от некорректных данных# Динамическое управление риском# Расчет нереализованного PnL# � ПРОВЕРКА РИСК-ОРДЕРОВ ДЛЯ АКТИВНОЙ ПОЗИЦИИ# По умолчанию выход по сигналу# По умолчанию выход по текущей цене# В основном цикле, перед проверкой риск-ордеров:# � Добавили проверку# Проверка стоп-лоссов и тейк-профитов# ... аналогично для других проверок рисков ...# При входе в позицию:# � УСТАНОВКА ОРДЕРОВ РИСК-МЕНЕДЖМЕНТА (только если включен)# � ИСПРАВЛЕНИЕ: Определяем имя типа позиции# Проверка временного стопа# � Обновление трейлинг-стопа# Обновляем стоп-лосс в активных ордерах# � ЛОГИКА ВХОДА В ПОЗИЦИЮ# ПОКУПКА (LONG)# � Генерация ID позиции# � УСТАНОВКА ОРДЕРОВ РИСК-МЕНЕДЖМЕНТА# ПРОДАЖА (SHORT)  # � ЛОГИКА ВЫХОДА ИЗ ПОЗИЦИИ# � Проверяем только если не вышли по рискам# Выход из LONG при сигнале на продажу# Выход из SHORT при сигнале на покупку  # � ОБРАБОТКА ВЫХОДА ПО РИСКАМ# Расчет PnL для выхода по рискам# Запись сделки с информацией о причине выхода# � Используем цену выхода из ордера# � Причина выхода# � ID позиции# Обновление капитала и истории# Обновление параметра Келли# � ОЧИСТКА ОРДЕРОВ РИСК-МЕНЕДЖМЕНТА# Сброс позиции# � СОХРАНЕНИЕ ИНФОРМАЦИИ О РИСКАХ В ИСТОРИЮ# Обновление истории# �# Обновление текущего капитала системы# При ошибке на шаге используем предыдущие значения# === 4. СОЗДАНИЕ РЕЗУЛЬТАТОВ С ДОПОЛНИТЕЛЬНЫМИ КОЛОНКАМИ ===# Сохраняем ВСЕ колонки из data# Добавляем расчетные колонки# � ДОБАВЛЯЕМ НОВЫЕ КОЛОНКИ ДЛЯ РИСК-МЕНЕДЖМЕНТА# � ДОБАВЛЯЕМ ОТСУТСТВУЮЩИЙ МЕТОД simulate_trading# === 1. ВАЛИДАЦИЯ ВХОДНЫХ ДАННЫХ ===# Проверка данных# Возвращаем безопасный DataFrame# Проверка параметров# === 2. ПОДГОТОВКА СИСТЕМЫ ===# Для совместимости# Очистка предыдущих результатов# === 3. ВЫБОР СТРАТЕГИИ ===# В методе simulate_trading:# � НЕ МЕНЯЕМ КОЛОНКУ - стратегия сама создает 'signal'# Простая стратегия на основе скользящей средней# � ГАРАНТИЯ: Проверяем, что колонка signal создана# === 4. ПРЕДВАРИТЕЛЬНЫЕ РАСЧЕТЫ ===# Используем оптимизированный метод для симуляции# === 6. ПРОВЕРКА РЕЗУЛЬТАТОВ ===# === 7. ФИНАЛЬНАЯ СТАТИСТИКА ===# Статистика производительности# Эта ошибка будет перехвачена декоратором @with_error_handling# Передаем исключение декоратору# � ДОБАВЛЯЕМ ВСПОМОГАТЕЛЬНЫЕ МЕТОДЫ# � ДОБАВЛЯЕМ ОТСУТСТВУЮЩИЙ МЕТОД clear_caches# Очистка истории сделок# � ДОБАВЛЯЕМ ОТСУТСТВУЮЩИЙ МЕТОД get_trade_history# � ДОБАВЛЯЕМ ОТСУТСТВУЮЩИЙ МЕТОД get_performance_report# � ДОБАВЛЯЕМ ОТСУТСТВУЮЩИЙ МЕТОД get_cache_stats# � ДОБАВЛЯЕМ ОТСУТСТВУЮЩИЕ МЕТОДЫ ИЗ ИСХОДНОГО КОДА# УПРОЩЕННЫЙ ключ кэша# ВАЖНО: Инициализируем переменную ДО любого использования# Расчет просадки (с защитой от деления на ноль)# Логика корректировки риска# Просадка >10%# Просадка 5-10%# Просадка <5%# Увеличение риска при росте капитала# Ограничения риска# Оптимизированные периоды скользящих средних# Комбинированный сигнал (большинство голосов)# Финальный сигнал с фильтром по силе тренда# � ВАЖНО: Убедимся, что используется правильная колонка сигнала# Импортируем функцию расчета Super Trend# Вызываем функцию расчета Super Trend# � ШАГ 2: ОБРАБОТКА NaN ЗНАЧЕНИЙ (КРИТИЧЕСКИ ВАЖНО!)# Проверяем количество NaN в направлении тренда# Заполняем NaN в направлении тренда# Находим первое валидное значение направления# Заполняем все NaN этим значением (forward fill)# Если ВСЕ значения NaN (крайний случай), используем направление 1 (восходящий тренд)# Проверяем количество NaN в линии Super Trend# Заполняем NaN в линии Super Trend# Находим первое валидное значение линии# Заполняем все NaN этим значением# Если ВСЕ значения NaN, используем цену закрытия как приближение# � ШАГ 3: СОЗДАНИЕ ТОРГОВЫХ СИГНАЛОВ# Получаем направление Super Trend (теперь без NaN)# Логика сигналов:# - Когда Super Trend меняется с -1 на 1 → ПОКУПКА (сигнал = 1)# - Когда Super Trend меняется с 1 на -1 → ПРОДАЖА (сигнал = 0)# - В остальное время → удерживаем текущую позицию# 0 = нет позиции, 1 = лонг позиция# Первый бар: устанавливаем начальную позицию# Если тренд восходящий (1) → покупаем, если нисходящий (-1) → выходим# Проверяем смену направления тренда# Смена направления → меняем позицию# Смена на восходящий тренд → ПОКУПКА# Смена на нисходящий тренд → ПРОДАЖА/ВЫХОД# Если направление не изменилось → сохраняем текущую позицию# � ШАГ 4: СОХРАНЕНИЕ РЕЗУЛЬТАТОВ# Основной торговый сигнал (0 или 1)# Сохраняем данные Super Trend для отображения на графиках# ✅ ГАРАНТИЯ: Сохраняем Super Trend данные в ОСНОВНОЙ DataFrame# Это критически важно для отображения на графиках!# � ДОБАВЛЯЕМ ОТСУТСТВУЮЩИЙ МЕТОД calculate_atr# УПРОЩЕННЫЙ ключ - только период# Расчет ATR# Инициализация кэша если нужно# � ДОБАВЛЯЕМ ОТСУТСТВУЮЩИЙ МЕТОД calculate_position_size# � Инициализация кэша если нужно# � ЗАЩИТА: проверка входных данных# Размер по Келли# Размер по риску на сделку# Корректировка на волатильность через ATR# Ограничения размера позиции# � ФИНАЛЬНАЯ ПРОВЕРКА КОРРЕКТНОСТИ# Очистка старого кэша# � ДОБАВЛЯЕМ ОТСУТСТВУЮЩИЙ МЕТОД calculate_kelly_fraction# Фильтрация выбросов (3 сигма)# Базовая формула Келли# Альтернативный расчет через mean/variance# Консервативный подход# Ограничения и дробное применение# � НОВЫЙ МЕТОД: Обновление параметров риска с поддержкой отключенияb'ignore'u'ignore'b'break_even_atr_threshold'u'break_even_atr_threshold'u'
        Возвращает список доступных торговых стратегий
        
        Returns:
        --------
        dict
            Словарь с кодами стратегий и их описаниями
        'u'
        Расчет уровней стоп-лосса и тейк-профита на основе ATR
        'b'initial_stop_loss'u'initial_stop_loss'b'stop_distance'u'stop_distance'b'take_profit_distance'u'take_profit_distance'u'
        Обновление уровня трейлинг-стопа
        
        Parameters:
        -----------
        position_id : str
            ID позиции
        current_price : float
            Текущая цена
        atr : float
            Текущее значение ATR
        position_type : int
            Тип позиции: 1 (LONG), -1 (SHORT)
            
        Returns:
        --------
        float or None
            Новый уровень стоп-лосса или None если не изменился
        'b'stop_price'u'stop_price'b'highest_price'u'highest_price'b'lowest_price'u'lowest_price'u'
        Проверка срабатывания стоп-лоссов и тейк-профитов
        
        Parameters:
        -----------
        position_id : str
            ID позиции
        current_price : float
            Текущая цена
        position_type : int
            Тип позиции: 1 (LONG), -1 (SHORT)
        entry_price : float
            Цена входа
            
        Returns:
        --------
        tuple
            (should_exit, exit_reason, exit_price)
        'u'
        Установка стоп-лоссов и тейк-профитов при входе в позицию
        'b'entry_time'u'entry_time'b'max_days'u'max_days'u'
        Проверка срабатывания временного стоп-лосса
        
        Parameters:
        -----------
        position_id : str
            ID позиции
            
        Returns:
        --------
        bool
            True если пора выходить по времени
        'u'
        Очистка всех ордеров для позиции
        
        Parameters:
        -----------
        position_id : str
            ID позиции для очистки
        'u'
        Обновление параметров управления рисками
        
        Parameters:
        -----------
        **kwargs
            Параметры для обновления
        'u'
        Получение информации об активных ордерах
        
        Parameters:
        -----------
        position_id : str, optional
            ID конкретной позиции
            
        Returns:
        --------
        dict
            Информация об ордерах
        'u'
        UPDATED trading simulation loop with risk management system
        ОБНОВЛЕННЫЙ цикл симуляции торговли с системой управления рисками
        'b'L_'u'L_'b'S_'u'S_'b'capital_after'u'capital_after'b'position_id'u'position_id'u'
        ОСНОВНАЯ СИМУЛЯЦИЯ ТОРГОВЛИ
        С улучшенной валидацией и обработкой ошибок
        'u'Данные не прошли валидацию: 'u'Валидация параметров системы'u'Создание безопасного DataFrame при ошибках'u'ИСПРАВЛЕННОЕ управление риском'b'risk_'u'risk_'u'СИГНАЛЫ НА НЕСКОЛЬКИХ ТАЙМФРЕЙМАХ - ОРИГИНАЛЬНАЯ ВЕРСИЯ'b'fast'u'fast'b'slow'u'slow'b'trend'u'trend'b'ma_'u'ma_'b'signal_'u'signal_'b'signal_fast'u'signal_fast'b'signal_slow'u'signal_slow'b'signal_trend'u'signal_trend'b'final_signal'u'final_signal'u'
        СТРАТЕГИЯ SUPER TREND - ОРИГИНАЛЬНАЯ ВЕРСИЯ
        'u'ATR с УПРОЩЕННЫМИ ключами кэша'b'atr_'u'atr_'u'
        ОПТИМИЗИРОВАННЫЙ расчет размера позиции с кэшированием
        'b'pos_'u'pos_'u'
        ОПТИМИЗИРОВАННЫЙ расчет оптимальной доли f по формуле Келли с кэшированием
        'b'kelly_'u'kelly_'u'PythonScripts.trading_system.core.trading_system'u'trading_system.core.trading_system'u'core.trading_system'
УЛЬТИМАТИВНЫЙ менеджер данных со всеми улучшениями
UltimateTBankDataManagerУльтимативный менеджер данных со всеми улучшениямиpredictorpredictions_made� UltimateTBankDataManager инициализирован со всеми улучшениями!
        Улучшенная загрузка данных со всеми оптимизациями
        get_comprehensive_analyticsВсеобъемлющая аналитикаultimatesmart_predictionsauto_optimization# tbank_api/ultimate_data_manager.py# Инициализация расширенных систем# Записываем обращение для предсказания# Запускаем автооптимизацию# ... остальные методы для совместимости ...u'
УЛЬТИМАТИВНЫЙ менеджер данных со всеми улучшениями
'u'Ультимативный менеджер данных со всеми улучшениями'b'predictions_made'u'predictions_made'u'� UltimateTBankDataManager инициализирован со всеми улучшениями!'u'
        Улучшенная загрузка данных со всеми оптимизациями
        'u'Всеобъемлющая аналитика'b'ultimate'u'ultimate'b'smart_predictions'u'smart_predictions'b'auto_optimization'u'auto_optimization'u'PythonScripts.trading_system.tbank_api.ultimate_data_manager'u'trading_system.tbank_api.ultimate_data_manager'u'tbank_api.ultimate_data_manager'u'ultimate_data_manager'update_api_managerОбновление ApiManager для использования исправленного TBankAPItbank_api/api_manager.pyfrom .tbank_api import TBankAPIold_importfrom .tbank_api_fixed_complete import TBankAPIComplete as TBankAPInew_import✅ ApiManager обновлен для использования исправленного TBankAPI!⚠️  Импорт уже обновлен или не найден❌ Ошибка обновления ApiManager: # Заменяем импорт и инициализациюu'Обновление ApiManager для использования исправленного TBankAPI'b'tbank_api/api_manager.py'u'tbank_api/api_manager.py'b'from .tbank_api import TBankAPI'u'from .tbank_api import TBankAPI'b'from .tbank_api_fixed_complete import TBankAPIComplete as TBankAPI'u'from .tbank_api_fixed_complete import TBankAPIComplete as TBankAPI'u'✅ ApiManager обновлен для использования исправленного TBankAPI!'u'⚠️  Импорт уже обновлен или не найден'u'❌ Ошибка обновления ApiManager: 'u'Documents.PythonScripts.trading_system.update_api_manager'u'PythonScripts.trading_system.update_api_manager'u'trading_system.update_api_manager'u'update_api_manager'
Класс для визуализации и анализа результатов тестирования
Содержит методы для построения графиков и генерации отчетов
Класс для визуализации результатов тестированияtrade_analyticsДобавление результатов симуляцииadd_validation_resultДобавление результатов валидацииget_performance_summaryПолучить сводку производительности в виде текстаСВОДКА ПРОИЗВОДИТЕЛЬНОСТИ

� � Капитал: $ | Доходность: %
� Макс. просадка: % | Средняя: � Коэф. Шарпа:  | Волатильность: ⚖️  Средний f:  | Средний риск: � Средняя позиция: $total_costs� Издержки: $costs_percentageСравнительный график нескольких тестовНет данных для сравненияbrownСравнение динамики капиталаВремяСравнение просадокcolors_barsСравнение общей доходностиДоходность
(%)Коэф.
ШарпаПросадка
(%)metric_namesСравнение основных метрикПолучить детальную статистику в виде текстаРезультат '' не найденДЕТАЛЬНАЯ СТАТИСТИКА

� ОСНОВНЫЕ МЕТРИКИ:
   Общая доходность:    Коэффициент Шарпа:    Максимальная просадка:    Волатильность: 
⚖️  УПРАВЛЕНИЕ РИСКАМИ:
   Средний Kelly f:    Средний уровень риска:    Средний размер позиции: $   Корректировок риска: 
�️  СИСТЕМА УПРАВЛЕНИЯ РИСКАМИ:
   Сделок с рисками:    Стоп-лоссов:    Тейк-профитов: 
� ТРАНЗАКЦИОННЫЕ ИЗДЕРЖКИ:
   Общие издержки: $   Комиссии: $   Проскальзывание: $   Издержки в %: 
� СТАТИСТИКА ДОХОДНОСТЕЙ:
   Средняя дневная доходность:    Стандартное отклонение:    Асимметрия: skew   Эксцесс: kurtosisПолучить список доступных результатовget_available_validationsПолучить список доступных валидаций
        Создание графика с отображением риск-ордеров и точек выхода
        ❌ Результат 'has_trade_historysuptitle� Визуализация риск-менеджмента: stopstakesexit_pointsexit_colorspointsoВыход: � Цены с риск-ордерами и точками выхода� Динамика капитала с точками выходаreasonsmeanscountsyerrmean_val2.n=� Средний PnL по типам выходовexit_points_sortedrolling_profitableПроцент прибыльных выходовУровень 50%� Эффективность выходов (скользящее окно)Процент прибыльных выходов (%)Недостаточно данных
для анализа эффективностиНет данных о точках выхода❌ Ошибка построения графика риск-ордеров: Получение детальной статистики по риск-менеджменту� ДЕТАЛЬНАЯ СТАТИСТИКА РИСК-МЕНЕДЖМЕНТА
� ОСНОВНЫЕ МЕТРИКИ:
• Сделок с рисками: • Трейлинг-стопы: • Win Rate с рисками: � PnL ПО ПРИЧИНАМ ВЫХОДА:
mean_pnl� ЭФФЕКТИВНОСТЬ СТОП-ЛОССОВ:
• Средний PnL: • Эффективность: Сделки закрывались только по торговым сигналам

� РАСШИРЕННАЯ АНАЛИТИКА:
• Всего сделок: • Среднее время удержания: • Макс. время удержания:  дней

� РЕКОМЕНДАЦИИ:
risk_reward• � Отличные параметры рисков! Продолжайте в том же духе.
• � Хорошие результаты. Можно экспериментировать с параметрами.
• ⚠️ Рекомендуется оптимизировать параметры риск-менеджмента.
• � Стабильные результаты. Рассмотрите тонкую настройку параметров.
❌ Ошибка формирования статистики: Генерация отчета об эффективности риск-менеджмента� ОТЧЕТ ЭФФЕКТИВНОСТИ РИСК-МЕНЕДЖМЕНТА
� ОСНОВНЫЕ ПОКАЗАТЕЛИ:
emojistop_efficiency• Доля от всех сделок: � РАСШИРЕННАЯ СТАТИСТИКА:
• Средняя продолжительность: • Макс. продолжительность: • Попробуйте изменить множители ATR для стоп-лоссов и тейк-профитов
❌ Ошибка формирования отчета: # ===== СЕКЦИЯ 3: ВИЗУАЛИЗАЦИЯ РЕЗУЛЬТАТОВ =====# График 1: Сравнение капитала# График 2: Сравнение просадок# График 3: Гистограмма доходностей# График 4: Основные метрики# Отрицательное для визуализации# В методе get_detailed_stats добавляем раздел рисков:# � РАЗДЕЛ СИСТЕМЫ РИСК-МЕНЕДЖМЕНТА# � ДОБАВЛЯЕМ НОВЫЕ МЕТОДЫ В КЛАСС ResultsVisualizer# � СОЗДАЕМ ТОЛЬКО НУЖНОЕ КОЛИЧЕСТВО ГРАФИКОВ# Если есть история сделок - 4 графика, иначе - 2# График 1: Цены с риск-ордерами# Отображение стоп-лоссов и тейк-профитов (только где есть позиции)# Стоп-лоссы# Тейк-профиты# Отметки точек выхода# График 2: Капитал с отметками выходов# График 3: Распределение PnL по типам выходов (только если есть история сделок)# Группируем по причинам выхода# Добавляем подписи# График 4: Эффективность риск-ордеров во времени (только если есть точки выхода)# Создаем скользящее окно эффективности# Рассчитываем скользящую эффективность# Основные метрики рисков# Расширенная аналитика из trade_history# Основная статистика# Анализ PnL по типам выходов# Расширенная статистика из истории сделокu'
Класс для визуализации и анализа результатов тестирования
Содержит методы для построения графиков и генерации отчетов
'u'Класс для визуализации результатов тестирования'u'Добавление результатов симуляции'u'Добавление результатов валидации'u'Получить сводку производительности в виде текста'u'СВОДКА ПРОИЗВОДИТЕЛЬНОСТИ
'u'
� 'u'� Капитал: $'u' | Доходность: 'b'%
'u'%
'u'� Макс. просадка: 'u'% | Средняя: 'u'� Коэф. Шарпа: 'u' | Волатильность: 'u'⚖️  Средний f: 'u' | Средний риск: 'u'� Средняя позиция: $'b'total_costs'u'total_costs'u'� Издержки: $'b'costs_percentage'u'costs_percentage'u'Сравнительный график нескольких тестов'u'Нет данных для сравнения'b'brown'u'brown'u'Сравнение динамики капитала'u'Время'u'Сравнение просадок'u'Сравнение общей доходности'u'Доходность
(%)'u'Коэф.
Шарпа'u'Просадка
(%)'u'Сравнение основных метрик'u'Получить детальную статистику в виде текста'u'Результат ''u'' не найден'u'ДЕТАЛЬНАЯ СТАТИСТИКА
'u'
� ОСНОВНЫЕ МЕТРИКИ:
'u'   Общая доходность: 'u'   Коэффициент Шарпа: 'u'   Максимальная просадка: 'u'   Волатильность: 'u'
⚖️  УПРАВЛЕНИЕ РИСКАМИ:
'u'   Средний Kelly f: 'u'   Средний уровень риска: 'u'   Средний размер позиции: $'u'   Корректировок риска: 'u'
�️  СИСТЕМА УПРАВЛЕНИЯ РИСКАМИ:
'u'   Сделок с рисками: 'u'   Стоп-лоссов: 'u'   Тейк-профитов: 'u'
� ТРАНЗАКЦИОННЫЕ ИЗДЕРЖКИ:
'u'   Общие издержки: $'u'   Комиссии: $'b'total_commission'u'total_commission'u'   Проскальзывание: $'b'total_slippage'u'total_slippage'u'   Издержки в %: 'u'
� СТАТИСТИКА ДОХОДНОСТЕЙ:
'u'   Средняя дневная доходность: 'u'   Стандартное отклонение: 'u'   Асимметрия: 'u'   Эксцесс: 'u'Получить список доступных результатов'u'Получить список доступных валидаций'u'
        Создание графика с отображением риск-ордеров и точек выхода
        'u'❌ Результат ''b'trade_history'u'trade_history'u'� Визуализация риск-менеджмента: 'b'o'u'o'u'Выход: 'u'� Цены с риск-ордерами и точками выхода'u'� Динамика капитала с точками выхода'b'n='u'n='u'� Средний PnL по типам выходов'u'Процент прибыльных выходов'u'Уровень 50%'u'� Эффективность выходов (скользящее окно)'u'Процент прибыльных выходов (%)'u'Недостаточно данных
для анализа эффективности'u'Нет данных о точках выхода'u'❌ Ошибка построения графика риск-ордеров: 'u'Получение детальной статистики по риск-менеджменту'u'� ДЕТАЛЬНАЯ СТАТИСТИКА РИСК-МЕНЕДЖМЕНТА
'u'� ОСНОВНЫЕ МЕТРИКИ:
'u'• Сделок с рисками: 'u'• Трейлинг-стопы: 'u'• Win Rate с рисками: 'u'� PnL ПО ПРИЧИНАМ ВЫХОДА:
'u'� ЭФФЕКТИВНОСТЬ СТОП-ЛОССОВ:
'u'• Средний PnL: 'u'• Эффективность: 'u'Сделки закрывались только по торговым сигналам

'u'� РАСШИРЕННАЯ АНАЛИТИКА:
'u'• Всего сделок: 'u'• Среднее время удержания: 'u'• Макс. время удержания: 'u' дней

'u'� РЕКОМЕНДАЦИИ:
'u'• � Отличные параметры рисков! Продолжайте в том же духе.
'u'• � Хорошие результаты. Можно экспериментировать с параметрами.
'u'• ⚠️ Рекомендуется оптимизировать параметры риск-менеджмента.
'u'• � Стабильные результаты. Рассмотрите тонкую настройку параметров.
'u'❌ Ошибка формирования статистики: 'u'Генерация отчета об эффективности риск-менеджмента'u'� ОТЧЕТ ЭФФЕКТИВНОСТИ РИСК-МЕНЕДЖМЕНТА
'u'� ОСНОВНЫЕ ПОКАЗАТЕЛИ:
'u'• Доля от всех сделок: 'u'� РАСШИРЕННАЯ СТАТИСТИКА:
'u'• Средняя продолжительность: 'u'• Макс. продолжительность: 'u'• Попробуйте изменить множители ATR для стоп-лоссов и тейк-профитов
'u'❌ Ошибка формирования отчета: 'u'PythonScripts.trading_system.core.visualizer'u'trading_system.core.visualizer'u'core.visualizer'u'visualizer'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          &    v    